

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction &mdash; ST67W611M1 AT Commands v2.0.97 documentation</title>
      <link rel="stylesheet" type="text/css" href="static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="static/style.css?v=cef9d956" />

  
      <script src="static/jquery.js?v=5d32c60e"></script>
      <script src="static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="static/documentation_options.js?v=8dc70ad1"></script>
      <script src="static/doctools.js?v=9bcbadda"></script>
      <script src="static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="#" class="icon icon-home">
            ST67W611M1 AT Commands
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Introduction</a><ul>
<li><a class="reference internal" href="#at-command-types">AT command types</a></li>
<li><a class="reference internal" href="#at-message-types">AT message types</a><ul>
<li><a class="reference internal" href="#at-response-messages">AT response messages</a></li>
<li><a class="reference internal" href="#at-message-reports">AT message reports</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#basic-at-commands">Basic AT commands</a><ul>
<li><a class="reference internal" href="#basic-at-command-description">Basic AT command description</a><ul>
<li><a class="reference internal" href="#at">AT</a><ul>
<li><a class="reference internal" href="#execute-command">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-gmr">AT+GMR</a><ul>
<li><a class="reference internal" href="#id1">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-rst">AT+RST</a><ul>
<li><a class="reference internal" href="#id2">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-restore">AT+RESTORE</a><ul>
<li><a class="reference internal" href="#id3">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cmd">AT+CMD?</a><ul>
<li><a class="reference internal" href="#query-command">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ate">ATE</a><ul>
<li><a class="reference internal" href="#id4">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-sysram">AT+SYSRAM?</a><ul>
<li><a class="reference internal" href="#id5">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-sysmsg">AT+SYSMSG?</a><ul>
<li><a class="reference internal" href="#id6">Query command</a></li>
<li><a class="reference internal" href="#set-command">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-syslog">AT+SYSLOG?</a><ul>
<li><a class="reference internal" href="#id7">Query command</a></li>
<li><a class="reference internal" href="#id8">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-sysstore">AT+SYSSTORE?</a><ul>
<li><a class="reference internal" href="#id9">Query command</a></li>
<li><a class="reference internal" href="#id10">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-temp">AT+TEMP?</a><ul>
<li><a class="reference internal" href="#id11">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-efuse-w">AT+EFUSE-W</a><ul>
<li><a class="reference internal" href="#id12">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-efuse-r">AT+EFUSE-R</a><ul>
<li><a class="reference internal" href="#id13">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-efuse-cfm">AT+EFUSE-CFM</a><ul>
<li><a class="reference internal" href="#id14">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-flash-w">AT+FLASH-W</a><ul>
<li><a class="reference internal" href="#id15">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-flash-r">AT+FLASH-R</a><ul>
<li><a class="reference internal" href="#id16">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-flash-e">AT+FLASH-E</a><ul>
<li><a class="reference internal" href="#id17">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-iopupd">AT+IOPUPD</a><ul>
<li><a class="reference internal" href="#id18">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-ioout">AT+IOOUT</a><ul>
<li><a class="reference internal" href="#id19">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-ioin">AT+IOIN</a><ul>
<li><a class="reference internal" href="#id20">Set command</a></li>
<li><a class="reference internal" href="#id21">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-iorst">AT+IORST</a><ul>
<li><a class="reference internal" href="#id22">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-part">AT+PART</a><ul>
<li><a class="reference internal" href="#id23">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-otastart">AT+OTASTART</a><ul>
<li><a class="reference internal" href="#id24">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-otasend">AT+OTASEND</a><ul>
<li><a class="reference internal" href="#id25">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-otafin">AT+OTAFIN</a><ul>
<li><a class="reference internal" href="#id26">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-fs">AT+FS</a><ul>
<li><a class="reference internal" href="#id27">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-gmac">AT+GMAC</a><ul>
<li><a class="reference internal" href="#id28">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-pn">AT+PN</a><ul>
<li><a class="reference internal" href="#id29">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-vbat">AT+VBAT</a><ul>
<li><a class="reference internal" href="#id30">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-minidump">AT+MINIDUMP</a><ul>
<li><a class="reference internal" href="#id31">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-efuse-w-hex">AT+EFUSE-W-HEX</a><ul>
<li><a class="reference internal" href="#id32">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-efuse-r-hex">AT+EFUSE-R-HEX</a><ul>
<li><a class="reference internal" href="#id33">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-flash-w-hex">AT+FLASH-W-HEX</a><ul>
<li><a class="reference internal" href="#id34">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-flash-r-hex">AT+FLASH-R-HEX</a><ul>
<li><a class="reference internal" href="#id35">Set command</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#wi-fi-at-commands">Wi-Fi AT commands</a><ul>
<li><a class="reference internal" href="#wi-fi-at-command-description">Wi-Fi AT command description</a><ul>
<li><a class="reference internal" href="#at-wifisp">AT+WIFISP</a><ul>
<li><a class="reference internal" href="#id36">Query command</a></li>
<li><a class="reference internal" href="#id37">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwmode">AT+CWMODE</a><ul>
<li><a class="reference internal" href="#id38">Query command</a></li>
<li><a class="reference internal" href="#id39">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwnetmode">AT+CWNETMODE</a><ul>
<li><a class="reference internal" href="#id40">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwstate">AT+CWSTATE</a><ul>
<li><a class="reference internal" href="#id41">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwjap">AT+CWJAP</a><ul>
<li><a class="reference internal" href="#id42">Query command</a></li>
<li><a class="reference internal" href="#id43">Set command</a></li>
<li><a class="reference internal" href="#id44">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwreconncfg">AT+CWRECONNCFG</a><ul>
<li><a class="reference internal" href="#id45">Query command</a></li>
<li><a class="reference internal" href="#id46">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwlapopt">AT+CWLAPOPT</a><ul>
<li><a class="reference internal" href="#id47">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwlap">AT+CWLAP</a><ul>
<li><a class="reference internal" href="#id48">Set command</a></li>
<li><a class="reference internal" href="#id49">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwqap">AT+CWQAP</a><ul>
<li><a class="reference internal" href="#id50">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwsap">AT+CWSAP</a><ul>
<li><a class="reference internal" href="#id51">Query command</a></li>
<li><a class="reference internal" href="#id52">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwlif">AT+CWLIF</a><ul>
<li><a class="reference internal" href="#id53">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwqif">AT+CWQIF</a><ul>
<li><a class="reference internal" href="#id54">Execute command</a></li>
<li><a class="reference internal" href="#id55">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwdhcp">AT+CWDHCP</a><ul>
<li><a class="reference internal" href="#id56">Query command</a></li>
<li><a class="reference internal" href="#id57">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwdhcps">AT+CWDHCPS</a><ul>
<li><a class="reference internal" href="#id58">Query command</a></li>
<li><a class="reference internal" href="#id59">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwautoconn">AT+CWAUTOCONN</a><ul>
<li><a class="reference internal" href="#id60">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipstamac">AT+CIPSTAMAC</a><ul>
<li><a class="reference internal" href="#id61">Query command</a></li>
<li><a class="reference internal" href="#id62">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipapmac">AT+CIPAPMAC</a><ul>
<li><a class="reference internal" href="#id63">Query command</a></li>
<li><a class="reference internal" href="#id64">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsta">AT+CIPSTA</a><ul>
<li><a class="reference internal" href="#id65">Query command</a></li>
<li><a class="reference internal" href="#id66">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipap">AT+CIPAP</a><ul>
<li><a class="reference internal" href="#id67">Query command</a></li>
<li><a class="reference internal" href="#id68">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwhostname">AT+CWHOSTNAME</a><ul>
<li><a class="reference internal" href="#id69">Query command</a></li>
<li><a class="reference internal" href="#id70">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwcountry">AT+CWCOUNTRY</a><ul>
<li><a class="reference internal" href="#id71">Query command</a></li>
<li><a class="reference internal" href="#id72">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwmonitor">AT+CWMONITOR</a><ul>
<li><a class="reference internal" href="#id73">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwstaproto">AT+CWSTAPROTO</a><ul>
<li><a class="reference internal" href="#id74">Query command</a></li>
<li><a class="reference internal" href="#id75">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwapproto">AT+CWAPPROTO</a><ul>
<li><a class="reference internal" href="#id76">Query command</a></li>
<li><a class="reference internal" href="#id77">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-wps">AT+WPS</a><ul>
<li><a class="reference internal" href="#id78">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwantenable">AT+CWANTENABLE</a><ul>
<li><a class="reference internal" href="#id79">Query command</a></li>
<li><a class="reference internal" href="#id80">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwantnum">AT+CWANTNUM</a><ul>
<li><a class="reference internal" href="#id81">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwant">AT+CWANT</a><ul>
<li><a class="reference internal" href="#id82">Query command</a></li>
<li><a class="reference internal" href="#id83">Set command</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#tcp-ip-at-commands">TCP/IP AT commands</a><ul>
<li><a class="reference internal" href="#tcp-ip-at-command-description">TCP/IP AT command description</a><ul>
<li><a class="reference internal" href="#at-cipv6">AT+CIPV6</a><ul>
<li><a class="reference internal" href="#id84">Query command</a></li>
<li><a class="reference internal" href="#id85">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cifsr">AT+CIFSR</a><ul>
<li><a class="reference internal" href="#id86">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipdomain">AT+CIPDOMAIN</a><ul>
<li><a class="reference internal" href="#id87">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipdns">AT+CIPDNS</a><ul>
<li><a class="reference internal" href="#id88">Query command</a></li>
<li><a class="reference internal" href="#id89">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipstate">AT+CIPSTATE</a><ul>
<li><a class="reference internal" href="#id90">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-ciprecvbuf">AT+CIPRECVBUF</a><ul>
<li><a class="reference internal" href="#id91">Set command</a></li>
<li><a class="reference internal" href="#id92">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipstart">AT+CIPSTART</a><ul>
<li><a class="reference internal" href="#establish-tcp-connection">Establish TCP connection</a><ul>
<li><a class="reference internal" href="#id93">Set command</a></li>
<li><a class="reference internal" href="#id94">Query command</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipstartex">AT+CIPSTARTEX</a></li>
<li><a class="reference internal" href="#data-mode-only-exit-from-data-mode">[Data Mode Only] +++ : Exit from Data Mode</a><ul>
<li><a class="reference internal" href="#special-execute-command">Special Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-ciptcpopt">AT+CIPTCPOPT</a><ul>
<li><a class="reference internal" href="#id95">Query command</a></li>
<li><a class="reference internal" href="#id96">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipclose">AT+CIPCLOSE</a><ul>
<li><a class="reference internal" href="#id100">Set command</a></li>
<li><a class="reference internal" href="#id101">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsend">AT+CIPSEND</a><ul>
<li><a class="reference internal" href="#id102">Set command</a></li>
<li><a class="reference internal" href="#id103">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsendl">AT+CIPSENDL</a><ul>
<li><a class="reference internal" href="#id104">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsendlcfg">AT+CIPSENDLCFG</a><ul>
<li><a class="reference internal" href="#id105">Query command</a></li>
<li><a class="reference internal" href="#id106">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsendex">AT+CIPSENDEX</a><ul>
<li><a class="reference internal" href="#id107">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipdinfo">AT+CIPDINFO</a><ul>
<li><a class="reference internal" href="#id108">Query command</a></li>
<li><a class="reference internal" href="#id109">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipmux">AT+CIPMUX</a><ul>
<li><a class="reference internal" href="#id110">Query command</a></li>
<li><a class="reference internal" href="#id111">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipserver">AT+CIPSERVER</a><ul>
<li><a class="reference internal" href="#id112">Query command</a></li>
<li><a class="reference internal" href="#id113">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipservermaxconn">AT+CIPSERVERMAXCONN</a><ul>
<li><a class="reference internal" href="#id117">Query command</a></li>
<li><a class="reference internal" href="#id118">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsto">AT+CIPSTO</a><ul>
<li><a class="reference internal" href="#id119">Query command</a></li>
<li><a class="reference internal" href="#id120">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-savetranslink">AT+SAVETRANSLINK</a><ul>
<li><a class="reference internal" href="#for-tcp-ssl-single-connection">For TCP/SSL single connection</a><ul>
<li><a class="reference internal" href="#id121">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#for-udp-transmission">For UDP Transmission</a><ul>
<li><a class="reference internal" href="#id122">Set command</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsntpcfg">AT+CIPSNTPCFG</a><ul>
<li><a class="reference internal" href="#id123">Query command</a></li>
<li><a class="reference internal" href="#id124">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsntptime">AT+CIPSNTPTIME</a><ul>
<li><a class="reference internal" href="#id125">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsntpintv">AT+CIPSNTPINTV</a><ul>
<li><a class="reference internal" href="#id126">Query command</a></li>
<li><a class="reference internal" href="#id127">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipreconnintv">AT+CIPRECONNINTV</a><ul>
<li><a class="reference internal" href="#id128">Query command</a></li>
<li><a class="reference internal" href="#id129">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-ciprecvmode">AT+CIPRECVMODE</a><ul>
<li><a class="reference internal" href="#id130">Query command</a></li>
<li><a class="reference internal" href="#id131">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-ciprecvdata">AT+CIPRECVDATA</a><ul>
<li><a class="reference internal" href="#id132">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-ciprecvlen">AT+CIPRECVLEN</a><ul>
<li><a class="reference internal" href="#id133">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-ping">AT+PING</a><ul>
<li><a class="reference internal" href="#id134">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipevt">AT+CIPEVT</a><ul>
<li><a class="reference internal" href="#id135">Set command</a></li>
<li><a class="reference internal" href="#id136">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cwevt">AT+CWEVT</a><ul>
<li><a class="reference internal" href="#id137">Set command</a></li>
<li><a class="reference internal" href="#id138">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsslcconf">AT+CIPSSLCCONF</a><ul>
<li><a class="reference internal" href="#id139">Query command</a></li>
<li><a class="reference internal" href="#id140">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsslsconf">AT+CIPSSLSCONF</a><ul>
<li><a class="reference internal" href="#id141">Query command</a></li>
<li><a class="reference internal" href="#id142">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsslcsni">AT+CIPSSLCSNI</a><ul>
<li><a class="reference internal" href="#id143">Query command</a></li>
<li><a class="reference internal" href="#id144">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsslcalpn">AT+CIPSSLCALPN</a><ul>
<li><a class="reference internal" href="#id145">Query command</a></li>
<li><a class="reference internal" href="#id146">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsslcpsk">AT+CIPSSLCPSK</a><ul>
<li><a class="reference internal" href="#id147">Query command</a></li>
<li><a class="reference internal" href="#id148">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-cipsslcpskhex">AT+CIPSSLCPSKHEX</a><ul>
<li><a class="reference internal" href="#id149">Query command</a></li>
<li><a class="reference internal" href="#id150">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-iperf">AT+IPERF</a><ul>
<li><a class="reference internal" href="#id151">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-iperfstop">AT+IPERFSTOP</a><ul>
<li><a class="reference internal" href="#id152">Set command</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#mqtt-at-commands">MQTT AT commands</a><ul>
<li><a class="reference internal" href="#mqtt-at-command-description">MQTT AT command description</a><ul>
<li><a class="reference internal" href="#at-mqttusercfg">AT+MQTTUSERCFG</a><ul>
<li><a class="reference internal" href="#id153">Query command</a></li>
<li><a class="reference internal" href="#id154">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-mqttclientid">AT+MQTTCLIENTID</a><ul>
<li><a class="reference internal" href="#id155">Query command</a></li>
<li><a class="reference internal" href="#id156">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-mqttusername">AT+MQTTUSERNAME</a><ul>
<li><a class="reference internal" href="#id157">Query command</a></li>
<li><a class="reference internal" href="#id158">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-mqttpassword">AT+MQTTPASSWORD</a><ul>
<li><a class="reference internal" href="#id159">Query command</a></li>
<li><a class="reference internal" href="#id160">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-mqttconncfg">AT+MQTTCONNCFG</a><ul>
<li><a class="reference internal" href="#id161">Query command</a></li>
<li><a class="reference internal" href="#id162">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-mqttalpn">AT+MQTTALPN</a><ul>
<li><a class="reference internal" href="#id163">Query command</a></li>
<li><a class="reference internal" href="#id164">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-mqttsni">AT+MQTTSNI</a><ul>
<li><a class="reference internal" href="#id165">Query command</a></li>
<li><a class="reference internal" href="#id166">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-mqttconn">AT+MQTTCONN</a><ul>
<li><a class="reference internal" href="#id167">Query command</a></li>
<li><a class="reference internal" href="#id168">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-mqttpub">AT+MQTTPUB</a><ul>
<li><a class="reference internal" href="#id169">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-mqttpubraw">AT+MQTTPUBRAW</a><ul>
<li><a class="reference internal" href="#id170">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-mqttsub">AT+MQTTSUB</a><ul>
<li><a class="reference internal" href="#id171">Query command</a></li>
<li><a class="reference internal" href="#id172">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-mqttunsub">AT+MQTTUNSUB</a><ul>
<li><a class="reference internal" href="#id173">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-mqttclean">AT+MQTTCLEAN</a><ul>
<li><a class="reference internal" href="#id174">Set command</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#ble-at-commands">BLE AT commands</a><ul>
<li><a class="reference internal" href="#ble-at-command-description">BLE AT command description</a><ul>
<li><a class="reference internal" href="#at-bleinit">AT+BLEINIT</a><ul>
<li><a class="reference internal" href="#id175">Query command</a></li>
<li><a class="reference internal" href="#id176">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bleaddr">AT+BLEADDR</a><ul>
<li><a class="reference internal" href="#id177">Query command</a></li>
<li><a class="reference internal" href="#id178">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blename">AT+BLENAME</a><ul>
<li><a class="reference internal" href="#id179">Query command</a></li>
<li><a class="reference internal" href="#id180">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blescanparam">AT+BLESCANPARAM</a><ul>
<li><a class="reference internal" href="#id181">Query command</a></li>
<li><a class="reference internal" href="#id182">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blescan">AT+BLESCAN</a><ul>
<li><a class="reference internal" href="#id183">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blescanrspdata">AT+BLESCANRSPDATA</a><ul>
<li><a class="reference internal" href="#id184">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bleadvparam">AT+BLEADVPARAM</a><ul>
<li><a class="reference internal" href="#id185">Query command</a></li>
<li><a class="reference internal" href="#id186">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bleadvdata">AT+BLEADVDATA</a><ul>
<li><a class="reference internal" href="#id187">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bleadvstart">AT+BLEADVSTART</a><ul>
<li><a class="reference internal" href="#id188">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bleadvstop">AT+BLEADVSTOP</a><ul>
<li><a class="reference internal" href="#id189">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bleconn">AT+BLECONN</a><ul>
<li><a class="reference internal" href="#id190">Query command</a></li>
<li><a class="reference internal" href="#id191">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bleconnparam">AT+BLECONNPARAM</a><ul>
<li><a class="reference internal" href="#id192">Query command</a></li>
<li><a class="reference internal" href="#id193">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bledisconn">AT+BLEDISCONN</a><ul>
<li><a class="reference internal" href="#id194">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bledatalen">AT+BLEDATALEN</a><ul>
<li><a class="reference internal" href="#id195">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bleexchangemtu">AT+BLEEXCHANGEMTU</a><ul>
<li><a class="reference internal" href="#id196">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattssrv">AT+BLEGATTSSRV</a><ul>
<li><a class="reference internal" href="#id197">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattssrvcre">AT+BLEGATTSSRVCRE</a><ul>
<li><a class="reference internal" href="#id198">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattssrvdel">AT+BLEGATTSSRVDEL</a><ul>
<li><a class="reference internal" href="#id199">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattsregister">AT+BLEGATTSREGISTER</a><ul>
<li><a class="reference internal" href="#id200">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattschar">AT+BLEGATTSCHAR</a><ul>
<li><a class="reference internal" href="#id201">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattscharcre">AT+BLEGATTSCHARCRE</a><ul>
<li><a class="reference internal" href="#id202">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattsntfy">AT+BLEGATTSNTFY</a><ul>
<li><a class="reference internal" href="#id203">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattsind">AT+BLEGATTSIND</a><ul>
<li><a class="reference internal" href="#id204">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattsrd">AT+BLEGATTSRD</a><ul>
<li><a class="reference internal" href="#id205">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattcsrvdis">AT+BLEGATTCSRVDIS</a><ul>
<li><a class="reference internal" href="#id206">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattcchardis">AT+BLEGATTCCHARDIS</a><ul>
<li><a class="reference internal" href="#id207">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattcwr">AT+BLEGATTCWR</a><ul>
<li><a class="reference internal" href="#id208">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattcrd">AT+BLEGATTCRD</a><ul>
<li><a class="reference internal" href="#id209">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattcsubscribe">AT+BLEGATTCSUBSCRIBE</a><ul>
<li><a class="reference internal" href="#id210">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blegattcunsubscribe">AT+BLEGATTCUNSUBSCRIBE</a><ul>
<li><a class="reference internal" href="#id211">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bletxpwr">AT+BLETXPWR</a><ul>
<li><a class="reference internal" href="#id212">Query command</a></li>
<li><a class="reference internal" href="#id213">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blesecparam">AT+BLESECPARAM</a><ul>
<li><a class="reference internal" href="#id214">Query command</a></li>
<li><a class="reference internal" href="#id215">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bleseccannel">AT+BLESECCANNEL</a><ul>
<li><a class="reference internal" href="#id216">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blesecpasskeyconfirm">AT+BLESECPASSKEYCONFIRM</a><ul>
<li><a class="reference internal" href="#id217">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blesecpairingconfirm">AT+BLESECPAIRINGCONFIRM</a><ul>
<li><a class="reference internal" href="#id218">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blesecpasskey">AT+BLESECPASSKEY</a><ul>
<li><a class="reference internal" href="#id219">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blesecgetltklist">AT+BLESECGETLTKLIST</a><ul>
<li><a class="reference internal" href="#id220">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blesecunpair">AT+BLESECUNPAIR</a><ul>
<li><a class="reference internal" href="#id221">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blesecstart">AT+BLESECSTART</a><ul>
<li><a class="reference internal" href="#id222">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blebasinit">AT+BLEBASINIT</a><ul>
<li><a class="reference internal" href="#id223">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blebasdeinit">AT+BLEBASDEINIT</a><ul>
<li><a class="reference internal" href="#id224">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blebaslvlget">AT+BLEBASLVLGET</a><ul>
<li><a class="reference internal" href="#id225">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-blebaslvlset">AT+BLEBASLVLSET</a><ul>
<li><a class="reference internal" href="#id226">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bleiasinit">AT+BLEIASINIT</a><ul>
<li><a class="reference internal" href="#id227">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bleiasdeinit">AT+BLEIASDEINIT</a><ul>
<li><a class="reference internal" href="#id228">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bledisinit">AT+BLEDISINIT</a><ul>
<li><a class="reference internal" href="#id229">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bledisdeinit">AT+BLEDISDEINIT</a><ul>
<li><a class="reference internal" href="#id230">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-bledisset">AT+BLEDISSET</a><ul>
<li><a class="reference internal" href="#id231">Set command</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#low-power-at-commands">Low power AT commands</a><ul>
<li><a class="reference internal" href="#low-power-at-command-description">Low power AT command description</a><ul>
<li><a class="reference internal" href="#at-pwr">AT+PWR</a><ul>
<li><a class="reference internal" href="#id232">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-slwkio">AT+SLWKIO</a><ul>
<li><a class="reference internal" href="#id233">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-dewkio">AT+DEWKIO</a><ul>
<li><a class="reference internal" href="#id234">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-slwktimer">AT+SLWKTIMER</a><ul>
<li><a class="reference internal" href="#id235">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-get-ap-dtim">AT+GET_AP_DTIM</a><ul>
<li><a class="reference internal" href="#id236">Query command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-get-twt-supported">AT+GET_TWT_SUPPORTED</a><ul>
<li><a class="reference internal" href="#id237">Query Command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-pwr-clear">AT+PWR_CLEAR</a><ul>
<li><a class="reference internal" href="#id238">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-pwr-get">AT+PWR_GET</a><ul>
<li><a class="reference internal" href="#id239">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-slwkdtim">AT+SLWKDTIM</a><ul>
<li><a class="reference internal" href="#id240">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-slcldtim">AT+SLCLDTIM</a><ul>
<li><a class="reference internal" href="#id241">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-twt-param">AT+TWT_PARAM</a><ul>
<li><a class="reference internal" href="#id242">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-twt-sleep">AT+TWT_SLEEP</a><ul>
<li><a class="reference internal" href="#id243">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-twt-teardown">AT+TWT_TEARDOWN</a><ul>
<li><a class="reference internal" href="#id244">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-twt-status">AT+TWT_STATUS</a><ul>
<li><a class="reference internal" href="#id245">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-lp-interval-get">AT+LP_INTERVAL_GET</a><ul>
<li><a class="reference internal" href="#id246">Query Command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-start-keepalive">AT+START_KEEPALIVE</a><ul>
<li><a class="reference internal" href="#id247">Set command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-stop-keepalive">AT+STOP_KEEPALIVE</a><ul>
<li><a class="reference internal" href="#id248">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-get-clock">AT+GET_CLOCK</a><ul>
<li><a class="reference internal" href="#id249">Execute command</a></li>
</ul>
</li>
<li><a class="reference internal" href="#at-set-clock">AT+SET_CLOCK</a><ul>
<li><a class="reference internal" href="#id250">Execute command</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#set-up-secure-communication">Set up secure communication</a><ul>
<li><a class="reference internal" href="#embed-certificates-with-romfs">Embed certificates with ROMFS</a></li>
<li><a class="reference internal" href="#configure-mqtt-services-with-tls-authentication">Configure MQTT services with TLS authentication</a></li>
<li><a class="reference internal" href="#verify-mqtt-tls-connectivity-between-st67w611m1-devices-and-hivemq-brokers">Verify MQTT TLS connectivity between ST67W611M1 devices and HiveMQ brokers</a><ul>
<li><a class="reference internal" href="#verification-steps-for-the-serverless-version">Verification steps for the serverless version</a></li>
<li><a class="reference internal" href="#verification-steps-for-the-starter-version">Verification steps for the starter version</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">ST67W611M1 AT Commands</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Introduction</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h1>
<p>This document introduces the AT command set and how to use it. The command set includes: basic AT commands, Wi-Fi<sup>®</sup> function AT commands, TCP/IP toolbox AT commands, and Bluetooth<sup>®</sup> LE-related AT commands.</p>
<section id="at-command-types">
<h2>AT command types<a class="headerlink" href="#at-command-types" title="Link to this heading"></a></h2>
<p>AT commands are divided into three types</p>
<ul class="simple">
<li><p><strong>Query command</strong></p>
<ul>
<li><p>Format: <code class="docutils literal notranslate"><span class="pre">AT+&lt;x&gt;?</span></code></p></li>
<li><p>Description: Retrieves the current value of a parameter.</p></li>
</ul>
</li>
<li><p><strong>Set command</strong></p>
<ul>
<li><p>Format: <code class="docutils literal notranslate"><span class="pre">AT+&lt;x&gt;=&lt;···&gt;</span></code></p></li>
<li><p>Description: Sets user-defined parameters to specified values.</p></li>
</ul>
</li>
<li><p><strong>Execute command</strong></p>
<ul>
<li><p>Format: <code class="docutils literal notranslate"><span class="pre">AT+&lt;x&gt;</span></code></p></li>
<li><p>Description: Executes the function associated with a variable parameter, enforcing immutability within the module.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Not every AT command has all three types mentioned above.</p></li>
<li><p>Currently, only strings and integers are supported as input parameters in AT commands.</p></li>
<li><p>Angle brackets <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">&gt;</span></code> designate parameters that cannot be omitted.</p></li>
<li><p>Square brackets <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code> designate optional parameters that can be omitted. The default value of the parameter will be used instead when you omit it.</p></li>
<li><p>If the parameter you want to omit is followed by another parameter, you must use a comma to indicate it. For example: <code class="docutils literal notranslate"><span class="pre">AT+CWJAP=&quot;ssid&quot;,&quot;password&quot;,,1</span></code>.</p></li>
<li><p>String values need to be enclosed in double quotation marks, such as: <code class="docutils literal notranslate"><span class="pre">AT+CWSAP=&quot;AP-NAME&quot;,&quot;12345678&quot;</span></code>.</p></li>
<li><p>Each AT command shouldn’t exceed 256 bytes in length.</p></li>
<li><p>AT commands end with a new line (CR-LF), so the serial tool should be set to New Line Mode.</p></li>
<li><p>The parameter storage in AT commands is implemented using the EasyFlash library.</p></li>
</ul>
</div>
</section>
<section id="at-message-types">
<h2>AT message types<a class="headerlink" href="#at-message-types" title="Link to this heading"></a></h2>
<p>Two types of AT messages are returned from the AT command port: responses and reports.</p>
<section id="at-response-messages">
<h3>AT response messages<a class="headerlink" href="#at-response-messages" title="Link to this heading"></a></h3>
<p>Each AT command input returns response messages to inform the sender of the result of the AT command. The final message in a response will always be either ‘OK’ or ‘ERROR’.</p>
<table class="docutils align-center" id="id251" style="width: 100%">
<caption><span class="caption-text">AT Response Messages</span><a class="headerlink" href="#id251" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Message</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>OK</strong></p></td>
<td><p>AT command processed successfully and returned OK</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ERROR</strong></p></td>
<td><p>AT command error or an error occurred during execution</p></td>
</tr>
<tr class="row-even"><td><p><strong>SEND OK</strong></p></td>
<td><p>Data has been sent to the protocol stack</p></td>
</tr>
<tr class="row-odd"><td><p><strong>SEND FAIL</strong></p></td>
<td><p>An error occurred while sending the data to the protocol stack</p></td>
</tr>
<tr class="row-even"><td><p><strong>SEND CANCELLED</strong></p></td>
<td><p>Cancel sending data in Wi-Fi normal transmission mode</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+&lt;Command Name&gt;:``…``</strong></p></td>
<td><p>Provides detailed results of the AT command processing to the sender</p></td>
</tr>
</tbody>
</table>
</section>
<section id="at-message-reports">
<h3>AT message reports<a class="headerlink" href="#at-message-reports" title="Link to this heading"></a></h3>
<p>AT will report important state changes or messages in the system.</p>
<table class="docutils align-center" id="id252" style="width: 100%">
<caption><span class="caption-text">AT Message Reports</span><a class="headerlink" href="#id252" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 40.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Message</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>ready</strong></p></td>
<td><p>The AT firmware is ready</p></td>
</tr>
<tr class="row-odd"><td><p><strong>busy p…</strong></p></td>
<td><p>Busy processing. The system is handling the previous command and can’t
accept new input</p></td>
</tr>
<tr class="row-even"><td><p><strong>ERR CODE:&lt;0x%08x&gt;</strong></p></td>
<td><p>Error code for different commands</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CW:CONNECTING</strong></p></td>
<td><p>Wi-Fi station interface is connecting to an AP</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CW:CONNECTED</strong></p></td>
<td><p>Wi-Fi station interface has connected to an AP</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CW:ERROR,&lt;reason_code&gt;</strong></p></td>
<td><p>Wi-Fi station interface connection to AP failed
(&lt;reason_code&gt;: optional failure reason)</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CW:GOTIP</strong></p></td>
<td><p>Wi-Fi station interface has obtained the IPv4 address</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CW:DISCONNECTED</strong></p></td>
<td><p>Wi-Fi station interface has disconnected from an AP</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CW:STA_CONNECTED &lt;sta_mac&gt;</strong></p></td>
<td><p>A station has connected to the Wi-Fi softAP interface of AT
(&lt;sta_mac&gt;: MAC address)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CW:STA_DISCONNECTED &lt;sta_mac&gt;</strong></p></td>
<td><p>A station has disconnected from the Wi-Fi softAP interface of AT
(&lt;sta_mac&gt;: MAC address)</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CW:DIST_STA_IP &lt;sta_mac&gt;,</strong>
<strong>&lt;sta_ip&gt;</strong></p></td>
<td><p>The Wi-Fi softAP interface of AT assigns an IP address to the station
(&lt;sta_mac&gt;: MAC address, &lt;sta_ip&gt;: IP address)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CWLAP:&lt;ecn&gt;,&lt;ssid&gt;,&lt;rssi&gt;,</strong>
<strong>&lt;mac&gt;,&lt;channel&gt;,&lt;freq_offset&gt;,</strong>
<strong>&lt;freqcal_val&gt;,&lt;pairwise_cipher&gt;,</strong>
<strong>&lt;group_cipher&gt;,&lt;bgn&gt;,&lt;wps&gt;</strong></p></td>
<td><p>Wi-Fi scan beacon information of nearby access points</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CW:SCAN_DONE</strong></p></td>
<td><p>Wi-Fi scan completed</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CWSTATE:&lt;state&gt;,”&lt;ssid&gt;”</strong></p></td>
<td><p>Wi-Fi state change (&lt;state&gt;: 0=idle, 1=connecting, 2=connected,
3=disconnected, 4=error; &lt;ssid&gt;: SSID string)</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CWJAP:”&lt;ssid&gt;”,”&lt;bssid&gt;”,</strong>
<strong>&lt;channel&gt;,&lt;rssi&gt;,&lt;authmode&gt;</strong></p></td>
<td><p>Wi-Fi join AP result (&lt;ssid&gt;: SSID, &lt;bssid&gt;: MAC, &lt;channel&gt;, &lt;rssi&gt;,
&lt;authmode&gt;)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CWRECONNCFG:&lt;interval&gt;,</strong>
<strong>&lt;repeat&gt;</strong></p></td>
<td><p>Wi-Fi reconnect configuration (&lt;interval&gt;: seconds, &lt;repeat&gt;: count)</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CWLAPOPT:&lt;show_hidden&gt;,&lt;max&gt;,</strong>
<strong>&lt;min&gt;,&lt;sort&gt;,&lt;filter&gt;</strong></p></td>
<td><p>Wi-Fi scan options</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CWSAP:”&lt;ssid&gt;”,”&lt;pwd&gt;”,</strong>
<strong>&lt;channel&gt;,&lt;authmode&gt;,&lt;maxconn&gt;,</strong>
<strong>&lt;hidden&gt;</strong></p></td>
<td><p>SoftAP configuration</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CWLIF:&lt;ip&gt;,&lt;mac&gt;</strong></p></td>
<td><p>List of stations connected to the SoftAP</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CWDHCP:&lt;state&gt;</strong></p></td>
<td><p>DHCP state</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CWDHCPS:&lt;lease_time&gt;,</strong>
<strong>&lt;start_ip&gt;,&lt;stop_ip&gt;</strong></p></td>
<td><p>DHCP server configuration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CWAUTOCONN:&lt;state&gt;</strong></p></td>
<td><p>Autoconnect state</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPSTAMAC:”&lt;mac&gt;”</strong></p></td>
<td><p>Station MAC address</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPAPMAC:”&lt;mac&gt;”</strong></p></td>
<td><p>SoftAP MAC address</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPSTA:&lt;item&gt;:”&lt;value&gt;”</strong></p></td>
<td><p>Station IP/gateway/netmask/IPv6</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPAP:&lt;item&gt;:”&lt;value&gt;”</strong></p></td>
<td><p>SoftAP IP/gateway/netmask/IPv6</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CWAPPROTO:&lt;proto&gt;</strong></p></td>
<td><p>SoftAP protocol</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CWSTAPROTO:&lt;proto&gt;</strong></p></td>
<td><p>Station protocol</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CWHOSTNAME:&lt;hostname&gt;</strong></p></td>
<td><p>Host name</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CWCOUNTRY:&lt;policy&gt;,”&lt;country&gt;”</strong></p></td>
<td><p>Country configuration</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CWEVT:&lt;enable&gt;</strong></p></td>
<td><p>Wi-Fi event enable</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CWANTENABLE:&lt;dyn&gt;,&lt;stat&gt;,</strong>
<strong>&lt;pin&gt;</strong></p></td>
<td><p>Antenna configuration</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CWANT:&lt;ant&gt;</strong></p></td>
<td><p>Current antenna</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CWANTNUM:&lt;num&gt;</strong></p></td>
<td><p>Antenna count</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CWNETMODE:&lt;mode&gt;</strong></p></td>
<td><p>Network mode</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIP[:&lt;conn_id&gt;],CONNECTED</strong></p></td>
<td><p>A network connection of which ID is &lt;conn_id&gt; is established
(ID=0 by default)</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIP[:&lt;conn_id&gt;],DISCONNECTED</strong></p></td>
<td><p>A network connection of which ID is &lt;conn_id&gt; ends (ID=0 by default)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+LINK_CONN:&lt;status_type&gt;,</strong>
<strong>&lt;link_id&gt;,&lt;ip_type&gt;,</strong>
<strong>&lt;terminal_type&gt;,&lt;remote_ip&gt;,</strong>
<strong>&lt;remote_port&gt;,&lt;local_port&gt;</strong></p></td>
<td><p>Detailed connection info for TCP/UDP/SSL</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPSTATUS:&lt;link_id&gt;,”&lt;type&gt;”,</strong>
<strong>“&lt;remote_ip&gt;”,&lt;remote_port&gt;,</strong>
<strong>&lt;local_port&gt;,&lt;terminal_type&gt;</strong></p></td>
<td><p>Connection status</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPSTART:&lt;link_id&gt;,”&lt;type&gt;”,</strong>
<strong>“&lt;remote_ip&gt;”,&lt;remote_port&gt;,</strong>
<strong>&lt;local_port&gt;,&lt;terminal_type&gt;</strong></p></td>
<td><p>Start connection</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPERROR:&lt;link_id&gt;,</strong>
<strong>&lt;error_code&gt;</strong></p></td>
<td><p>Network connection error</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPRECV:&lt;link_id&gt;,&lt;length&gt;</strong></p></td>
<td><p>Data received in passive mode</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPSEND:&lt;link_id&gt;,&lt;length&gt;</strong></p></td>
<td><p>Data sent in passive mode</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPSENDL:&lt;sent_length&gt;,</strong>
<strong>&lt;recv_length&gt;</strong></p></td>
<td><p>Data send progress in passthrough mode</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPSENDLCFG:&lt;report_size&gt;,</strong>
<strong>&lt;transmit_size&gt;</strong></p></td>
<td><p>Passthrough send config</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPDINFO:&lt;true|false&gt;</strong></p></td>
<td><p>Data info mode</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPEVT:&lt;enable&gt;</strong></p></td>
<td><p>Network event enable</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPMUX:&lt;mode&gt;</strong></p></td>
<td><p>Multiplex mode</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPRECVMODE:&lt;mode&gt;</strong></p></td>
<td><p>Passive receive mode</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPRECVBUF:&lt;size&gt;</strong></p></td>
<td><p>Passive receive buffer size</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPRECVLEN:&lt;link_id&gt;,&lt;size&gt;</strong></p></td>
<td><p>Passive receive data length</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPSERVER:&lt;enable&gt;,&lt;port&gt;,</strong>
<strong>“&lt;type&gt;”,&lt;ca_enable&gt;,</strong>
<strong>&lt;keepalive&gt;</strong></p></td>
<td><p>Server config</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPSERVERMAXCONN:&lt;maxconn&gt;</strong></p></td>
<td><p>Maximum server connections</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPSSLCSNI[:&lt;link_id&gt;],&lt;sni&gt;</strong></p></td>
<td><p>SSL SNI configuration</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPSSLCPSK[:&lt;link_id&gt;],</strong>
<strong>“&lt;psk&gt;”,”&lt;hint&gt;”</strong></p></td>
<td><p>SSL PSK configuration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPSTO:&lt;timeout&gt;</strong></p></td>
<td><p>Server timeout</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPSNTPCFG:&lt;enable&gt;,</strong>
<strong>&lt;timezone&gt;,”&lt;server1&gt;”,</strong>
<strong>“&lt;server2&gt;”,”&lt;server3&gt;”</strong></p></td>
<td><p>SNTP configuration</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPSNTPTIME:&lt;time&gt;</strong></p></td>
<td><p>SNTP time</p></td>
</tr>
<tr class="row-even"><td><p><strong>+CIPSNTPINTV:&lt;interval&gt;</strong></p></td>
<td><p>SNTP interval</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+CIPRECONNINTV:&lt;interval&gt;</strong></p></td>
<td><p>Reconnect interval</p></td>
</tr>
<tr class="row-even"><td><p><strong>+PING:&lt;time&gt;ms|TIMEOUT</strong></p></td>
<td><p>Ping result</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+GET_CLOCK:&lt;source&gt;</strong></p></td>
<td><p>Clock source</p></td>
</tr>
<tr class="row-even"><td><p><strong>+TWT:ACTIVE:&lt;s&gt;,&lt;t&gt;,&lt;e&gt;,</strong>
<strong>&lt;n&gt;,&lt;m&gt;,&lt;type&gt;</strong></p></td>
<td><p>TWT active information</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+TWT:INACTIVE</strong></p></td>
<td><p>TWT inactive</p></td>
</tr>
<tr class="row-even"><td><p><strong>+SYSRAM:&lt;free&gt;,&lt;lwip&gt;</strong></p></td>
<td><p>System RAM information</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+SYSMSG:&lt;byte&gt;</strong></p></td>
<td><p>System message configuration</p></td>
</tr>
<tr class="row-even"><td><p><strong>+SYSTIMESTAMP:&lt;timestamp&gt;</strong></p></td>
<td><p>System timestamp</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+SYSLOG:&lt;enable&gt;</strong></p></td>
<td><p>System log enable</p></td>
</tr>
<tr class="row-even"><td><p><strong>+SYSSTORE:&lt;enable&gt;</strong></p></td>
<td><p>System store enable</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+TEMP:&lt;temp&gt;</strong></p></td>
<td><p>Temperature</p></td>
</tr>
<tr class="row-even"><td><p><strong>+IOIN=&lt;pin&gt;:&lt;value&gt;</strong></p></td>
<td><p>IO input value</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+PART:&lt;idx&gt;,&lt;type&gt;,”&lt;name&gt;”,</strong>
<strong>&lt;addr&gt;,&lt;size&gt;,&lt;used&gt;,&lt;total&gt;</strong></p></td>
<td><p>Partition information</p></td>
</tr>
<tr class="row-even"><td><p><strong>+OTASTART:&lt;flag&gt;</strong></p></td>
<td><p>OTA start</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+FS:READ,&lt;size&gt;,&lt;data&gt;</strong></p></td>
<td><p>File read</p></td>
</tr>
<tr class="row-even"><td><p><strong>+FS:SIZE,&lt;size&gt;</strong></p></td>
<td><p>File size</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+FS:LIST</strong></p></td>
<td><p>File list</p></td>
</tr>
<tr class="row-even"><td><p><strong>+GMACSLOT[0-2]:&lt;mac&gt;</strong></p></td>
<td><p>MAC slot information</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+VBAT:&lt;vbat_mv&gt;</strong></p></td>
<td><p>Battery voltage</p></td>
</tr>
<tr class="row-even"><td><p><strong>+IPD [&lt;link_id&gt;,]&lt;length&gt;</strong>
<strong>[,”&lt;remote_ip&gt;”,&lt;remote_port&gt;]</strong>
<strong>[,&lt;data&gt;]</strong></p></td>
<td><p>Data received from the network. Format depends on AT+CIPMUX,
AT+CIPRECVTYPE, AT+CIPDINFO (see note below)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+MQTT:CONNECTED,&lt;linkid&gt;</strong></p></td>
<td><p>MQTT has connected to Brokers</p></td>
</tr>
<tr class="row-even"><td><p><strong>+MQTT:DISCONNECTED,&lt;linkid&gt;</strong></p></td>
<td><p>MQTT has been disconnected from Brokers</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+MQTT:SUBRECV,&lt;linkid&gt;,</strong>
<strong>&lt;topic_length&gt;,&lt;data_length&gt;,</strong>
<strong>“&lt;topic&gt;”,&lt;data&gt;</strong></p></td>
<td><p>MQTT message received on subscribed topic</p></td>
</tr>
<tr class="row-even"><td><p><strong>+MQTTUSERCFG:&lt;linkid&gt;,</strong>
<strong>&lt;scheme&gt;,”&lt;client_id&gt;”,</strong>
<strong>“&lt;username&gt;”,”&lt;password&gt;”,</strong>
<strong>“&lt;lwt_topic&gt;”,”&lt;lwt_msg&gt;”,</strong>
<strong>“&lt;lwt_qos&gt;”</strong></p></td>
<td><p>MQTT user config</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+MQTTCLIENTID:&lt;linkid&gt;,</strong>
<strong>“&lt;client_id&gt;”</strong></p></td>
<td><p>MQTT client ID</p></td>
</tr>
<tr class="row-even"><td><p><strong>+MQTTUSERNAME:&lt;linkid&gt;,</strong>
<strong>“&lt;username&gt;”</strong></p></td>
<td><p>MQTT username</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+MQTTPASSWORD:&lt;linkid&gt;,</strong>
<strong>“&lt;password&gt;”</strong></p></td>
<td><p>MQTT password</p></td>
</tr>
<tr class="row-even"><td><p><strong>+MQTTCONNCFG:&lt;linkid&gt;,</strong>
<strong>&lt;keepalive&gt;,&lt;clean_session&gt;,</strong>
<strong>“&lt;will_topic&gt;”,”&lt;will_msg&gt;”,</strong>
<strong>&lt;will_qos&gt;,&lt;will_retain&gt;</strong></p></td>
<td><p>MQTT connection config</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+MQTTSUB:&lt;linkid&gt;,&lt;msg_id&gt;,</strong>
<strong>&lt;topic&gt;,&lt;qos&gt;</strong></p></td>
<td><p>MQTT subscribe</p></td>
</tr>
<tr class="row-even"><td><p><strong>+MQTTSUB:ALREADY_SUBSCRIBE</strong></p></td>
<td><p>Already subscribed</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+MQTTUNSUB:NO_UNSUBSCRIBE</strong></p></td>
<td><p>No unsubscribe</p></td>
</tr>
<tr class="row-even"><td><p><strong>+MQTTSNI:&lt;linkid&gt;,&lt;sni&gt;</strong></p></td>
<td><p>MQTT SNI</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Data in passthrough mode</strong></p></td>
<td><p>In passthrough mode, data has been received from the network or Bluetooth</p></td>
</tr>
<tr class="row-even"><td><p><strong>SEND CANCELLED</strong></p></td>
<td><p>Cancel sending data in Wi-Fi normal transmission mode</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLE:CONNECTED:&lt;idx&gt;,</strong>
<strong>“&lt;addr&gt;”,&lt;conn_role&gt;</strong></p></td>
<td><p>A Bluetooth LE connection established (&lt;idx&gt;: connection index,
&lt;addr&gt;: MAC address, &lt;conn_role&gt;: connection role (0: master, 1: slave))</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLE:DISCONNECTED:&lt;idx&gt;,</strong>
<strong>“&lt;addr&gt;”,&lt;conn_role&gt;</strong></p></td>
<td><p>A Bluetooth LE connection ends</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLE:CONNPARAM:&lt;idx&gt;,</strong>
<strong>&lt;interval&gt;,&lt;latency&gt;,</strong>
<strong>&lt;timeout&gt;,&lt;min_ce&gt;,&lt;max_ce&gt;</strong></p></td>
<td><p>Bluetooth LE connection parameters update</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLE:SCAN:&lt;addr&gt;,&lt;rssi&gt;,</strong>
<strong>&lt;adv_data&gt;,&lt;scan_rsp_data&gt;,</strong>
<strong>&lt;addr_type&gt;</strong></p></td>
<td><p>Bluetooth LE scan information of nearby devices</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLE:DATALENUPDATED:&lt;idx&gt;,</strong>
<strong>&lt;tx_octets&gt;,&lt;tx_time&gt;,</strong>
<strong>&lt;rx_octets&gt;,&lt;rx_time&gt;</strong></p></td>
<td><p>Bluetooth LE data length updated</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLE:PASSKEYDISPLAY:</strong>
<strong>&lt;passkey&gt;</strong></p></td>
<td><p>Bluetooth pairing passkey display</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLE:PASSKEYCONFIRM:&lt;addr&gt;</strong>
<strong>PASSKEY:&lt;passkey&gt;</strong></p></td>
<td><p>Bluetooth pairing passkey confirm (&lt;addr&gt;: MAC address,
&lt;passkey&gt;: 6-digit passkey)</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLE:PASSKEYENTRY:&lt;addr&gt;</strong></p></td>
<td><p>Bluetooth pairing passkey entry (&lt;addr&gt;: MAC address)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLE:PAIRCANNELED:&lt;addr&gt;</strong></p></td>
<td><p>Bluetooth pairing canceled (&lt;addr&gt;: MAC address)</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLE:PAIRINGCONFIRM:&lt;addr&gt;</strong></p></td>
<td><p>Bluetooth pairing confirm (&lt;addr&gt;: MAC address)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLE:PAIRINGCOMPLETED:</strong>
<strong>&lt;bonded&gt; BTADDR: &lt;addr&gt;</strong>
<strong>LTK: &lt;ltk&gt;</strong></p></td>
<td><p>Bluetooth pairing completed (&lt;bonded&gt;: Bonded/Paired, &lt;addr&gt;: MAC address,
&lt;ltk&gt;: LTK)</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLE:PAIRINGFAILED:&lt;addr&gt;</strong></p></td>
<td><p>Bluetooth pairing failed (&lt;addr&gt;: MAC address)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLESECGETLTKLIST:BONDADDR</strong>
<strong>&lt;addr&gt;LTK:&lt;ltk&gt;</strong></p></td>
<td><p>Bluetooth LTK list (&lt;addr&gt;: MAC address, &lt;ltk&gt;: LTK)</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLE:GATTWRITE:&lt;idx&gt;,</strong>
<strong>&lt;srv_idx&gt;,&lt;char_idx&gt;,</strong>
<strong>&lt;len&gt;,&lt;data&gt;</strong></p></td>
<td><p>Bluetooth GATT write (&lt;idx&gt;: connection index, &lt;srv_idx&gt;: service index,
&lt;char_idx&gt;: characteristic index, &lt;len&gt;: length, &lt;data&gt;: data )</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLE:GATTREAD:&lt;idx&gt;,</strong>
<strong>&lt;srv_idx&gt;,&lt;char_idx&gt;,&lt;len&gt;</strong></p></td>
<td><p>Bluetooth GATT read (&lt;idx&gt;: connection index, &lt;srv_idx&gt;: service index,
&lt;char_idx&gt;: characteristic index, &lt;len&gt;: length)</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLE:INDICATION:&lt;status&gt;,</strong>
<strong>&lt;srv_idx&gt;,&lt;char_idx&gt;</strong></p></td>
<td><p>Bluetooth indication (&lt;status&gt;: 0=disable, 1=enable, 2=ack, &lt;srv_idx&gt;,
&lt;char_idx&gt;)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLE:NOTIFICATION:&lt;status&gt;,</strong>
<strong>&lt;srv_idx&gt;,&lt;char_idx&gt;</strong></p></td>
<td><p>Bluetooth notification (&lt;status&gt;: 0=disable, 1=enable, &lt;srv_idx&gt;,
&lt;char_idx&gt;)</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLE:NOTIDATA:&lt;idx&gt;,</strong>
<strong>&lt;srv_idx&gt;,&lt;char_idx&gt;,</strong>
<strong>&lt;len&gt;,&lt;data&gt;</strong></p></td>
<td><p>Bluetooth notification data (&lt;idx&gt;: connection index, &lt;srv_idx&gt;: service
index, &lt;char_idx&gt;: characteristic index, &lt;len&gt;: data_length , &lt;data&gt;: data)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLE:SRV:&lt;idx&gt;,&lt;srv_idx&gt;,</strong>
<strong>&lt;uuid&gt;,&lt;type&gt;,&lt;start_handle&gt;,</strong>
<strong>&lt;end_handle&gt;</strong></p></td>
<td><p>Bluetooth service info</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLE:SRVCHAR:&lt;idx&gt;,</strong>
<strong>&lt;srv_idx&gt;,&lt;char_idx&gt;,&lt;uuid&gt;,</strong>
<strong>&lt;props&gt;,&lt;handle&gt;,&lt;value_handle&gt;</strong></p></td>
<td><p>Bluetooth characteristic info</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLE:MTUSIZE:&lt;idx&gt;,&lt;mtu&gt;</strong></p></td>
<td><p>Bluetooth MTU size</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLE:IAS:&lt;hex&gt;</strong></p></td>
<td><p>Bluetooth Immediate Alert Service</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLEINIT:&lt;role&gt;</strong></p></td>
<td><p>Bluetooth init role</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLEADDR:”&lt;addr&gt;”</strong></p></td>
<td><p>Bluetooth address</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLENAME:&lt;name&gt;</strong></p></td>
<td><p>Bluetooth name</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLESCANPARAM:&lt;interval&gt;,</strong>
<strong>&lt;window&gt;,&lt;type&gt;,</strong>
<strong>&lt;own_addr_type&gt;,</strong>
<strong>&lt;filter_policy&gt;</strong></p></td>
<td><p>Bluetooth scan params</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLEADVPARAM:&lt;interval_min&gt;,</strong>
<strong>&lt;interval_max&gt;,&lt;type&gt;,</strong>
<strong>&lt;own_addr_type&gt;</strong></p></td>
<td><p>Bluetooth adv params</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLECONN:&lt;idx&gt;,”&lt;addr&gt;”</strong></p></td>
<td><p>Bluetooth connection</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLECONNPARAM:&lt;idx&gt;,</strong>
<strong>&lt;interval&gt;,&lt;latency&gt;,</strong>
<strong>&lt;timeout&gt;,&lt;min_ce&gt;,&lt;max_ce&gt;</strong></p></td>
<td><p>Bluetooth connection params</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLEGATTSSRV:&lt;idx&gt;,</strong>
<strong>“&lt;uuid&gt;”,&lt;type&gt;,&lt;uuid_type&gt;</strong></p></td>
<td><p>Bluetooth GATT server service</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLEGATTSCHAR:&lt;idx&gt;,</strong>
<strong>&lt;srv_idx&gt;,”&lt;uuid&gt;”,&lt;prop&gt;,</strong>
<strong>&lt;perm&gt;,&lt;uuidtype&gt;</strong></p></td>
<td><p>Bluetooth GATT server char</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLETXPWR:&lt;pwr&gt;</strong></p></td>
<td><p>Bluetooth TX power</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+BLESECPARAM:&lt;param&gt;</strong></p></td>
<td><p>Bluetooth security param</p></td>
</tr>
<tr class="row-even"><td><p><strong>+BLEBASLEVEL:&lt;level&gt;</strong></p></td>
<td><p>Bluetooth battery level</p></td>
</tr>
<tr class="row-odd"><td><p><strong>+QUITT</strong></p></td>
<td><p>AT quits from the Wi-Fi passthrough mode</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Format: <code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;length&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;data&gt;</span></code></p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">AT+CIPMUX=0</span></code>, <code class="docutils literal notranslate"><span class="pre">AT+CIPRECVTYPE=0</span></code>, and <code class="docutils literal notranslate"><span class="pre">AT+CIPDINFO=1</span></code>, the output format is:
<code class="docutils literal notranslate"><span class="pre">+IPD:&lt;length&gt;,&quot;&lt;remote_ip&gt;&quot;,&lt;remote_port&gt;,&lt;data&gt;</span></code></p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">AT+CIPMUX=1</span></code>, <code class="docutils literal notranslate"><span class="pre">AT+CIPRECVTYPE=&lt;link_id&gt;,0</span></code>, and <code class="docutils literal notranslate"><span class="pre">AT+CIPDINFO=1</span></code>, the output format is:
<code class="docutils literal notranslate"><span class="pre">+IPD:&lt;link_id&gt;,&lt;length&gt;,&quot;&lt;remote_ip&gt;&quot;,&lt;remote_port&gt;,&lt;data&gt;</span></code></p></li>
<li><p>Field descriptions:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">link_id</span></code>: Connection ID</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">length</span></code>: Length of the data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remote_ip</span></code>: Remote IP address</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remote_port</span></code>: Remote port number</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code>: Actual data content</p></li>
</ul>
</li>
<li><p>For SSL connections in passive receive mode (<code class="docutils literal notranslate"><span class="pre">AT+CIPRECVTYPE=1</span></code>), the <code class="docutils literal notranslate"><span class="pre">length</span></code> returned by the AT command may not match the actual readable SSL data length.
This is because the AT command prioritizes the readable data length at the SSL layer.
If the SSL layer has no readable data (for example, length is 0), the AT command will return the readable data length from the socket layer instead.</p></li>
</ul>
</div>
</section>
</section>
</section>
<section id="basic-at-commands">
<h1>Basic AT commands<a class="headerlink" href="#basic-at-commands" title="Link to this heading"></a></h1>
<table class="docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#at">AT</a></p></td>
<td><p>Test AT startup</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-gmr">AT+GMR</a></p></td>
<td><p>View version information</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cmd">AT+CMD?</a></p></td>
<td><p>List all AT commands and types supported in current firmware</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-rst">AT+RST</a></p></td>
<td><p>Restart the module</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-restore">AT+RESTORE</a></p></td>
<td><p>Reset</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ate">ATE</a></p></td>
<td><p>Configure AT command echoing</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-sysram">AT+SYSRAM?</a></p></td>
<td><p>Query current remaining heap size and lwip remaining heap size</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-sysmsg">AT+SYSMSG?</a></p></td>
<td><p>Query/set system prompt information</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-syslog">AT+SYSLOG?</a></p></td>
<td><p>Enable or disable the AT error code prompt</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-sysstore">AT+SYSSTORE?</a></p></td>
<td><p>Query/set parameter storage mode</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-temp">AT+TEMP?</a></p></td>
<td><p>Query the temperature of the chip</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-efuse-w">AT+EFUSE-W</a></p></td>
<td><p>eFuse write operation</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-efuse-r">AT+EFUSE-R</a></p></td>
<td><p>eFuse read operation</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-efuse-cfm">AT+EFUSE-CFM</a></p></td>
<td><p>eFuse write confirmation will write directly to eFuse</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-flash-w">AT+FLASH-W</a></p></td>
<td><p>Flash write operation</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-flash-r">AT+FLASH-R</a></p></td>
<td><p>Flash read operation</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-flash-e">AT+FLASH-E</a></p></td>
<td><p>Flash erase operation</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-iopupd">AT+IOPUPD</a></p></td>
<td><p>Initialize GPIO pins as pull-up/pull-down mode</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-ioout">AT+IOOUT</a></p></td>
<td><p>Set GPIO output high/low level</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-ioin">AT+IOIN</a></p></td>
<td><p>Query/set GPIO in the input mode</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-iorst">AT+IORST</a></p></td>
<td><p>Reset a GPIO’s analog input mode</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-part">AT+PART</a></p></td>
<td><p>Get information about the partitions</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-otastart">AT+OTASTART</a></p></td>
<td><p>Start OTA transmission</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-otasend">AT+OTASEND</a></p></td>
<td><p>Send OTA data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-otafin">AT+OTAFIN</a></p></td>
<td><p>OTA transmission completed</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-fs">AT+FS</a></p></td>
<td><p>Filesystem operations</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-gmac">AT+GMAC</a></p></td>
<td><p>Query the MAC addresses of 3 slots in eFuse</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-pn">AT+PN</a></p></td>
<td><p>Query the part number</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-vbat">AT+VBAT</a></p></td>
<td><p>Query the voltage value at the supply pin (unit: mV)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-minidump">AT+MINIDUMP</a></p></td>
<td><p>Dump minidump binary by hex</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-efuse-w-hex">AT+EFUSE-W-HEX</a></p></td>
<td><p>eFuse write operation with hexadecimal data</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-efuse-r-hex">AT+EFUSE-R-HEX</a></p></td>
<td><p>eFuse read operation with hexadecimal data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-flash-w-hex">AT+FLASH-W-HEX</a></p></td>
<td><p>Flash write operation with hexadecimal data</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-flash-r-hex">AT+FLASH-R-HEX</a></p></td>
<td><p>Flash read operation with hexadecimal data</p></td>
</tr>
</tbody>
</table>
<section id="basic-at-command-description">
<h2>Basic AT command description<a class="headerlink" href="#basic-at-command-description" title="Link to this heading"></a></h2>
<section id="at">
<h3>AT<a class="headerlink" href="#at" title="Link to this heading"></a></h3>
<p>Function: Test AT startup.</p>
<section id="execute-command">
<h4>Execute command<a class="headerlink" href="#execute-command" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-gmr">
<h3>AT+GMR<a class="headerlink" href="#at-gmr" title="Link to this heading"></a></h3>
<p>Function: View version.</p>
<section id="id1">
<h4>Execute command<a class="headerlink" href="#id1" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">GMR</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">AT</span> <span class="n">version</span> <span class="n">info</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">macsw</span> <span class="n">version</span> <span class="n">info</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">phyrf</span> <span class="n">version</span> <span class="n">info</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">bthost</span> <span class="n">version</span> <span class="n">info</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">btblecontroller</span> <span class="n">version</span> <span class="n">info</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">SDK</span> <span class="n">version</span> <span class="n">info</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nb">compile</span> <span class="n">time</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;AT version info&gt;</strong>: AT version information</p></li>
<li><p><strong>&lt;macsw version info&gt;</strong>: macsw component version information</p></li>
<li><p><strong>&lt;phyrf version info&gt;</strong>: phyrf component version information</p></li>
<li><p><strong>&lt;bthost version info&gt;</strong>: bthost component version information</p></li>
<li><p><strong>&lt;btblecontroller version info&gt;</strong>: btblecontroller component version information</p></li>
<li><p><strong>&lt;SDK version info&gt;</strong>: SDK version information</p></li>
<li><p><strong>&lt;compile time&gt;</strong>: Compile time</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">GMR</span>
<span class="n">AT</span> <span class="n">version</span><span class="p">:</span><span class="mf">1.0.0.1</span><span class="p">(</span><span class="n">Apr</span> <span class="mi">30</span> <span class="mi">2025</span> <span class="mi">11</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">03</span><span class="p">)</span>
<span class="n">component_version_macsw_1</span><span class="mf">.6.38</span>
<span class="n">lib_version_phyrf_00f7ad715</span>
<span class="n">component_version_btble_1</span><span class="mf">.8.25</span>
<span class="n">lib_version_btblecontroller_1</span><span class="mf">.6.89</span>
<span class="n">component_version_sdk_2</span><span class="mf">.0.75</span>
<span class="nb">compile</span> <span class="n">time</span><span class="p">:</span><span class="n">Apr</span> <span class="mi">30</span> <span class="mi">2025</span> <span class="mi">11</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">58</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-rst">
<h3>AT+RST<a class="headerlink" href="#at-rst" title="Link to this heading"></a></h3>
<p>Function: Restart the module.</p>
<section id="id2">
<h4>Execute command<a class="headerlink" href="#id2" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">RST</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-restore">
<h3>AT+RESTORE<a class="headerlink" href="#at-restore" title="Link to this heading"></a></h3>
<p>Function: Restore factory settings.</p>
<section id="id3">
<h4>Execute command<a class="headerlink" href="#id3" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">RESTORE</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-cmd">
<h3>AT+CMD?<a class="headerlink" href="#at-cmd" title="Link to this heading"></a></h3>
<p>Function: List all AT commands and types supported in current firmware.</p>
<section id="query-command">
<h4>Query command<a class="headerlink" href="#query-command" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CMD?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CMD</span><span class="p">:</span><span class="o">&lt;</span><span class="n">index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">AT</span> <span class="n">command</span> <span class="n">name</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">support</span> <span class="n">test</span> <span class="n">command</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">support</span> <span class="n">Query</span> <span class="n">command</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">support</span> <span class="n">Set</span> <span class="n">command</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">support</span> <span class="n">Execute</span> <span class="n">command</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;index&gt;</strong>: AT command sequence number.</p></li>
<li><p><strong>&lt;AT command name&gt;</strong>: AT command name.</p></li>
<li><p><strong>&lt;support test command&gt;</strong>: 0 means not supported, 1 means supported.</p></li>
<li><p><strong>&lt;support Query command&gt;</strong>: 0 means not supported, 1 means supported.</p></li>
<li><p><strong>&lt;support Set command&gt;</strong>: 0 means not supported, 1 means supported.</p></li>
<li><p><strong>&lt;support Execute command&gt;</strong>: 0 means not supported, 1 means supported.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CMD?
+CMD:0,\&quot;AT\&quot;,0,0,0,1
+CMD:1,\&quot;AT+RST\&quot;,0,0,0,1
+CMD:2,\&quot;AT+GMR\&quot;,0,0,0,1
+CMH:3,\&quot;AT+CMD\&quot;,0,1,0,0
+CMD:4,\&quot;ATE0\&quot;,0,0,0,1
+CMD:5,\&quot;ATE1\&quot;,0,0,0,1
+CMD:6,\&quot;AT+RESTORE\&quot;,0,0,0,1
+CMD:7,\&quot;AT+SLEEP\&quot;,0,1,1,0
OK
</pre></div>
</div>
</section>
</section>
<section id="ate">
<h3>ATE<a class="headerlink" href="#ate" title="Link to this heading"></a></h3>
<p>Function: Configure AT command echoing.</p>
<section id="id4">
<h4>Execute command<a class="headerlink" href="#id4" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATE0</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ATE1</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>ATE0</strong>: Switch echo off.</p></li>
<li><p><strong>ATE1</strong>: Switch echo on.</p></li>
</ul>
</section>
</section>
<section id="at-sysram">
<h3>AT+SYSRAM?<a class="headerlink" href="#at-sysram" title="Link to this heading"></a></h3>
<p>Function: Query current remaining heap size and lwip remaining heap size.</p>
<section id="id5">
<h4>Query command<a class="headerlink" href="#id5" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSRAM?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSRAM</span><span class="p">:</span><span class="o">&lt;</span><span class="n">remaining</span> <span class="n">RAM</span> <span class="n">size</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">lwip</span> <span class="n">heap</span> <span class="n">size</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;remaining RAM size&gt;</strong>: current system remaining heap size. Unit: byte.</p></li>
<li><p><strong>&lt;lwip heap size&gt;</strong>: current lwip remaining heap size. Unit: byte.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSRAM?
+SYSRAM:148408,84044
OK
</pre></div>
</div>
</section>
</section>
<section id="at-sysmsg">
<h3>AT+SYSMSG?<a class="headerlink" href="#at-sysmsg" title="Link to this heading"></a></h3>
<p>Function: Query/set system prompt information.</p>
<section id="id6">
<h4>Query command<a class="headerlink" href="#id6" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the current system prompt information state.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSMSG?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSMSG</span><span class="p">:</span><span class="o">&lt;</span><span class="n">state</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="set-command">
<h4>Set command<a class="headerlink" href="#set-command" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Configure system prompt information.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSMSG</span><span class="o">=&lt;</span><span class="n">state</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;state&gt;</strong>:</p>
<ul>
<li><p>Bit0: Prompt when quitting Wi-Fi passthrough mode.</p>
<ul class="simple">
<li><p>0: Print no prompt when quitting Wi-Fi passthrough mode.</p></li>
<li><p>1: Print <code class="docutils literal notranslate"><span class="pre">+QUITT</span></code> when quitting Wi-Fi passthrough mode.</p></li>
</ul>
</li>
<li><p>Bit1: Connection prompt information type.</p>
<ul class="simple">
<li><p>0: Use simple prompt information, such as <code class="docutils literal notranslate"><span class="pre">+CIP:XX,CONNECTED</span></code>.</p></li>
<li><p>1: Use detailed prompt information, such as <code class="docutils literal notranslate"><span class="pre">+LINK_CONN:status_type,link_id,ip_type,terminal_type,remote_ip,remote_port,local_port</span></code>.</p></li>
</ul>
</li>
<li><p>Bit2: Connection status prompt for Wi-Fi passthrough mode, Bluetooth LE SPP and Bluetooth SPP.</p>
<ul class="simple">
<li><p>0: Print no prompt information.</p></li>
<li><p>1: Print one of the following prompt information when Wi-Fi, socket, Bluetooth LE or Bluetooth status is changed:</p></li>
</ul>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="s2">&quot;+CIP:CONNECTED</span><span class="se">\r\n</span><span class="s2">&quot;</span> <span class="ow">or</span> <span class="n">the</span> <span class="n">message</span> <span class="n">prefixed</span> <span class="k">with</span> <span class="s2">&quot;+LINK_CONN:&quot;</span>
<span class="o">-</span> <span class="s2">&quot;+CIP:DISCONNECTED</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;+CW:CONNECTING</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;+CW:CONNECTED</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;+CW:GOTIP</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;+CW:ERROR</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;+CW:DISCONNECTED</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="s2">&quot;+CW:SCAN_DONE</span><span class="se">\r\n</span><span class="s2">&quot;</span>
<span class="o">-</span> <span class="n">the</span> <span class="n">message</span> <span class="n">prefixed</span> <span class="k">with</span> <span class="s2">&quot;+CW:STA_CONNECTED&quot;</span>
<span class="o">-</span> <span class="n">the</span> <span class="n">message</span> <span class="n">prefixed</span> <span class="k">with</span> <span class="s2">&quot;+CW:STA_DISCONNECTED&quot;</span>
<span class="o">-</span> <span class="n">the</span> <span class="n">message</span> <span class="n">prefixed</span> <span class="k">with</span> <span class="s2">&quot;+CW:DIST_STA_IP&quot;</span>
<span class="o">-</span> <span class="n">the</span> <span class="n">message</span> <span class="n">prefixed</span> <span class="k">with</span> <span class="s2">&quot;+CW:SCAN_DONE&quot;</span>
<span class="o">-</span> <span class="n">the</span> <span class="n">message</span> <span class="n">prefixed</span> <span class="k">with</span> <span class="s2">&quot;+BLECONN&quot;</span>
<span class="o">-</span> <span class="n">the</span> <span class="n">message</span> <span class="n">prefixed</span> <span class="k">with</span> <span class="s2">&quot;+BLEDISCONN&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes will be saved in the easyflash area if <code class="docutils literal notranslate"><span class="pre">AT+SYSSTORE=1</span></code>.</p></li>
<li><p>If you set Bit0 to 1, it will prompt “+QUITT” when you quit Wi-Fi passthrough mode.</p></li>
<li><p>If you set Bit1 to 1, it will impact the of command AT+CIPSTART and AT+CIPSERVER. It will supply “+LINK_CONN:status_type,link_id,ip_type,terminal_type,remote_ip,remote_port,local_port” instead of “+CIP:XX,CONNECTED”.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="nb">print</span> <span class="n">no</span> <span class="n">prompt</span> <span class="n">info</span> <span class="n">when</span> <span class="n">quitting</span> <span class="n">Wi</span><span class="o">-</span><span class="n">Fi</span> <span class="n">passthrough</span> <span class="n">mode</span>
<span class="o">//</span> <span class="nb">print</span> <span class="n">detailed</span> <span class="n">connection</span> <span class="n">prompt</span> <span class="n">info</span>
<span class="o">//</span> <span class="nb">print</span> <span class="n">no</span> <span class="n">prompt</span> <span class="n">info</span> <span class="n">when</span> <span class="n">the</span> <span class="n">connection</span> <span class="n">status</span> <span class="ow">is</span> <span class="n">changed</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SYSMSG</span><span class="o">=</span><span class="mi">2</span>
</pre></div>
</div>
</section>
</section>
<section id="at-syslog">
<h3>AT+SYSLOG?<a class="headerlink" href="#at-syslog" title="Link to this heading"></a></h3>
<p>Function: Enable or disable the AT error code prompt.</p>
<section id="id7">
<h4>Query command<a class="headerlink" href="#id7" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query whether the AT error code prompt is enabled or not.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSLOG?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSLOG</span><span class="p">:</span><span class="o">&lt;</span><span class="n">status</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id8">
<h4>Set command<a class="headerlink" href="#id8" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Enable or disable the AT error code prompt.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSLOG</span><span class="o">=&lt;</span><span class="n">status</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;status&gt;</strong>: enable or disable</p>
<ul>
<li><p>0: disable</p></li>
<li><p>1: enable</p></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">enable</span> <span class="n">AT</span> <span class="n">error</span> <span class="n">code</span> <span class="n">prompt</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SYSLOG</span><span class="o">=</span><span class="mi">1</span>

<span class="n">OK</span>
<span class="n">AT</span><span class="o">+</span><span class="n">FAKE</span>
<span class="n">ERR</span> <span class="n">CODE</span><span class="p">:</span><span class="mh">0x01090000</span>

<span class="n">ERROR</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// disable AT error code prompt
AT+SYSLOG=0

OK
AT+FAKE
// No `ERR CODE:0x01090000`

ERROR
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Error Code Format</strong>: A 32-bit hexadecimal value structured as:</p>
<ul>
<li><p><strong>Category</strong>: bits 32–24 (stationary value <cite>0x01</cite>)</p></li>
<li><p><strong>Subcategory</strong>: bits 23–16 (error type)</p></li>
<li><p><strong>Extension</strong>: bits 15–0</p></li>
</ul>
</li>
<li><p><strong>Error types</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_OK</span></code>: <code class="docutils literal notranslate"><span class="pre">0x00</span></code> — OK</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_COMMON_ERROR</span></code>: <code class="docutils literal notranslate"><span class="pre">0x01</span></code> — Reserved</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_NO_TERMINATOR</span></code>: <code class="docutils literal notranslate"><span class="pre">0x02</span></code> — Terminator character not found (<cite>rn</cite> expected)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_NO_AT</span></code>: <code class="docutils literal notranslate"><span class="pre">0x03</span></code> — Starting <cite>AT</cite> not found (or entered as <cite>at</cite>, <cite>At</cite>, or <cite>aT</cite>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_PARA_LENGTH_MISMATCH</span></code>: <code class="docutils literal notranslate"><span class="pre">0x04</span></code> — Parameter length mismatch</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_PARA_TYPE_MISMATCH</span></code>: <code class="docutils literal notranslate"><span class="pre">0x05</span></code> — Parameter type mismatch</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_PARA_NUM_MISMATCH</span></code>: <code class="docutils literal notranslate"><span class="pre">0x06</span></code> — Parameter number mismatch</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_PARA_VALUE_INVALID</span></code>: <code class="docutils literal notranslate"><span class="pre">0x07</span></code> — Parameter value is out of range</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_PARA_PARSE_FAIL</span></code>: <code class="docutils literal notranslate"><span class="pre">0x08</span></code> — Failed to parse parameter</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_UNSUPPORT_CMD</span></code>: <code class="docutils literal notranslate"><span class="pre">0x09</span></code> — Command not supported</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_CMD_EXEC_FAIL</span></code>: <code class="docutils literal notranslate"><span class="pre">0x0A</span></code> — Command execution failed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_CMD_PROCESSING</span></code>: <code class="docutils literal notranslate"><span class="pre">0x0B</span></code> — Previous command is still processing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_CMD_OP_ERROR</span></code>: <code class="docutils literal notranslate"><span class="pre">0x0C</span></code> — Command operation type error</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_NO_MEMORY</span></code>: <code class="docutils literal notranslate"><span class="pre">0x0D</span></code> — Memory allocation error</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_NO_RESOURCE</span></code>: <code class="docutils literal notranslate"><span class="pre">0x0E</span></code> — Resource allocation error</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_TIMEOUT</span></code>: <code class="docutils literal notranslate"><span class="pre">0x0F</span></code> — Operation timed out</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_NOT_ALLOWED</span></code>: <code class="docutils literal notranslate"><span class="pre">0x10</span></code> — Operation not allowed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_NOT_INIT</span></code>: <code class="docutils literal notranslate"><span class="pre">0x11</span></code> — Operation not initialized</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_IO_ERROR</span></code>: <code class="docutils literal notranslate"><span class="pre">0x12</span></code> — Device I/O error</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_OP_ADDR_ERROR</span></code>: <code class="docutils literal notranslate"><span class="pre">0x13</span></code> — Operation address error</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AT_SUB_HANDLE_INVALID</span></code>: <code class="docutils literal notranslate"><span class="pre">0x14</span></code> — Invalid handle for operation</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="at-sysstore">
<h3>AT+SYSSTORE?<a class="headerlink" href="#at-sysstore" title="Link to this heading"></a></h3>
<p>Function: Query/set parameter storage mode.</p>
<section id="id9">
<h4>Query command<a class="headerlink" href="#id9" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the AT parameter storage mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+SYSSTORE?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">SYSSTORE</span><span class="p">:</span><span class="o">&lt;</span><span class="n">store_mode</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id10">
<h4>Set command<a class="headerlink" href="#id10" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSSTORE</span><span class="o">=&lt;</span><span class="n">store_mode</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;store_mode&gt;</strong>:</p>
<ul>
<li><p>0: command configuration isn’t stored into flash.</p></li>
<li><p>1: command configuration is stored into flash. (Default)</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This command affects Set commands only. Query commands are always fetched from RAM.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SYSSTORE</span><span class="o">=</span><span class="mi">0</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">1</span>  <span class="o">//</span> <span class="n">Not</span> <span class="n">stored</span> <span class="n">into</span> <span class="n">flash</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span><span class="s2">&quot;1234567890&quot;</span> <span class="o">//</span> <span class="n">Not</span> <span class="n">stored</span> <span class="n">into</span> <span class="n">flash</span>

<span class="n">AT</span><span class="o">+</span><span class="n">SYSSTORE</span><span class="o">=</span><span class="mi">1</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">3</span>  <span class="o">//</span> <span class="n">Stored</span> <span class="n">into</span> <span class="n">flash</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span><span class="s2">&quot;1234567890&quot;</span> <span class="o">//</span> <span class="n">Stored</span> <span class="n">into</span> <span class="n">flash</span>
</pre></div>
</div>
</section>
</section>
<section id="at-temp">
<h3>AT+TEMP?<a class="headerlink" href="#at-temp" title="Link to this heading"></a></h3>
<p>Function: Query the temperature of the chip.</p>
<section id="id11">
<h4>Query command<a class="headerlink" href="#id11" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the AT parameter storage mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+TEMP?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">TEMP</span><span class="p">:</span><span class="o">&lt;</span><span class="n">temperature</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;temperature&gt;</strong>: The temperature of the chip (Unit:°C).</p></li>
</ul>
</section>
</section>
<section id="at-efuse-w">
<h3>AT+EFUSE-W<a class="headerlink" href="#at-efuse-w" title="Link to this heading"></a></h3>
<p>Function: eFuse write operation. The data will be written into the eFuse after the write confirmation operation is performed.</p>
<section id="id12">
<h4>Set command<a class="headerlink" href="#id12" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">W</span><span class="o">=&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addr</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>This response indicates that AT is ready for receiving serial data. You should enter the data and when the data length reaches the <code class="docutils literal notranslate"><span class="pre">&lt;nbytes&gt;</span></code> value, the transmission of data starts.</p>
<p>If the connection can’t be established or is disrupted during data transmission, the system returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p>If the data has been successfully sent to the protocol stack (It doesn’t mean that the data has been sent to the opposite end), the system returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;nbytes&gt;</strong>: The number of bytes to be written needs to be aligned to 4 bytes. Maximum: 8192 bytes.</p></li>
<li><p><strong>&lt;addr&gt;</strong>: The eFuse address, specified as a string.</p></li>
</ul>
</section>
</section>
<section id="at-efuse-r">
<h3>AT+EFUSE-R<a class="headerlink" href="#at-efuse-r" title="Link to this heading"></a></h3>
<p>Function: eFuse read operation.</p>
<section id="id13">
<h4>Set command<a class="headerlink" href="#id13" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Read the content of the eFuse at the specified address.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="o">=&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addr</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">reload</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="p">:</span><span class="o">&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,[</span><span class="n">data</span><span class="p">]</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Among these parameters, ‘nbytes’ and ‘addr’ are mandatory inputs, while others are optional.</p></li>
<li><p>The number of bytes read needs to be aligned to 4 bytes, up to a maximum length of 8192 bytes.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="s2">&quot;0x1c&quot;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="p">:</span><span class="o">&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,[</span><span class="n">data</span><span class="p">]</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;nbytes&gt;</strong>: The number of bytes to be read.</p></li>
<li><p><strong>&lt;addr&gt;</strong>: This is the address of eFuse, it needs to be filled in as a string.</p></li>
<li><p><strong>&lt;reload&gt;</strong>: The read operation reload from the eFuse address.</p>
<ul>
<li><p>0: Indicates no reloading, the read data may be from the eFuse backup area.</p></li>
<li><p>1: Indicates reloading.</p></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">read</span> <span class="n">eFuse</span> <span class="n">cmd</span>
<span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="s2">&quot;0x1c&quot;</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="p">:</span><span class="mi">1234</span>
<span class="n">OK</span>


<span class="o">//</span> <span class="n">write</span> <span class="n">eFuse</span> <span class="n">cmd</span>
<span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">W</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="s2">&quot;0x1c&quot;</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="n">OK</span>

<span class="o">//</span> <span class="n">write</span> <span class="n">data</span>
<span class="n">aaaa</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="n">SEND</span> <span class="n">OK</span>

<span class="o">//</span> <span class="n">read</span> <span class="n">eFuse</span> <span class="n">cmd</span>
<span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="s2">&quot;0x1c&quot;</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="n">aaaa</span>
<span class="n">OK</span>

<span class="o">//</span> <span class="n">read</span> <span class="n">eFuse</span> <span class="n">cmd</span>
<span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="s2">&quot;0x1c&quot;</span><span class="p">,</span><span class="mi">1</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="p">:</span><span class="mi">0000</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-efuse-cfm">
<h3>AT+EFUSE-CFM<a class="headerlink" href="#at-efuse-cfm" title="Link to this heading"></a></h3>
<p>Function: eFuse write confirmation operation.</p>
<section id="id14">
<h4>Set command<a class="headerlink" href="#id14" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>eFuse write confirmation will write directly to eFuse.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">CFM</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">write</span> <span class="n">eFuse</span> <span class="n">cmd</span>
<span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">W</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="s2">&quot;0x1c&quot;</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="n">OK</span>

<span class="o">//</span> <span class="n">write</span> <span class="n">data</span>
<span class="n">aaaa</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="n">SEND</span> <span class="n">OK</span>

<span class="o">//</span> <span class="n">write</span> <span class="n">eFuse</span> <span class="n">confirmation</span> <span class="n">cmd</span>
<span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">CFM</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="n">OK</span>

<span class="o">//</span> <span class="n">read</span> <span class="n">eFuse</span> <span class="n">cmd</span>
<span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="s2">&quot;0x1c&quot;</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="p">:</span><span class="n">aaaa</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-flash-w">
<h3>AT+FLASH-W<a class="headerlink" href="#at-flash-w" title="Link to this heading"></a></h3>
<p>Function: Flash write operation.</p>
<section id="id15">
<h4>Set command<a class="headerlink" href="#id15" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">W</span><span class="o">=&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addr</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>This response indicates that AT is ready for receiving serial data. You should enter the data, and when the data length reaches the <code class="docutils literal notranslate"><span class="pre">&lt;nbytes&gt;</span></code> value, the transmission of data starts.</p>
<p>If the connection can’t be established or is disrupted during data transmission, the system returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p>If the data has been successfully sent to the protocol stack (It doesn’t mean that the data has been sent to the opposite end), the system returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;nbytes&gt;</strong>: The number of bytes to be written. Maximum: 8192 bytes.</p></li>
<li><p><strong>&lt;addr&gt;</strong>: This is the address of Flash, it needs to be filled in as a string.</p></li>
</ul>
</section>
</section>
<section id="at-flash-r">
<h3>AT+FLASH-R<a class="headerlink" href="#at-flash-r" title="Link to this heading"></a></h3>
<p>Function: Flash read operation.</p>
<section id="id16">
<h4>Set command<a class="headerlink" href="#id16" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Read the content of the Flash at the specified address.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">R</span><span class="o">=&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addr</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">R</span><span class="p">:[</span><span class="n">data</span><span class="p">]</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">flash</span> <span class="n">read</span> <span class="n">cmd</span>
<span class="n">AT</span><span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">R</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="s2">&quot;0x210000&quot;</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">R</span><span class="p">:</span><span class="n">ffff</span>
<span class="n">OK</span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;nbytes&gt;</strong>: The number of bytes to be read.</p></li>
<li><p><strong>&lt;addr&gt;</strong>: This is the address of Flash, it needs to be filled in as a string.</p></li>
</ul>
</section>
</section>
<section id="at-flash-e">
<h3>AT+FLASH-E<a class="headerlink" href="#at-flash-e" title="Link to this heading"></a></h3>
<p>Function: Flash erase operation.</p>
<section id="id17">
<h4>Set command<a class="headerlink" href="#id17" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Erase the content of the Flash at the specified address.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">E</span><span class="o">=&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addr</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">flash</span> <span class="n">erase</span> <span class="n">cmd</span>
<span class="n">AT</span><span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">E</span><span class="o">=</span><span class="mi">4096</span><span class="p">,</span><span class="s2">&quot;0x210000&quot;</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="n">OK</span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;nbytes&gt;</strong>: The number of bytes to be erased.</p></li>
<li><p><strong>&lt;addr&gt;</strong>: This is the address of Flash, it needs to be filled in as a string.</p></li>
</ul>
</section>
</section>
<section id="at-iopupd">
<h3>AT+IOPUPD<a class="headerlink" href="#at-iopupd" title="Link to this heading"></a></h3>
<p>Function: Initialize GPIO pins as pull-up/pull-down mode.</p>
<section id="id18">
<h4>Set command<a class="headerlink" href="#id18" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">IOPUPD</span><span class="o">=&lt;</span><span class="n">pin</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">state</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Initialize</span> <span class="n">GPIO</span> <span class="n">cmd</span>
<span class="n">AT</span><span class="o">+</span><span class="n">IOPUPD</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="mi">1</span>

<span class="o">//</span><span class="n">Response</span>
<span class="n">OK</span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;pin&gt;</strong>: The pin numbers for ST67W611M1.</p></li>
<li><p><strong>&lt;state&gt;</strong>: Requires initialization as pull-up, pull-down or float.</p>
<ul>
<li><p>0: float.</p></li>
<li><p>1: Pull-up.</p></li>
<li><p>2: Pull-down.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="at-ioout">
<h3>AT+IOOUT<a class="headerlink" href="#at-ioout" title="Link to this heading"></a></h3>
<p>Function: Set the GPIO output to high/low level.</p>
<section id="id19">
<h4>Set command<a class="headerlink" href="#id19" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">IOOUT</span><span class="o">=&lt;</span><span class="n">pin</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">state</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Set</span> <span class="n">GPIO</span> <span class="n">cmd</span>
<span class="n">AT</span><span class="o">+</span><span class="n">IOOUT</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="mi">1</span>

<span class="o">//</span><span class="n">Response</span>
<span class="n">OK</span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;pin&gt;</strong>: The pin numbers for ST67W611M1.</p></li>
<li><p><strong>&lt;state&gt;</strong>: The GPIO output to high/low level.</p>
<ul>
<li><p>0: low level.</p></li>
<li><p>1: high level.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="at-ioin">
<h3>AT+IOIN<a class="headerlink" href="#at-ioin" title="Link to this heading"></a></h3>
<p>Function: Query/set the GPIO input mode.</p>
<section id="id20">
<h4>Set command<a class="headerlink" href="#id20" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">IOIN</span><span class="o">=&lt;</span><span class="n">pin</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pull_state</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id21">
<h4>Query command<a class="headerlink" href="#id21" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+IOIN=&lt;pin&gt;?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">IOIN</span><span class="o">=&lt;</span><span class="n">pin</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">state</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Set GPIO input cmd
AT+IOIN=15

//Response
OK

// Query GPIO input state
AT+IOIN=15?

//Response
+IOIN=15:1
OK
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;pin&gt;</strong>: The pin numbers for ST67W611M1.</p></li>
<li><p><strong>&lt;state&gt;</strong>: Requires initialization as pull-up, pull-down or float.</p>
<ul>
<li><p>0: float.</p></li>
<li><p>1: Pull-up.</p></li>
<li><p>2: Pull-down.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="at-iorst">
<h3>AT+IORST<a class="headerlink" href="#at-iorst" title="Link to this heading"></a></h3>
<p>Function: Restore GPIO to floating input state.</p>
<section id="id22">
<h4>Set command<a class="headerlink" href="#id22" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">IORST</span><span class="o">=&lt;</span><span class="n">pin</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Reset</span> <span class="n">GPIO</span> <span class="n">cmd</span>
<span class="n">AT</span><span class="o">+</span><span class="n">IORST</span><span class="o">=</span><span class="mi">15</span>

<span class="o">//</span><span class="n">Response</span>
<span class="n">OK</span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;pin&gt;</strong>: The pin numbers for ST67W611M1.</p></li>
</ul>
</section>
</section>
<section id="at-part">
<h3>AT+PART<a class="headerlink" href="#at-part" title="Link to this heading"></a></h3>
<p>Function: Get information about the partitions.</p>
<section id="id23">
<h4>Query command<a class="headerlink" href="#id23" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+PART?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">PART</span><span class="p">:</span><span class="o">&lt;</span><span class="n">active_idx</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">age</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;name&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addr0</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addr1</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">len0</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">len1</span><span class="o">&gt;</span>

<span class="o">+</span><span class="n">PART</span><span class="p">:</span><span class="o">&lt;</span><span class="n">active_idx</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">age</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;name&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addr0</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addr1</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">len0</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">len1</span><span class="o">&gt;</span>

<span class="o">...</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Reset GPIO cmd
AT+PART?

//Response

+PART=0,0,&quot;   Boot2&quot;,0x00000000,0x00000000,57344,0

+PART=0,0,&quot;      FW&quot;,0x00010000,0x00210000,2097152,1474560

+PART=0,0,&quot;     mfg&quot;,0x00210000,0x00000000,1474560,0

+PART=0,0,&quot;   media&quot;,0x00378000,0x00000000,462848,0

+PART=0,0,&quot;     PSM&quot;,0x003e9000,0x00000000,32768,0

OK
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;active_idx&gt;</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p>0: The current active partition index is 0.</p></li>
<li><p>1: The current active partition index is 1.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;age&gt;</strong>: The number of updates for this partition. For example, when the “FW” partition is updated through OTA, the age will increase with each OTA update.</p></li>
<li><p><strong>&lt;name&gt;</strong>: The partition name.</p></li>
<li><p><strong>&lt;addr0&gt;</strong>: The address of partition index 0.</p></li>
<li><p><strong>&lt;addr1&gt;</strong>: The address of partition index 1.</p></li>
<li><p><strong>&lt;len0&gt;</strong>: The length of partition index 0.</p></li>
<li><p><strong>&lt;len1&gt;</strong>: The length of partition index 1.</p></li>
</ul>
</section>
</section>
<section id="at-otastart">
<h3>AT+OTASTART<a class="headerlink" href="#at-otastart" title="Link to this heading"></a></h3>
<p>Function: Start OTA transmission.</p>
<section id="id24">
<h4>Set command<a class="headerlink" href="#id24" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">OTASTART</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;enable&gt;</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p>0: Terminate OTA transmission.</p></li>
<li><p>1: Start OTA transmission.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p>or</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-otasend">
<h3>AT+OTASEND<a class="headerlink" href="#at-otasend" title="Link to this heading"></a></h3>
<p>Function: Send OTA data. This command will write the data to the OTA partition in real time and perform validation.</p>
<section id="id25">
<h4>Set command<a class="headerlink" href="#id25" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">OTASEND</span><span class="o">=&lt;</span><span class="n">length</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>The symbol &gt; indicates that AT is ready for receiving serial data, and you can enter the data now. When the requirement of message length determined by the parameter &lt;length&gt; is met, the transmission starts.</p>
<p>If the transmission is successful, AT returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</div>
<p>Otherwise, it returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SEND</span> <span class="n">FAIL</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;length&gt;</strong>: OTA data length. The maximum length is equal to the system allocable heap size.</p></li>
</ul>
</section>
</section>
<section id="at-otafin">
<h3>AT+OTAFIN<a class="headerlink" href="#at-otafin" title="Link to this heading"></a></h3>
<p>Function: Verify and reboot from another partition.</p>
<section id="id26">
<h4>Set command<a class="headerlink" href="#id26" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">OTAFIN</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<p>If the OTA has already written to the corresponding partition and verified the integrity successfully, and is about to reboot, return:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p>If the reboot fails, return:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-fs">
<h3>AT+FS<a class="headerlink" href="#at-fs" title="Link to this heading"></a></h3>
<p>Function: Filesystem operations.</p>
<section id="id27">
<h4>Set command<a class="headerlink" href="#id27" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">FS</span><span class="o">=&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">filename</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">offset</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;type&gt;</strong>: only LittleFS is currently supported.</p>
<blockquote>
<div><ul class="simple">
<li><p>0: LittleFS</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;operation&gt;</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p>0: delete file.</p></li>
<li><p>1: create file.</p></li>
<li><p>2: write file.</p></li>
<li><p>3: read file.</p></li>
<li><p>4: query the size of the file.</p></li>
<li><p>5: list files in a specific directory. Only root directory is currently supported.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;filename&gt;</strong>: the filename that needs to be operated on.</p></li>
<li><p><strong>&lt;offset&gt;</strong>: apply to writing and reading operations only.</p></li>
<li><p><strong>&lt;length&gt;</strong>: data length, applying to writing and reading operations only.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Query</span> <span class="n">the</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">current</span> <span class="n">directory</span> <span class="s1">&#39;.&#39;</span>
<span class="n">AT</span><span class="o">+</span><span class="n">FS</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="s2">&quot;.&quot;</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="o">+</span><span class="n">FS</span><span class="p">:</span><span class="n">LIST</span>
<span class="o">.</span>
<span class="o">..</span>
<span class="n">ca_1</span><span class="o">.</span><span class="n">crt</span>
<span class="n">ca_1</span><span class="o">.</span><span class="n">key</span>
<span class="n">ca_2</span><span class="o">.</span><span class="n">crt</span>
<span class="n">ca_2</span><span class="o">.</span><span class="n">key</span>
<span class="n">client_1</span><span class="o">.</span><span class="n">crt</span>
<span class="n">client_1</span><span class="o">.</span><span class="n">key</span>
<span class="n">client_2</span><span class="o">.</span><span class="n">crt</span>
<span class="n">client_2</span><span class="o">.</span><span class="n">key</span>
<span class="n">server_1</span><span class="o">.</span><span class="n">crt</span>
<span class="n">server_1</span><span class="o">.</span><span class="n">key</span>
<span class="n">server_2</span><span class="o">.</span><span class="n">crt</span>
<span class="n">server_2</span><span class="o">.</span><span class="n">key</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-gmac">
<h3>AT+GMAC<a class="headerlink" href="#at-gmac" title="Link to this heading"></a></h3>
<p>Function: Query the MAC addresses of 3 slots in eFuse.</p>
<section id="id28">
<h4>Query command<a class="headerlink" href="#id28" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+GMAC?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">GMACSLOT0</span><span class="p">:</span><span class="o">&lt;</span><span class="n">mac_addr</span><span class="o">&gt;</span>

<span class="o">+</span><span class="n">GMACSLOT1</span><span class="p">:</span><span class="o">&lt;</span><span class="n">mac_addr</span><span class="o">&gt;</span>

<span class="o">+</span><span class="n">GMACSLOT2</span><span class="p">:</span><span class="o">&lt;</span><span class="n">mac_addr</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;mac_addr&gt;</strong>: MAC address in eFuse.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Query the MAC addresses of 3 slots in eFuse.
AT+GMAC?

// Response
+GMACSLOT0:9c:b7:93:0c:c1:26
+GMACSLOT1:00:00:00:00:00:00
+GMACSLOT2:00:b7:00:00:00:00

OK
</pre></div>
</div>
</section>
</section>
<section id="at-pn">
<h3>AT+PN<a class="headerlink" href="#at-pn" title="Link to this heading"></a></h3>
<p>Function: Query the part number.</p>
<section id="id29">
<h4>Query command<a class="headerlink" href="#id29" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+PN?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">PN</span><span class="p">:</span><span class="o">&lt;</span><span class="n">pn_num</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;pn_num&gt;</strong>: The part number in eFuse.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+PN?

// Response
+PN:CP90-79196-2

OK
</pre></div>
</div>
</section>
</section>
<section id="at-vbat">
<h3>AT+VBAT<a class="headerlink" href="#at-vbat" title="Link to this heading"></a></h3>
<p>Function: Query the voltage value at the supply pin.</p>
<section id="id30">
<h4>Query command<a class="headerlink" href="#id30" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+VBAT?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">VBAT</span><span class="p">:</span><span class="o">&lt;</span><span class="n">vbat_val</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;vbat_val&gt;</strong>: The voltage value at the supply pin (unit: mV).</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+VBAT?

// Response
+VBAT:3326

OK
</pre></div>
</div>
</section>
</section>
<section id="at-minidump">
<h3>AT+MINIDUMP<a class="headerlink" href="#at-minidump" title="Link to this heading"></a></h3>
<p>Function: Dump minidump partition by hex, run <code class="docutils literal notranslate"><span class="pre">xxd</span> <span class="pre">-r</span> <span class="pre">-p</span> <span class="pre">hex.output</span> <span class="pre">crash.bin</span></code>, refer <code class="docutils literal notranslate"><span class="pre">examples/crash/README_v1.md</span></code> to use <code class="docutils literal notranslate"><span class="pre">crash.bin</span></code></p>
<section id="id31">
<h4>Query command<a class="headerlink" href="#id31" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MINIDUMP</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">hex</span> <span class="n">dump</span> <span class="o">......</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>None</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MINIDUMP</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="nb">hex</span> <span class="n">dump</span> <span class="o">......</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-efuse-w-hex">
<h3>AT+EFUSE-W-HEX<a class="headerlink" href="#at-efuse-w-hex" title="Link to this heading"></a></h3>
<p>Function: Write data to eFuse in hexadecimal format. The input data is a hex string, which is converted to binary and written to the specified address. Data is word-aligned (4 bytes), and confirmation (AT+EFUSE-CFM) is required after writing.</p>
<section id="id32">
<h4>Set command<a class="headerlink" href="#id32" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">W</span><span class="o">-</span><span class="n">HEX</span><span class="o">=&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,</span><span class="s2">&quot;&lt;address&gt;&quot;</span>

<span class="o">//</span> <span class="n">Followed</span> <span class="n">by</span> <span class="n">sending</span> <span class="n">the</span> <span class="nb">hex</span> <span class="n">string</span> <span class="n">data</span> <span class="p">(</span><span class="n">length</span> <span class="o">=</span> <span class="n">nbytes</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="n">Recv</span> <span class="o">&lt;</span><span class="n">X</span><span class="o">&gt;</span> <span class="nb">hex</span> <span class="n">chars</span>

<span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;nbytes&gt;</strong>:  Number of bytes to write (1 to 8192).</p></li>
<li><p><strong>&lt;address&gt;</strong>: Starting address in hexadecimal format (for example, “0x1c”).</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">W</span><span class="o">-</span><span class="n">HEX</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="s2">&quot;0x2c&quot;</span>

<span class="o">//</span> <span class="n">Send</span> <span class="nb">hex</span> <span class="n">string</span><span class="p">:</span> <span class="mi">01020304050607080910</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="n">OK</span>

<span class="n">Recv</span> <span class="mi">20</span> <span class="nb">hex</span> <span class="n">chars</span>

<span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-efuse-r-hex">
<h3>AT+EFUSE-R-HEX<a class="headerlink" href="#at-efuse-r-hex" title="Link to this heading"></a></h3>
<p>Function: Read data from eFuse in hexadecimal format. The output is the hex string representation of the read binary data.</p>
<section id="id33">
<h4>Set command<a class="headerlink" href="#id33" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="o">-</span><span class="n">HEX</span><span class="o">=&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,</span><span class="s2">&quot;&lt;address&gt;&quot;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="o">-</span><span class="n">HEX</span><span class="p">:</span><span class="o">&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="nb">hex</span> <span class="n">data</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;nbytes&gt;</strong>:  Number of bytes to read (1 to 8192).</p></li>
<li><p><strong>&lt;address&gt;</strong>: Starting address in hexadecimal format (for example, “0x1c”).</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="o">-</span><span class="n">HEX</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="s2">&quot;0x2c&quot;</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="o">+</span><span class="n">EFUSE</span><span class="o">-</span><span class="n">R</span><span class="o">-</span><span class="n">HEX</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">01020304050607080910</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-flash-w-hex">
<h3>AT+FLASH-W-HEX<a class="headerlink" href="#at-flash-w-hex" title="Link to this heading"></a></h3>
<p>Function: Write data to flash in hexadecimal format. The input data is a hex string, which is converted to binary and written to the specified address.</p>
<section id="id34">
<h4>Set command<a class="headerlink" href="#id34" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">W</span><span class="o">-</span><span class="n">HEX</span><span class="o">=&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,</span><span class="s2">&quot;&lt;address&gt;&quot;</span>

<span class="o">//</span> <span class="n">Followed</span> <span class="n">by</span> <span class="n">sending</span> <span class="n">the</span> <span class="nb">hex</span> <span class="n">string</span> <span class="n">data</span> <span class="p">(</span><span class="n">length</span> <span class="o">=</span> <span class="n">nbytes</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="n">Recv</span> <span class="o">&lt;</span><span class="n">X</span><span class="o">&gt;</span> <span class="nb">hex</span> <span class="n">chars</span>

<span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;nbytes&gt;</strong>:  Number of bytes to write (1 to 8192).</p></li>
<li><p><strong>&lt;address&gt;</strong>: Starting address in hexadecimal format (for example, “0x210000”).</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">W</span><span class="o">-</span><span class="n">HEX</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="s2">&quot;0x210000&quot;</span>

<span class="o">//</span> <span class="n">Send</span> <span class="nb">hex</span> <span class="n">string</span><span class="p">:</span> <span class="mi">01020304050607080910</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="n">OK</span>

<span class="n">Recv</span> <span class="mi">20</span> <span class="nb">hex</span> <span class="n">chars</span>

<span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-flash-r-hex">
<h3>AT+FLASH-R-HEX<a class="headerlink" href="#at-flash-r-hex" title="Link to this heading"></a></h3>
<p>Function: Read data from flash in hexadecimal format. The output is the hex string representation of the read binary data.</p>
<section id="id35">
<h4>Set command<a class="headerlink" href="#id35" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">R</span><span class="o">-</span><span class="n">HEX</span><span class="o">=&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,</span><span class="s2">&quot;&lt;address&gt;&quot;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">R</span><span class="o">-</span><span class="n">HEX</span><span class="p">:</span><span class="o">&lt;</span><span class="n">nbytes</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="nb">hex</span> <span class="n">data</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;nbytes&gt;</strong>:  Number of bytes to read (1 to 8192).</p></li>
<li><p><strong>&lt;address&gt;</strong>: Starting address in hexadecimal format (for example, “0x210000”).</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">R</span><span class="o">-</span><span class="n">HEX</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="s2">&quot;0x210000&quot;</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="o">+</span><span class="n">FLASH</span><span class="o">-</span><span class="n">R</span><span class="o">-</span><span class="n">HEX</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">01020304050607080910</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
<section id="wi-fi-at-commands">
<h1>Wi-Fi AT commands<a class="headerlink" href="#wi-fi-at-commands" title="Link to this heading"></a></h1>
<table class="docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Instruction</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#at-wifisp">AT+WIFISP</a></p></td>
<td><p>Query/set enable/disable WLAN radio</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwmode">AT+CWMODE</a></p></td>
<td><p>Set Wi-Fi mode</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cwnetmode">AT+CWNETMODE</a></p></td>
<td><p>Query device to work in NCP/RCP mode.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwstate">AT+CWSTATE</a></p></td>
<td><p>Query the Wi-Fi state and Wi-Fi information</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cwjap">AT+CWJAP</a></p></td>
<td><p>Connect to AP</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwreconncfg">AT+CWRECONNCFG</a></p></td>
<td><p>Query/set the Wi-Fi reconnecting configuration</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cwlapopt">AT+CWLAPOPT</a></p></td>
<td><p>Set AT+CWLAP command scan result attributes</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwlap">AT+CWLAP</a></p></td>
<td><p>Scan nearby AP</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cwqap">AT+CWQAP</a></p></td>
<td><p>Disconnect AP</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwsap">AT+CWSAP</a></p></td>
<td><p>Query/set the configuration of a SoftAP</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cwlif">AT+CWLIF</a></p></td>
<td><p>Obtain IP address of the station that connects to a SoftAP</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwqif">AT+CWQIF</a></p></td>
<td><p>Disconnect stations from a SoftAP</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cwdhcp">AT+CWDHCP</a></p></td>
<td><p>Enable/disable DHCP</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwdhcps">AT+CWDHCPS</a></p></td>
<td><p>Query/set the IP addresses allocated by a SoftAP DHCP server</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cwautoconn">AT+CWAUTOCONN</a></p></td>
<td><p>Set up automatic reconnection</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipstamac">AT+CIPSTAMAC</a></p></td>
<td><p>Query/set the MAC address of a station</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipapmac">AT+CIPAPMAC</a></p></td>
<td><p>Query/set the MAC address of a SoftAP</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipsta">AT+CIPSTA</a></p></td>
<td><p>Query/set the IP address of a station</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipap">AT+CIPAP</a></p></td>
<td><p>Query/set the IP address of a SoftAP</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwhostname">AT+CWHOSTNAME</a></p></td>
<td><p>Query/set the host name of a station</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cwcountry">AT+CWCOUNTRY</a></p></td>
<td><p>Query/set the Wi-Fi country code</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwmonitor">AT+CWMONITOR</a></p></td>
<td><p>Set Wi-Fi to enter monitor mode</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cwstaproto">AT+CWSTAPROTO</a></p></td>
<td><p>Query/set the 802.11 b/g/n/ax protocol standard of station mode</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwapproto">AT+CWAPPROTO</a></p></td>
<td><p>Query/set the 802.11 b/g/n/ax protocol standard of SoftAP mode</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-wps">AT+WPS</a></p></td>
<td><p>Enable the WPS function</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwantenable">AT+CWANTENABLE</a></p></td>
<td><p>Enable/disable antenna diversity function</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cwantnum">AT+CWANTNUM</a></p></td>
<td><p>Get the maximum number of antennas for the current device</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwant">AT+CWANT</a></p></td>
<td><p>Set/query the currently used antenna</p></td>
</tr>
</tbody>
</table>
<section id="wi-fi-at-command-description">
<h2>Wi-Fi AT command description<a class="headerlink" href="#wi-fi-at-command-description" title="Link to this heading"></a></h2>
<section id="at-wifisp">
<h3>AT+WIFISP<a class="headerlink" href="#at-wifisp" title="Link to this heading"></a></h3>
<p>Function: Query/set enable/disable WLAN radio.</p>
<section id="id36">
<h4>Query command<a class="headerlink" href="#id36" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the WLAN radio enablement status.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+WIFISP?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">WIFISP</span><span class="p">:</span><span class="o">&lt;</span><span class="n">enable</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id37">
<h4>Set command<a class="headerlink" href="#id37" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Enable/disable WLAN radio.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">WIFISP</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;enable&gt;</strong>:</p>
<ul>
<li><p>0: Disable WLAN radio.</p></li>
<li><p>1: Enable WLAN radio.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="at-cwmode">
<h3>AT+CWMODE<a class="headerlink" href="#at-cwmode" title="Link to this heading"></a></h3>
<p>Function: Query/set Wi-Fi mode.</p>
<section id="id38">
<h4>Query command<a class="headerlink" href="#id38" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the Wi-Fi mode of devices.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWMODE?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWMODE</span><span class="p">:</span><span class="o">&lt;</span><span class="n">mode</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id39">
<h4>Set command<a class="headerlink" href="#id39" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the Wi-Fi mode of devices.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">auto_connect</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;mode&gt;</strong>:</p>
<ul>
<li><p>0: Null mode. Wi-Fi RF will be disabled.</p></li>
<li><p>1: Station mode.</p></li>
<li><p>2: SoftAP mode.</p></li>
<li><p>3: SoftAP + Station mode.</p></li>
</ul>
</li>
<li><p><strong>&lt;auto_connect&gt;</strong>: Enable or disable automatic connection to an AP when you change the mode of the device from the SoftAP mode or null mode to the station mode. Default: 1. If you omit the parameter, the default value will be used, i.e. automatically connecting to an AP.</p>
<ul>
<li><p>0: The device won’t automatically connect to an AP.</p></li>
<li><p>1: The device will automatically connect to an AP if the configuration to connect to the AP has already been saved in flash before.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes will be saved in the easyflash area if AT+SYSSTORE=1.</p></li>
<li><p>SoftAP + Station mode requires AP and STA to be on the same channel</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cwnetmode">
<h3>AT+CWNETMODE<a class="headerlink" href="#at-cwnetmode" title="Link to this heading"></a></h3>
<p>Function: Query device working in NCP/RCP mode.</p>
<section id="id40">
<h4>Query command<a class="headerlink" href="#id40" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query whether the device is operating in NCP/RCP mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWNETMODE?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWNETMODE</span><span class="p">:</span><span class="o">&lt;</span><span class="n">netmode</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;netmode&gt;</strong>:</p>
<ul>
<li><p>0: RCP mode.</p></li>
<li><p>1: NCP mode.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>When the device is in RCP mode, all network, HTTP, and MQTT-related AT commands become invalid.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cwstate">
<h3>AT+CWSTATE<a class="headerlink" href="#at-cwstate" title="Link to this heading"></a></h3>
<p>Function: Query the Wi-Fi state and Wi-Fi information.</p>
<section id="id41">
<h4>Query command<a class="headerlink" href="#id41" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the Wi-Fi state and Wi-Fi information of devices.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWSTATE?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWSTATE</span><span class="p">:</span><span class="o">&lt;</span><span class="n">state</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;ssid&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">auth</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;state&gt;</strong>: current Wi-Fi state.</p>
<ul>
<li><p>0: station has not started any Wi-Fi connection.</p></li>
<li><p>1: station has connected to an AP, but doesn’t get an IPv4 address yet.</p></li>
<li><p>2: station has connected to an AP, and got an IPv4 address.</p></li>
<li><p>3: station is in Wi-Fi connecting or reconnecting state.</p></li>
<li><p>4: station is in Wi-Fi disconnected state.</p></li>
</ul>
</li>
<li><p><strong>&lt;&quot;ssid&quot;&gt;</strong>: the SSID of the target AP.</p></li>
<li><p><strong>&lt;mode&gt;</strong>: Wi-Fi protocol mode (bitmask value).</p>
<ul>
<li><p>A bitmask indicating supported 802.11 protocols:
-  Bit 0 (0x01): 802.11b
-  Bit 1 (0x02): 802.11g
-  Bit 2 (0x04): 802.11n (2.4GHz)
-  Bit 3 (0x08): 802.11ax (Wi-Fi 6, 2.4GHz)</p></li>
<li><p>Example: 7 (0x07) indicates support for 802.11b/g/n.</p></li>
<li><p>Default: 0 (no protocols or unknown).</p></li>
</ul>
</li>
<li><p><strong>&lt;auth&gt;</strong>: Authentication/Encryption type (ECN value).</p>
<ul>
<li><p>0: OPEN (no encryption)</p></li>
<li><p>1: WEP</p></li>
<li><p>2: WPA-PSK</p></li>
<li><p>3: WPA2-PSK</p></li>
<li><p>4: WPA/WPA2-PSK</p></li>
<li><p>5: WPA Enterprise</p></li>
<li><p>6: WPA3-SAE</p></li>
<li><p>7: WPA2-PSK/WPA3-SAE</p></li>
<li><p>8: Unknown</p></li>
<li><p>Default: 0 (OPEN) when not connected.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>When station isn’t connected to an AP, it’s recommended to use this command to query Wi-Fi information; after station is connected to an AP, it’s recommended to use AT+CWJAP to query Wi-Fi information.</p></li>
<li><p>The &lt;mode&gt; and &lt;auth&gt; parameters are derived from the connection or configuration; they may default to 0 in disconnected states or if unavailable.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cwjap">
<h3>AT+CWJAP<a class="headerlink" href="#at-cwjap" title="Link to this heading"></a></h3>
<p>Function: Connect to an AP.</p>
<section id="id42">
<h4>Query command<a class="headerlink" href="#id42" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the AP to which the station is already connected.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWJAP?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWJAP</span><span class="p">:</span><span class="o">&lt;</span><span class="n">ssid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">bssid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">channel</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">rssi</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">wep_en</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id43">
<h4>Set command<a class="headerlink" href="#id43" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Connect a station to a targeted AP.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="p">[</span><span class="o">&lt;</span><span class="n">ssid</span><span class="o">&gt;</span><span class="p">],[</span><span class="o">&lt;</span><span class="n">pwd</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">bssid</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">wep_en</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Among these parameters, ‘ssid’ and ‘pwd’ are mandatory inputs, while others are optional.</p></li>
</ul>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CW</span><span class="p">:</span><span class="n">CONNECTED</span>
<span class="o">+</span><span class="n">CW</span><span class="p">:</span><span class="n">GOTIP</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p>or</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CW</span><span class="p">:</span><span class="n">CONNECTING</span>

<span class="n">OK</span>

<span class="o">+</span><span class="n">CW</span><span class="p">:</span><span class="n">ERROR</span><span class="p">,</span><span class="o">&lt;</span><span class="n">reason_code</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>or</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWJAP</span><span class="p">:</span><span class="o">&lt;</span><span class="n">error</span> <span class="n">code</span><span class="o">&gt;</span>
<span class="n">ERROR</span>
</pre></div>
</div>
</div>
</section>
<section id="id44">
<h4>Execute command<a class="headerlink" href="#id44" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Connect a station to a targeted AP with last Wi-Fi configuration.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CW</span><span class="p">:</span><span class="n">CONNECTED</span>
<span class="o">+</span><span class="n">CW</span><span class="p">:</span><span class="n">GOTIP</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p>or</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWJAP</span><span class="p">:</span><span class="o">&lt;</span><span class="n">error</span> <span class="n">code</span><span class="o">&gt;</span>
<span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;ssid&gt;</strong>: the SSID of the target AP.</p>
<ul>
<li><p>Escape character syntax is needed if SSID or password contains special characters, such <code class="docutils literal notranslate"><span class="pre">,</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">\\</span></code>.</p></li>
</ul>
</li>
<li><p><strong>&lt;pwd&gt;</strong>: password, Maximum: 64-byte ASCII.</p></li>
<li><p><strong>&lt;bssid&gt;</strong>: the MAC address of the target AP. It can’t be omitted when multiple APs have the same SSID.</p></li>
<li><p><strong>&lt;channel&gt;</strong>: channel.</p></li>
<li><p><strong>&lt;rssi&gt;</strong>: signal strength.</p></li>
<li><p><strong>&lt;wep_en&gt;</strong>: Is the connected AP using WEP encryption?</p>
<ul>
<li><p>0: Not WEP encryption.</p></li>
<li><p>1: It’s WEP encryption.</p></li>
</ul>
</li>
<li><p><strong>&lt;error code&gt;</strong>: (for reference only)</p>
<ul>
<li><p>1: connection timeout.</p></li>
<li><p>2: wrong password.</p></li>
<li><p>3: can’t find the target AP.</p></li>
<li><p>4: connection failed.</p></li>
<li><p>others: unknown error occurred.</p></li>
</ul>
</li>
<li><p><strong>&lt;reason_code&gt;</strong>:</p>
<ul>
<li><p>1: Failure to allocate memory for transmitting an authentication frame.</p></li>
<li><p>2: Authentication process failed.</p></li>
<li><p>3: The authentication algorithm wasn’t accepted or failed.</p></li>
<li><p>4: Failure to allocate memory for transmitting an association frame.</p></li>
<li><p>5: Association process with the access point failed.</p></li>
<li><p>6: Deauthentication by the access point occurred when not connected.</p></li>
<li><p>7: Deauthentication by the access point occurred while connected.</p></li>
<li><p>8: A timeout occurred during the 4-way handshake, likely due to PSK (Pre-Shared Key) issues.</p></li>
<li><p>9: Failed to transmit a deauthentication frame during the 4-way handshake.</p></li>
<li><p>10: Failed to allocate memory for a deauthentication frame during the 4-way handshake.</p></li>
<li><p>11: Timeout waiting for authentication or association response.</p></li>
<li><p>12: No BSSID or channel found during the scan process.</p></li>
<li><p>13: Failed to create a channel context when attempting to join a network.</p></li>
<li><p>14: Failure to join a network.</p></li>
<li><p>15: Failed to add a station (STA) to the network.</p></li>
<li><p>16: Beacon loss occurred, potentially leading to disconnection.</p></li>
<li><p>17: The network security settings don’t match.</p></li>
<li><p>18: An error occurred due to an incorrect WEP key length.</p></li>
<li><p>19: User-initiated disconnection with deauthentication.</p></li>
<li><p>20: User-initiated disconnection without sending a deauthentication frame.</p></li>
<li><p>21: Disconnection occurred because the firmware failed to send a power-save null frame.</p></li>
<li><p>22: Traffic loss was detected.</p></li>
<li><p>23: Switching to a new channel failed.</p></li>
<li><p>24: Confirmation of authentication or association response failed.</p></li>
<li><p>25: Reassociation process is starting.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes will be saved in the easyflash area if AT+SYSSTORE=1.</p></li>
<li><p>This command requires Station mode to be enabled.</p></li>
<li><p>The parameter <code class="docutils literal notranslate"><span class="pre">&lt;reconn_interval&gt;</span></code> of this command is the same as <code class="docutils literal notranslate"><span class="pre">&lt;interval_second&gt;</span></code> of the command AT + CWRECONNCFG . Therefore, if you omit <code class="docutils literal notranslate"><span class="pre">&lt;reconn_interval&gt;</span></code> when running this command, the interval between Wi-Fi reconnections will use the default value 1.</p></li>
<li><p>If the <code class="docutils literal notranslate"><span class="pre">&lt;ssid&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;password&gt;</span></code> parameter are omitted, AT will use the last configuration.</p></li>
<li><p>Execute command has the same maximum timeout to Set command. The default value is 15 seconds, but you can change it by setting the parameter <code class="docutils literal notranslate"><span class="pre">&lt;jap_timeout&gt;</span></code>.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">If</span> <span class="n">the</span> <span class="n">target</span> <span class="n">AP</span><span class="s1">&#39;s SSID is &quot;abc&quot; and the password is &quot;0123456789&quot;, the command should be:</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span><span class="s2">&quot;0123456789&quot;</span>

<span class="o">//</span> <span class="n">If</span> <span class="n">the</span> <span class="n">target</span> <span class="n">AP</span><span class="s1">&#39;s SSID is &quot;ab\,c&quot; and the password is &quot;0123456789&quot;</span><span class="se">\&quot;</span><span class="s1">, the command should be:</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;ab</span><span class="se">\\</span><span class="s2">\,c&quot;</span><span class="p">,</span><span class="s2">&quot;0123456789</span><span class="se">\&quot;\\</span><span class="s2">&quot;</span>

<span class="o">//</span> <span class="n">If</span> <span class="n">multiple</span> <span class="n">APs</span> <span class="nb">all</span> <span class="n">have</span> <span class="n">the</span> <span class="n">SSID</span> <span class="n">of</span> <span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="n">the</span> <span class="n">target</span> <span class="n">AP</span> <span class="n">can</span> <span class="n">be</span> <span class="n">found</span> <span class="n">by</span> <span class="n">BSSID</span><span class="p">:</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span><span class="s2">&quot;0123456789&quot;</span><span class="p">,</span><span class="s2">&quot;ca:d7:19:d8:a6:44&quot;</span>

<span class="o">//</span> <span class="n">If</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">required</span> <span class="n">that</span> <span class="n">connect</span> <span class="n">to</span> <span class="n">a</span> <span class="n">AP</span> <span class="n">by</span> <span class="n">protected</span> <span class="n">management</span> <span class="n">frame</span><span class="p">,</span> <span class="n">the</span> <span class="n">command</span> <span class="n">should</span> <span class="n">be</span><span class="p">:</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span><span class="s2">&quot;0123456789&quot;</span><span class="p">,,,,,,,</span><span class="mi">3</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cwreconncfg">
<h3>AT+CWRECONNCFG<a class="headerlink" href="#at-cwreconncfg" title="Link to this heading"></a></h3>
<p>Function:  Query/set the Wi-Fi reconnecting configuration.</p>
<section id="id45">
<h4>Query command<a class="headerlink" href="#id45" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the configuration of Wi-Fi reconnect.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWRECONNCFG?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWRECONNCFG</span><span class="p">:</span><span class="o">&lt;</span><span class="n">interval_second</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">repeat_count</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id46">
<h4>Set command<a class="headerlink" href="#id46" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the configuration of Wi-Fi reconnect.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWRECONNCFG</span><span class="o">=&lt;</span><span class="n">interval_second</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">repeat_count</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;interval_second&gt;</strong>: the interval between Wi-Fi reconnections. Unit: second. Default: 0. Maximum: 7200.</p>
<ul>
<li><p>0: The station won’t reconnect to the AP when disconnected.</p></li>
<li><p>[1,7200]: The station will reconnect to the AP at the specified interval when disconnected.</p></li>
</ul>
</li>
<li><p><strong>&lt;repeat_count&gt;</strong>: the number of attempts the device makes to reconnect to the AP. This parameter only works when the parameter <code class="docutils literal notranslate"><span class="pre">&lt;interval_second&gt;</span></code> isn’t 0. Default: 0. Maximum: 1000.</p>
<ul>
<li><p>0: The station will always try to reconnect to AP.</p></li>
<li><p>[1,1000]: The station will attempt to reconnect to AP for the specified times.</p></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">The</span> <span class="n">station</span> <span class="n">tries</span> <span class="n">to</span> <span class="n">reconnect</span> <span class="n">to</span> <span class="n">AP</span> <span class="n">at</span> <span class="n">the</span> <span class="n">interval</span> <span class="n">of</span> <span class="n">one</span> <span class="n">second</span> <span class="k">for</span> <span class="mi">100</span> <span class="n">times</span><span class="o">.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWRECONNCFG</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span>

<span class="o">//</span> <span class="n">The</span> <span class="n">station</span> <span class="n">won</span><span class="s1">&#39;t reconnect to AP when disconnected.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWRECONNCFG</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The parameter <code class="docutils literal notranslate"><span class="pre">&lt;interval_second&gt;</span></code> of this command is the same as the parameter <code class="docutils literal notranslate"><span class="pre">[&lt;reconn_interval&gt;]</span></code> of the command AT+CWJAP.</p></li>
<li><p>This command works for passive disconnection from APs, Wi-Fi mode switch, and Wi-Fi auto connect after power on.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cwlapopt">
<h3>AT+CWLAPOPT<a class="headerlink" href="#at-cwlapopt" title="Link to this heading"></a></h3>
<p>Function:  Set the configuration for the command AT+CWLAP.</p>
<section id="id47">
<h4>Set command<a class="headerlink" href="#id47" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWLAPOPT</span><span class="o">=&lt;</span><span class="n">sort_enable</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="nb">print</span> <span class="n">mask</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">rssi</span> <span class="nb">filter</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">authmode</span> <span class="n">mask</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">max_count</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p>or</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;sort_enable&gt;</strong>: Enable/disable sorting scan results by RSSI (default sorting).</p></li>
<li><p><strong>&lt;print mask&gt;</strong>: determine whether the following parameters are shown in the result of AT+CWLAP. Default: 0x7FF. If you set them to 1, it means showing the corresponding parameters; if you set them as 0, it means NOT showing the corresponding parameters.</p>
<ul>
<li><p>bit 0: determine whether &lt;ecn&gt; will be shown.</p></li>
<li><p>bit 1: determine whether &lt;ssid&gt; will be shown.</p></li>
<li><p>bit 2: determine whether &lt;rssi&gt; will be shown.</p></li>
<li><p>bit 3: determine whether &lt;mac&gt; will be shown.</p></li>
<li><p>bit 4: determine whether &lt;channel&gt; will be shown.</p></li>
<li><p>bit 5: determine whether &lt;freq_offset&gt; will be shown.</p></li>
<li><p>bit 6: determine whether &lt;freqcal_val&gt; will be shown.</p></li>
<li><p>bit 7: determine whether &lt;pairwise_cipher&gt; will be shown.</p></li>
<li><p>bit 8: determine whether &lt;group_cipher&gt; will be shown.</p></li>
<li><p>bit 9: determine whether &lt;bgn&gt; will be shown.</p></li>
<li><p>bit 10: determine whether &lt;wps&gt; will be shown.</p></li>
</ul>
</li>
<li><p><strong>[&lt;rssi filter&gt;]</strong>: determine whether the result of the command AT+CWLAP will be filtered according to <code class="docutils literal notranslate"><span class="pre">rssi</span> <span class="pre">filter</span></code>. In other words, the result of the command will <strong>NOT</strong> show the APs whose signal strength is below <code class="docutils literal notranslate"><span class="pre">rssi</span> <span class="pre">filter</span></code>. Unit: dBm. Default: –100. Range: [–100,40].</p></li>
<li><p><strong>[&lt;authmode mask&gt;]</strong>: determine whether APs with the following authmodes are shown in the result of AT+CWLAP. Default: 0xFFFF. If you set <code class="docutils literal notranslate"><span class="pre">bit</span> <span class="pre">x</span></code> to 1, the APs with the corresponding authmode will be shown. If you set <code class="docutils literal notranslate"><span class="pre">bit</span> <span class="pre">x</span></code> to 0, the APs with the corresponding authmode won’t be shown;</p>
<ul>
<li><p>bit 0: determine whether APs with <code class="docutils literal notranslate"><span class="pre">OPEN</span></code> authmode will be shown.</p></li>
<li><p>bit 1: determine whether APs with <code class="docutils literal notranslate"><span class="pre">WEP</span></code> authmode will be shown.</p></li>
<li><p>bit 2: determine whether APs with <code class="docutils literal notranslate"><span class="pre">WPA_PSK</span></code> authmode will be shown.</p></li>
<li><p>bit 3: determine whether APs with <code class="docutils literal notranslate"><span class="pre">WPA2_PSK</span></code> authmode will be shown.</p></li>
<li><p>bit 4: determine whether APs with <code class="docutils literal notranslate"><span class="pre">WPA_WPA2_PSK</span></code> authmode will be shown.</p></li>
<li><p>bit 5: determine whether APs with <code class="docutils literal notranslate"><span class="pre">WPA2_ENTERPRISE</span></code> authmode will be shown.</p></li>
<li><p>bit 6: determine whether APs with <code class="docutils literal notranslate"><span class="pre">WPA3_PSK</span></code> authmode will be shown.</p></li>
<li><p>bit 7: determine whether AP with <code class="docutils literal notranslate"><span class="pre">WPA2_WPA3_PSK</span></code> authmode will be shown.</p></li>
</ul>
</li>
<li><p><strong>[&lt;max_count&gt;]</strong>: The maximum number of Wi-Fi networks scanned is 50 by default, meaning the CWLAP command response can include up to 50 scanned results. Range: (0,50].</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">The</span> <span class="n">first</span> <span class="n">parameter</span> <span class="ow">is</span> <span class="mi">1</span><span class="p">,</span> <span class="n">meaning</span> <span class="n">that</span> <span class="n">the</span> <span class="n">result</span> <span class="n">of</span> <span class="n">the</span> <span class="n">command</span> <span class="n">AT</span><span class="o">+</span><span class="n">CWLAP</span> <span class="n">will</span> <span class="n">be</span> <span class="n">ordered</span> <span class="n">according</span> <span class="n">to</span> <span class="n">RSSI</span><span class="p">;</span>
<span class="o">//</span> <span class="n">The</span> <span class="n">second</span> <span class="n">parameter</span> <span class="ow">is</span> <span class="mi">31</span><span class="p">,</span> <span class="n">namely</span> <span class="mh">0x1F</span><span class="p">,</span> <span class="n">meaning</span> <span class="n">that</span> <span class="n">the</span> <span class="n">corresponding</span> <span class="n">bits</span> <span class="n">of</span> <span class="o">&lt;</span><span class="nb">print</span> <span class="n">mask</span><span class="o">&gt;</span> <span class="n">are</span> <span class="nb">set</span> <span class="n">to</span> <span class="mf">1.</span> <span class="n">All</span> <span class="n">parameters</span> <span class="n">will</span> <span class="n">be</span> <span class="n">shown</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">results</span> <span class="n">of</span> <span class="n">AT</span><span class="o">+</span><span class="n">CWLAP</span><span class="o">.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWLAPOPT</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">31</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWLAP</span>

<span class="o">//</span> <span class="n">Just</span> <span class="n">show</span> <span class="n">the</span> <span class="n">AP</span> <span class="n">which</span> <span class="n">authmode</span> <span class="ow">is</span> <span class="n">OPEN</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWLAPOPT</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="mi">1</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWLAP</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cwlap">
<h3>AT+CWLAP<a class="headerlink" href="#at-cwlap" title="Link to this heading"></a></h3>
<p>Function: List available APs.</p>
<section id="id48">
<h4>Set command<a class="headerlink" href="#id48" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the APs with specified parameters, such as the SSID, MAC address, or channel.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWLAP</span><span class="o">=</span><span class="p">[</span><span class="o">&lt;</span><span class="n">scan_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">ssid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">mac</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">channel</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">scan_time_min</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">scan_time_max</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="id49">
<h4>Execute command<a class="headerlink" href="#id49" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>List all available APs.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWLAP</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWLAP</span><span class="p">:</span><span class="o">&lt;</span><span class="n">ecn</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">ssid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">rssi</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">mac</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">channel</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">freq_offset</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">freqcal_val</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pairwise_cipher</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">group_cipher</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">bgn</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">wps</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;ecn&gt;</strong>: encryption method.</p>
<ul>
<li><p>0: OPEN</p></li>
<li><p>1: WEP</p></li>
<li><p>2: WPA_PSK</p></li>
<li><p>3: WPA2_PSK</p></li>
<li><p>4: WPA_WPA2_PSK</p></li>
<li><p>5: WPAx_ENTERPRISE</p></li>
<li><p>6: WPA3_PSK</p></li>
<li><p>7: WPA2_WPA3_PSK</p></li>
</ul>
</li>
<li><p><strong>&lt;scan_type&gt;</strong>: Wi-Fi scan type:</p>
<ul>
<li><p>0: active scan</p></li>
<li><p>1: passive scan</p></li>
</ul>
</li>
<li><p><strong>&lt;ssid&gt;</strong>: string parameter showing SSID of the AP.</p></li>
<li><p><strong>&lt;rssi&gt;</strong>: signal strength.</p></li>
<li><p><strong>&lt;mac&gt;</strong>: string parameter showing MAC address of the AP.</p></li>
<li><p><strong>&lt;channel&gt;</strong>: channel.</p></li>
<li><p><strong>&lt;scan_time_min&gt;</strong>: the minimum active scan time per channel. Unit: millisecond. Range [0,1500]. If the scan type is passive, this parameter is invalid.</p></li>
<li><p><strong>&lt;scan_time_max&gt;</strong>: the maximum active scan time per channel. Unit: millisecond. Range [0,1500]. If this parameter is 0, the firmware will use the default time: 120 ms for active scan; 360 ms for passive scan.</p></li>
<li><p><strong>&lt;freq_offset&gt;</strong>: frequency offset (reserved item).</p></li>
<li><p><strong>&lt;freqcal_val&gt;</strong>: frequency calibration value (reserved item).</p></li>
<li><p><strong>&lt;pairwise_cipher&gt;</strong>: pairwise cipher type.</p>
<ul>
<li><p>0: None</p></li>
<li><p>1: WEP40</p></li>
<li><p>2: WEP104</p></li>
<li><p>3: TKIP</p></li>
<li><p>4: CCMP</p></li>
<li><p>5: TKIP and CCMP</p></li>
<li><p>6: AES-CMAC-128</p></li>
<li><p>7: Unknown</p></li>
</ul>
</li>
<li><p><strong>&lt;group_cipher&gt;</strong>: group cipher type, same enumerated value to <code class="docutils literal notranslate"><span class="pre">&lt;pairwise_cipher&gt;</span></code>.</p></li>
<li><p><strong>&lt;bgn&gt;</strong>: 802.11 b/g/n. If the corresponding bit is 1, the corresponding mode is enabled; if the corresponding bit is 0, the corresponding mode is disabled.</p>
<ul>
<li><p>bit 0: bit to identify if 802.11b mode is enabled or not</p></li>
<li><p>bit 1: bit to identify if 802.11g mode is enabled or not</p></li>
<li><p>bit 2: bit to identify if 802.11n mode is enabled or not</p></li>
<li><p>bit 3: bit to identify if 802.11ax mode is enabled or not</p></li>
</ul>
</li>
<li><p><strong>&lt;wps&gt;</strong>: wps flag.</p>
<ul>
<li><p>0: WPS disabled</p></li>
<li><p>1: WPS enabled</p></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWLAP</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;Wi-Fi&quot;</span><span class="p">,</span><span class="s2">&quot;ca:d7:19:d8:a6:44&quot;</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">400</span><span class="p">,</span><span class="mi">1000</span>

<span class="o">//</span> <span class="n">Search</span> <span class="k">for</span> <span class="n">APs</span> <span class="k">with</span> <span class="n">a</span> <span class="n">specific</span> <span class="n">SSID</span><span class="p">:</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWLAP</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;Wi-Fi&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cwqap">
<h3>AT+CWQAP<a class="headerlink" href="#at-cwqap" title="Link to this heading"></a></h3>
<p>Function: Disconnect from an AP.</p>
<section id="id50">
<h4>Execute command<a class="headerlink" href="#id50" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWQAP</span><span class="o">=</span><span class="p">[</span><span class="o">&lt;</span><span class="n">restore</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWQAP</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>Optional &lt;restore&gt;</strong>: flag to erase the saved SSID and password information.</p>
<ul>
<li><p>0: don’t erase the saved SSID and password information (default).</p></li>
<li><p>1: Erase the saved SSID and password information.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="at-cwsap">
<h3>AT+CWSAP<a class="headerlink" href="#at-cwsap" title="Link to this heading"></a></h3>
<p>Function: Query/set the configuration of a SoftAP.</p>
<section id="id51">
<h4>Query command<a class="headerlink" href="#id51" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the configuration parameters of a SoftAP.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWSAP?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWSAP</span><span class="p">:</span><span class="o">&lt;</span><span class="n">ssid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pwd</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">channel</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">ecn</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="nb">max</span> <span class="n">conn</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">ssid</span> <span class="n">hidden</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id52">
<h4>Set command<a class="headerlink" href="#id52" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the configuration of a SoftAP.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWSAP</span><span class="o">=&lt;</span><span class="n">ssid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pwd</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">chl</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">ecn</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="nb">max</span> <span class="n">conn</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">ssid</span> <span class="n">hidden</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;ssid&gt;</strong>: string parameter showing SSID of the AP.</p></li>
<li><p><strong>&lt;pwd&gt;</strong>: string parameter showing the password. Length: 8 ~ 64 bytes ASCII.</p></li>
<li><p><strong>&lt;channel&gt;</strong>: channel ID.</p></li>
<li><p><strong>&lt;ecn&gt;</strong>: encryption method; WEP isn’t supported.</p>
<ul>
<li><p>0: OPEN</p></li>
<li><p>2: WPA_PSK</p></li>
<li><p>3: WPA2_PSK</p></li>
<li><p>4: WPA3_PSK</p></li>
</ul>
</li>
<li><p><strong>[&lt;max conn&gt;]</strong>: maximum number of stations that SoftAP can connect. Range: [1,4].</p></li>
<li><p><strong>[&lt;ssid hidden&gt;]</strong>:</p>
<ul>
<li><p>0: broadcasting SSID (default).</p></li>
<li><p>1: not broadcasting SSID.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This command works only when AT+CWMODE=2 or AT+CWMODE=3.</p></li>
<li><p>The configuration changes will be saved in the easyflash area if AT+SYSSTORE=1.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cwlif">
<h3>AT+CWLIF<a class="headerlink" href="#at-cwlif" title="Link to this heading"></a></h3>
<p>Function: Obtain IP address of the station that connects to a SoftAP.</p>
<section id="id53">
<h4>Execute command<a class="headerlink" href="#id53" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWLIF</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWLIF</span><span class="p">:</span><span class="o">&lt;</span><span class="n">ip</span> <span class="n">addr</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">mac</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;ip addr&gt;</strong>: IP address of the station that connects to the SoftAP.</p></li>
<li><p><strong>&lt;mac&gt;</strong>: MAC address of the station that connects to the SoftAP.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This command can’t get a static IP. It works only when DHCP of both the SoftAP and the connected station are enabled.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cwqif">
<h3>AT+CWQIF<a class="headerlink" href="#at-cwqif" title="Link to this heading"></a></h3>
<p>Function: Disconnect stations from a SoftAP.</p>
<section id="id54">
<h4>Execute command<a class="headerlink" href="#id54" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Disconnect all stations that are connected to the SoftAP.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWQIF</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id55">
<h4>Set command<a class="headerlink" href="#id55" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Disconnect a specific station from the SoftAP.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWQIF</span><span class="o">=&lt;</span><span class="n">mac</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWQIF</span><span class="o">=</span><span class="s2">&quot;18:b9:05:ed:59:cc&quot;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;mac&gt;</strong>: MAC address of the station to disconnect.</p></li>
</ul>
</section>
</section>
<section id="at-cwdhcp">
<h3>AT+CWDHCP<a class="headerlink" href="#at-cwdhcp" title="Link to this heading"></a></h3>
<p>Function: Enable/disable DHCP.</p>
<section id="id56">
<h4>Query command<a class="headerlink" href="#id56" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWDHCP?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">state</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</section>
<section id="id57">
<h4>Set command<a class="headerlink" href="#id57" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Enable/disable DHCP.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWDHCP</span><span class="o">=&lt;</span><span class="n">operate</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">mode</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;operate&gt;</strong>:</p>
<ul>
<li><p>0: disable</p></li>
<li><p>1: enable</p></li>
</ul>
</li>
<li><p><strong>&lt;mode&gt;</strong>:</p>
<ul>
<li><p>Bit0: Station DHCP</p></li>
<li><p>Bit1: SoftAP DHCP</p></li>
</ul>
</li>
<li><p><strong>&lt;state&gt;</strong>: the status of DHCP</p>
<ul>
<li><p>Bit0:</p>
<ul>
<li><p>0: Station DHCP is disabled.</p></li>
<li><p>1: Station DHCP is enabled.</p></li>
</ul>
</li>
<li><p>Bit1:</p>
<ul>
<li><p>0: SoftAP DHCP is disabled.</p></li>
<li><p>1: SoftAP DHCP is enabled.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes will be saved in the easyflash area if AT+SYSSTORE=1.</p></li>
<li><p>This Set command correlates with the commands that set static IP, such as AT+CIPSTA and AT+CIPAP:</p></li>
<li><p>If DHCP is enabled, static IP address will be disabled;</p></li>
<li><p>If static IP address is enabled, DHCP will be disabled;</p></li>
<li><p>The last configuration overwrites the previous configuration.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Enable</span> <span class="n">Station</span> <span class="n">DHCP</span><span class="o">.</span> <span class="n">If</span> <span class="n">the</span> <span class="n">last</span> <span class="n">DHCP</span> <span class="n">mode</span> <span class="ow">is</span> <span class="mi">2</span><span class="p">,</span> <span class="n">the</span> <span class="n">current</span> <span class="n">DHCP</span> <span class="n">mode</span> <span class="n">will</span> <span class="n">be</span> <span class="mf">3.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWDHCP</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span>

<span class="o">//</span> <span class="n">Disable</span> <span class="n">SoftAP</span> <span class="n">DHCP</span><span class="o">.</span> <span class="n">If</span> <span class="n">the</span> <span class="n">last</span> <span class="n">DHCP</span> <span class="n">mode</span> <span class="ow">is</span> <span class="mi">3</span><span class="p">,</span> <span class="n">the</span> <span class="n">current</span> <span class="n">DHCP</span> <span class="n">mode</span> <span class="n">will</span> <span class="n">be</span> <span class="mf">1.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWDHCP</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cwdhcps">
<h3>AT+CWDHCPS<a class="headerlink" href="#at-cwdhcps" title="Link to this heading"></a></h3>
<p>Function:Query/set the IP addresses allocated by a SoftAP DHCP server.</p>
<section id="id58">
<h4>Query command<a class="headerlink" href="#id58" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWDHCPS?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWDHCPS</span><span class="o">=&lt;</span><span class="n">lease</span> <span class="n">time</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">start</span> <span class="n">IP</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">end</span> <span class="n">IP</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id59">
<h4>Set command<a class="headerlink" href="#id59" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the IP address range of the SoftAP DHCP server.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWDHCPS</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">lease</span> <span class="n">time</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">start</span> <span class="n">IP</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">end</span> <span class="n">IP</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;enable&gt;</strong>:</p>
<ul>
<li><p>1: Enable DHCP server settings. The parameters below have to be set.</p></li>
<li><p>0: Disable DHCP server settings and use the default IP address range.</p></li>
</ul>
</li>
<li><p><strong>&lt;lease time&gt;</strong>: lease time. Unit: minute. Range [1,2880].</p></li>
<li><p><strong>&lt;start IP&gt;</strong>: start IP address of the IP address range that can be obtained from SoftAP DHCP server.</p></li>
<li><p><strong>&lt;end IP&gt;</strong>: end IP address of the IP address range that can be obtained from SoftAP DHCP server.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes will be saved in the easyflash area if AT+SYSSTORE=1.</p></li>
<li><p>This AT command works only when both SoftAP and DHCP server are enabled for devices.</p></li>
<li><p>The IP address should be in the same network segment as the IP address of SoftAP.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWDHCPS</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;192.168.4.10&quot;</span><span class="p">,</span><span class="s2">&quot;192.168.4.15&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CWDHCPS</span><span class="o">=</span><span class="mi">0</span> <span class="o">//</span> <span class="n">Disable</span> <span class="n">the</span> <span class="n">settings</span> <span class="ow">and</span> <span class="n">use</span> <span class="n">the</span> <span class="n">default</span> <span class="n">IP</span> <span class="n">address</span> <span class="nb">range</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cwautoconn">
<h3>AT+CWAUTOCONN<a class="headerlink" href="#at-cwautoconn" title="Link to this heading"></a></h3>
<p>Function: Automatically connect to an AP when powered on</p>
<section id="id60">
<h4>Set command<a class="headerlink" href="#id60" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWAUTOCONN</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;enable&gt;</strong>:</p>
<ul>
<li><p>1: Enable automatic connection to an AP when powered on. (Default)</p></li>
<li><p>0: Disable automatic connection to an AP when powered on.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes will be saved in the easyflash area.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWAUTOCONN</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cipstamac">
<h3>AT+CIPSTAMAC<a class="headerlink" href="#at-cipstamac" title="Link to this heading"></a></h3>
<p>Function: Query/set the MAC address of a ST67W611M1 station</p>
<section id="id61">
<h4>Query command<a class="headerlink" href="#id61" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the MAC address of the station.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSTAMAC?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSTAMAC</span><span class="p">:</span><span class="o">&lt;</span><span class="n">mac</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id62">
<h4>Set command<a class="headerlink" href="#id62" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the MAC address of a station.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSTAMAC</span><span class="o">=&lt;</span><span class="n">mac</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;mac&gt;</strong>: string parameter showing MAC address of a station.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes will be saved in the easyflash area if AT+SYSSTORE=1.</p></li>
<li><p>The MAC address of SoftAP is the same as Station, and when Station MAC is set, SoftAP’s MAC will also be automatically updated.</p></li>
<li><p>Bit 0 of the MAC address can’t be 1. For example, a MAC address can be “1a:…” but not “15:…”.</p></li>
<li><p>FF:FF:FF:FF:FF:FF and 00:00:00:00:00:00 are invalid MAC address and can’t be set.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSTAMAC</span><span class="o">=</span><span class="s2">&quot;1a:fe:35:98:d3:7b&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cipapmac">
<h3>AT+CIPAPMAC<a class="headerlink" href="#at-cipapmac" title="Link to this heading"></a></h3>
<p>Function: Query/set the MAC address of a SoftAP</p>
<section id="id63">
<h4>Query command<a class="headerlink" href="#id63" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the MAC address of the SoftAP.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPAPMAC?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPAPMAC</span><span class="p">:</span><span class="o">&lt;</span><span class="n">mac</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id64">
<h4>Set command<a class="headerlink" href="#id64" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the MAC address of the SoftAP.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPAPMAC</span><span class="o">=&lt;</span><span class="n">mac</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;mac&gt;</strong>: string parameter showing MAC address of the SoftAP.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes will be saved in the easyflash area if AT+SYSSTORE=1.</p></li>
<li><p>The MAC address of SoftAP is the same as Station, and when SoftAP MAC is set, Station’s MAC will also be automatically updated.</p></li>
<li><p>Bit 0 of the MAC address can’t be 1. For example, a MAC address can be “18:…” but not “15:…”.</p></li>
<li><p>FF:FF:FF:FF:FF:FF and 00:00:00:00:00:00 are invalid MAC and can’t be set.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPAPMAC</span><span class="o">=</span><span class="s2">&quot;18:fe:35:98:d3:7b&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cipsta">
<h3>AT+CIPSTA<a class="headerlink" href="#at-cipsta" title="Link to this heading"></a></h3>
<p>Function: Query/set the IP address of a station</p>
<section id="id65">
<h4>Query command<a class="headerlink" href="#id65" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the IP address of the station.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSTA?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSTA</span><span class="p">:</span><span class="n">ip</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;ip&quot;</span><span class="o">&gt;</span>
<span class="o">+</span><span class="n">CIPSTA</span><span class="p">:</span><span class="n">gateway</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;gateway&quot;</span><span class="o">&gt;</span>
<span class="o">+</span><span class="n">CIPSTA</span><span class="p">:</span><span class="n">netmask</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;netmask&quot;</span><span class="o">&gt;</span>
<span class="o">+</span><span class="n">CIPSTA</span><span class="p">:</span><span class="n">ip6ll</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;ipv6 addr&quot;</span><span class="o">&gt;</span>
<span class="o">+</span><span class="n">CIPSTA</span><span class="p">:</span><span class="n">ip6gl</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;ipv6 addr&quot;</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id66">
<h4>Set command<a class="headerlink" href="#id66" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the IPv4 address of the station (static IPv6 not supported).</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSTA</span><span class="o">=&lt;</span><span class="s2">&quot;ip&quot;</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;gateway&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;netmask&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;dns&quot;</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;&quot;ip&quot;&gt;</strong>: string parameter showing the IPv4 address of the station.</p></li>
<li><p><strong>&lt;&quot;gateway&quot;&gt;</strong>: gateway.</p></li>
<li><p><strong>&lt;&quot;netmask&quot;&gt;</strong>: netmask.</p></li>
<li><p><strong>&lt;”ipv6 addr”&gt;</strong>: string parameter showing the IPv6 address of the ST67W611M1 station.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>For the Query command, only when the station is connected to an AP or the static IP address is configured can its IP address be queried.</p></li>
<li><p>The configuration changes will be saved in the easyflash area if AT+SYSSTORE=1.</p></li>
<li><p>The Set command correlates with the commands that set DHCP, such as AT+CWDHCP.</p></li>
<li><p>If static IP address is enabled, DHCP will be disabled;</p></li>
<li><p>If DHCP is enabled, static IP address will be disabled;</p></li>
<li><p>The last configuration overwrites the previous configuration.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSTA</span><span class="o">=</span><span class="s2">&quot;192.168.6.100&quot;</span><span class="p">,</span><span class="s2">&quot;192.168.6.1&quot;</span><span class="p">,</span><span class="s2">&quot;255.255.255.0&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cipap">
<h3>AT+CIPAP<a class="headerlink" href="#at-cipap" title="Link to this heading"></a></h3>
<p>Function: Query/set the IP address of a SoftAP</p>
<section id="id67">
<h4>Query command<a class="headerlink" href="#id67" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the IP address of the SoftAP.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPAP?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPAP</span><span class="p">:</span><span class="n">ip</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;ip&quot;</span><span class="o">&gt;</span>
<span class="o">+</span><span class="n">CIPAP</span><span class="p">:</span><span class="n">gateway</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;gateway&quot;</span><span class="o">&gt;</span>
<span class="o">+</span><span class="n">CIPAP</span><span class="p">:</span><span class="n">netmask</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;netmask&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id68">
<h4>Set command<a class="headerlink" href="#id68" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the IPv4 address of the SoftAP.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPAP</span><span class="o">=&lt;</span><span class="s2">&quot;ip&quot;</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;gateway&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;netmask&quot;</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;”ip&quot;&gt;</strong>: string parameter showing the IPv4 address of the SoftAP.</p></li>
<li><p><strong>&lt;&quot;gateway&quot;&gt;</strong>: gateway.</p></li>
<li><p><strong>&lt;&quot;netmask&quot;&gt;</strong>: netmask.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes will be saved in the easyflash area if AT+SYSSTORE=1.</p></li>
<li><p>The Set command correlates with the commands that set DHCP, such as AT+CWDHCP.</p></li>
<li><p>If static IP address is enabled, DHCP will be disabled;</p></li>
<li><p>If DHCP is enabled, static IP address will be disabled;</p></li>
<li><p>The last configuration overwrites the previous configuration.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPAP</span><span class="o">=</span><span class="s2">&quot;192.168.5.1&quot;</span><span class="p">,</span><span class="s2">&quot;192.168.5.1&quot;</span><span class="p">,</span><span class="s2">&quot;255.255.255.0&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cwhostname">
<h3>AT+CWHOSTNAME<a class="headerlink" href="#at-cwhostname" title="Link to this heading"></a></h3>
<p>Function: Query/set the host name of a station</p>
<section id="id69">
<h4>Query command<a class="headerlink" href="#id69" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the host name of station.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWHOSTNAME?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWHOSTNAME</span><span class="p">:</span><span class="o">&lt;</span><span class="n">hostname</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id70">
<h4>Set command<a class="headerlink" href="#id70" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the host name of station.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWHOSTNAME</span><span class="o">=&lt;</span><span class="n">hostname</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p>If the station mode isn’t enabled, the command will return:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;hostname&gt;</strong>: the host name of the station. Maximum length: 32 bytes.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes aren’t saved in the flash.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">3</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWHOSTNAME</span><span class="o">=</span><span class="s2">&quot;my_test&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cwcountry">
<h3>AT+CWCOUNTRY<a class="headerlink" href="#at-cwcountry" title="Link to this heading"></a></h3>
<p>Function: Query/set the Wi-Fi country code</p>
<section id="id71">
<h4>Query command<a class="headerlink" href="#id71" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query Wi-Fi country code information.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWCOUNTRY?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWCOUNTRY</span><span class="p">:</span><span class="o">&lt;</span><span class="n">country_policy</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">country_code</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id72">
<h4>Set command<a class="headerlink" href="#id72" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the Wi-Fi country code information.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span> <span class="n">CWCOUNTRY</span><span class="o">=&lt;</span><span class="n">country_policy</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">country_code</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;country_policy&gt;</strong>:</p>
<ul>
<li><p>0: will change the county code to be the same as the AP that the device is connected to.</p></li>
<li><p>1: the country code won’t change, always be the one set by command.</p></li>
</ul>
</li>
<li><p><strong>&lt;country_code&gt;</strong>: country code. Maximum length: 3 characters.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes aren’t saved in the flash.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">3</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWCOUNTRY</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;CN&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cwmonitor">
<h3>AT+CWMONITOR<a class="headerlink" href="#at-cwmonitor" title="Link to this heading"></a></h3>
<p>Function: Set Wi-Fi to enter monitor mode</p>
<section id="id73">
<h4>Set command<a class="headerlink" href="#id73" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set Wi-Fi to enter monitor mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span> <span class="n">CWMONITOR</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">channel</span><span class="o">&gt;</span><span class="p">,[</span><span class="o">&lt;</span><span class="n">min_pkg_len</span><span class="o">&gt;</span><span class="p">],[</span><span class="o">&lt;</span><span class="n">max_pkg_len</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">+</span><span class="n">CWMONITOR</span><span class="p">,</span><span class="o">&lt;</span><span class="n">channel</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pkg_len</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">data</span><span class="o">&gt;</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;enable&gt;</strong>:</p>
<ul>
<li><p>0: Stop the monitor mode.</p></li>
<li><p>1: Set Wi-Fi to enter monitor mode.</p></li>
</ul>
</li>
<li><p><strong>&lt;channel&gt;</strong>: Channels that need to be monitored.</p></li>
<li><p><strong>&lt;min_pkg_len&gt;</strong>: Filter and receive packets with the minimum length.</p></li>
<li><p><strong>&lt;max_pkg_len&gt;</strong>: Filter and receive packets with the maximum length.</p></li>
<li><p><strong>&lt;pkg_len&gt;</strong>: Received packet length.</p></li>
<li><p><strong>&lt;data&gt;</strong>: Received raw data packet, displayed in hexadecimal format.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The monitored channel needs to be within the channel range set by the <a class="reference internal" href="#at-cwcountry">AT+CWCOUNTRY</a>.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWMONITOR</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span>

<span class="n">OK</span>

<span class="o">+</span><span class="n">CWMONITOR</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">177</span><span class="p">:</span><span class="n">xxxxxxxxxxxxxx</span>
<span class="o">...</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cwstaproto">
<h3>AT+CWSTAPROTO<a class="headerlink" href="#at-cwstaproto" title="Link to this heading"></a></h3>
<p>Function: Query/set the 802.11 b/g/n/ax protocol standard of station mode</p>
<section id="id74">
<h4>Query command<a class="headerlink" href="#id74" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the 802.11 b/g/n/ax protocol standard of station mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWSTAPROTO?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWSTAPROTO</span><span class="p">:</span><span class="o">&lt;</span><span class="n">protocol</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id75">
<h4>Set command<a class="headerlink" href="#id75" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the 802.11 b/g/n/ax protocol standard of station mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWSTAPROTO</span><span class="o">=&lt;</span><span class="n">protocol</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;protocol&gt;</strong>:</p>
<ul>
<li><p>bit0: 802.11b protocol standard.</p></li>
<li><p>bit1: 802.11g protocol standard.</p></li>
<li><p>bit2: 802.11n protocol standard.</p></li>
<li><p>bit3: 802.11ax protocol standard.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>It will only take effect on the next connection.</p></li>
<li><p>By default, PHY mode of ST67W611M1 is 802.11 b/g/n/ax mode.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWSTAPROTO</span><span class="o">=</span><span class="mi">1</span>

<span class="n">OK</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">1</span>

<span class="n">OK</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;SSID&quot;</span><span class="p">,</span><span class="s2">&quot;12345678&quot;</span>

<span class="o">...</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cwapproto">
<h3>AT+CWAPPROTO<a class="headerlink" href="#at-cwapproto" title="Link to this heading"></a></h3>
<p>Query/set the 802.11 b/g/n/ax protocol standard of softAP mode</p>
<section id="id76">
<h4>Query command<a class="headerlink" href="#id76" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the 802.11 b/g/n/ax protocol standard of softAP mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWAPPROTO?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWAPPROTO</span><span class="p">:</span><span class="o">&lt;</span><span class="n">protocol</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id77">
<h4>Set command<a class="headerlink" href="#id77" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the 802.11 b/g/n/ax protocol standard of softAP mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWAPPROTO</span><span class="o">=&lt;</span><span class="n">protocol</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;protocol&gt;</strong>:</p>
<ul>
<li><p>bit0: 802.11b protocol standard.</p></li>
<li><p>bit1: 802.11g protocol standard.</p></li>
<li><p>bit2: 802.11n protocol standard.</p></li>
<li><p>bit3: 802.11ax protocol standard.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>It will only take effect on the next connection.</p></li>
<li><p>By default, PHY mode of ST67W611M1 is 802.11 b/g/n/ax mode.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWAPPROTO</span><span class="o">=</span><span class="mi">1</span>

<span class="n">OK</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">2</span>

<span class="n">OK</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CWSAP</span><span class="o">=</span><span class="s2">&quot;AP_SSID&quot;</span><span class="p">,</span><span class="s2">&quot;12345678&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span>

<span class="o">...</span>
</pre></div>
</div>
</section>
</section>
<section id="at-wps">
<h3>AT+WPS<a class="headerlink" href="#at-wps" title="Link to this heading"></a></h3>
<p>Enable the WPS function</p>
<section id="id78">
<h4>Set command<a class="headerlink" href="#id78" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Enable the WPS function.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">WPS</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">auth</span> <span class="n">floor</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;enable&gt;</strong>:</p>
<ul>
<li><p>1: Enable WPS (Wi-Fi Protected Setup) that uses PBC (Push Button Configuration) mode.</p></li>
<li><p>0: Disable WPS that uses PBC mode.</p></li>
</ul>
</li>
<li><p><strong>&lt;auth floor&gt;</strong>:</p>
<ul>
<li><p>0: Auth open (Default).</p></li>
<li><p>1: Auth WEP.</p></li>
<li><p>2: Auth WPA PSK.</p></li>
<li><p>3: Auth WPA2 PSK.</p></li>
<li><p>4: Auth WPA/WPA2 PSK.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>WPS can only be used when the ST67W611M1 station is enabled.</p></li>
<li><p>WPS doesn’t support WEP (Wired-Equivalent Privacy) encryption.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">1</span>

<span class="n">OK</span>

<span class="n">AT</span><span class="o">+</span><span class="n">WPS</span><span class="o">=</span><span class="mi">1</span>

<span class="n">OK</span>

<span class="o">...</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cwantenable">
<h3>AT+CWANTENABLE<a class="headerlink" href="#at-cwantenable" title="Link to this heading"></a></h3>
<p>Enable/disable antenna diversity function.</p>
<section id="id79">
<h4>Query command<a class="headerlink" href="#id79" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query whether the antenna diversity function is enabled.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWANTENABLE?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWANTENABLE</span><span class="p">:</span><span class="o">&lt;</span><span class="n">dynamic_enable</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">static_enable</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pin</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id80">
<h4>Set command<a class="headerlink" href="#id80" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Enable antenna diversity function.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWANTENABLE</span><span class="o">=&lt;</span><span class="n">dynamic_enable</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">static_enable</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">pin</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;dynamic_enable&gt;</strong>:</p>
<ul>
<li><p>1: Enable dynamic antenna diversity function.</p></li>
<li><p>0: Disable dynamic antenna diversity function.</p></li>
</ul>
</li>
<li><p><strong>&lt;static_enable&gt;</strong>:</p>
<ul>
<li><p>1: Enable static antenna diversity function.</p></li>
<li><p>0: Disable static antenna diversity function.</p></li>
</ul>
</li>
<li><p><strong>&lt;pin&gt;</strong>: Pin number.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWANTENABLE</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span>

<span class="n">OK</span>

<span class="n">AT</span><span class="o">+</span><span class="n">RST</span>

<span class="n">OK</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">1</span>

<span class="n">OK</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;SSID&quot;</span><span class="p">,</span><span class="s2">&quot;password&quot;</span>

<span class="n">OK</span>

<span class="o">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This parameter takes effect after a restart.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cwantnum">
<h3>AT+CWANTNUM<a class="headerlink" href="#at-cwantnum" title="Link to this heading"></a></h3>
<p>Get the maximum number of antennas for the current device.</p>
<section id="id81">
<h4>Query command<a class="headerlink" href="#id81" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Get the maximum number of antennas for the current device.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWANTNUM?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWANTNUM</span><span class="p">:</span><span class="o">&lt;</span><span class="n">numbers</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-cwant">
<h3>AT+CWANT<a class="headerlink" href="#at-cwant" title="Link to this heading"></a></h3>
<p>Set/query the currently used antenna.</p>
<section id="id82">
<h4>Query command<a class="headerlink" href="#id82" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the currently used antenna.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWANT?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWANT</span><span class="p">:</span><span class="o">&lt;</span><span class="n">ant_id</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id83">
<h4>Set command<a class="headerlink" href="#id83" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Enable automatic antenna diversity function.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWANT</span><span class="o">=&lt;</span><span class="n">ant_id</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;ant_id&gt;</strong>:</p>
<ul>
<li><p>Antenna Number ID.</p></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWANT</span><span class="o">=</span><span class="mi">1</span>

<span class="n">OK</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CWANT</span><span class="o">=</span><span class="mi">0</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
<section id="tcp-ip-at-commands">
<h1>TCP/IP AT commands<a class="headerlink" href="#tcp-ip-at-commands" title="Link to this heading"></a></h1>
<table class="docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Instruction</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipv6">AT+CIPV6</a></p></td>
<td><p>Enable/disable the network of Internet Protocol Version 6 (IPv6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cifsr">AT+CIFSR</a></p></td>
<td><p>Obtain the local IP address and MAC address</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipdomain">AT+CIPDOMAIN</a></p></td>
<td><p>Resolve a domain name</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipdns">AT+CIPDNS</a></p></td>
<td><p>Query/set DNS server information</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipstate">AT+CIPSTATE</a></p></td>
<td><p>Obtain the TCP/UDP/SSL connection information</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-ciprecvbuf">AT+CIPRECVBUF</a></p></td>
<td><p>Query/set the TCP/UDP/SSL receive buffer size</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipstart">AT+CIPSTART</a></p></td>
<td><p>Establish TCP connection, UDP transmission, or SSL connection</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipstartex">AT+CIPSTARTEX</a></p></td>
<td><p>Establish TCP connection, UDP transmission, or SSL connection with an automatically assigned ID</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-ciptcpopt">AT+CIPTCPOPT</a></p></td>
<td><p>Query/set the socket options</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipclose">AT+CIPCLOSE</a></p></td>
<td><p>Close TCP/UDP/SSL connection</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipsend">AT+CIPSEND</a></p></td>
<td><p>Send data in the normal transmission mode or Wi-Fi passthrough mode</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipsendl">AT+CIPSENDL</a></p></td>
<td><p>Send long data in parallel in the normal transmission mode</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipsendlcfg">AT+CIPSENDLCFG</a></p></td>
<td><p>Set the configuration for the command AT+CIPSENDL</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipsendex">AT+CIPSENDEX</a></p></td>
<td><p>Send data in the normal transmission mode in expanded ways</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipdinfo">AT+CIPDINFO</a></p></td>
<td><p>Set “+IPD” message mode</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipmux">AT+CIPMUX</a></p></td>
<td><p>Enable/disable the multiple connections mode</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipserver">AT+CIPSERVER</a></p></td>
<td><p>Delete/create a TCP/SSL server</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipservermaxconn">AT+CIPSERVERMAXCONN</a></p></td>
<td><p>Query/set the maximum connections allowed by a server</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipsto">AT+CIPSTO</a></p></td>
<td><p>Query/set the local TCP server timeout</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-savetranslink">AT+SAVETRANSLINK</a></p></td>
<td><p>Set whether to enter Wi-Fi passthrough mode on power-up</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipsntpcfg">AT+CIPSNTPCFG</a></p></td>
<td><p>Query/set the time zone and SNTP server</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipsntptime">AT+CIPSNTPTIME</a></p></td>
<td><p>Query the SNTP time</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipsntpintv">AT+CIPSNTPINTV</a></p></td>
<td><p>Query/set the SNTP time synchronization interval</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipreconnintv">AT+CIPRECONNINTV</a></p></td>
<td><p>Query/set the TCP/UDP/SSL reconnection interval for the Wi-Fi passthrough mode</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-ciprecvmode">AT+CIPRECVMODE</a></p></td>
<td><p>Query/set socket receiving mode</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-ciprecvdata">AT+CIPRECVDATA</a></p></td>
<td><p>Obtain socket data in passive receiving mode</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-ciprecvlen">AT+CIPRECVLEN</a></p></td>
<td><p>Obtain socket data length in passive receiving mode</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-ping">AT+PING</a></p></td>
<td><p>Ping the remote host</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipevt">AT+CIPEVT</a></p></td>
<td><p>Turn on or off the event message notification prefixed with +CIP.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cwevt">AT+CWEVT</a></p></td>
<td><p>Turn on or off the event message notification prefixed with +CW.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipsslcconf">AT+CIPSSLCCONF</a></p></td>
<td><p>Query/set SSL Clients.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipsslsconf">AT+CIPSSLSCONF</a></p></td>
<td><p>Query/set SSL Server.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipsslcsni">AT+CIPSSLCSNI</a></p></td>
<td><p>Query/set SSL Client Server Name.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipsslcalpn">AT+CIPSSLCALPN</a></p></td>
<td><p>Query/set SSL Client Application Layer Protocol Negotiation (ALPN).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-cipsslcpsk">AT+CIPSSLCPSK</a></p></td>
<td><p>Query/set SSL Client Pre-shared Key (PSK) in string format.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-cipsslcpskhex">AT+CIPSSLCPSKHEX</a></p></td>
<td><p>Query/set SSL Client Pre-shared Key (PSK) in hexadecimal format.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-iperf">AT+IPERF</a></p></td>
<td><p>Test throughput of the ST67W611M1 in standalone mode.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-iperfstop">AT+IPERFSTOP</a></p></td>
<td><p>Stop test throughput of the ST67W611M1.</p></td>
</tr>
</tbody>
</table>
<section id="tcp-ip-at-command-description">
<h2>TCP/IP AT command description<a class="headerlink" href="#tcp-ip-at-command-description" title="Link to this heading"></a></h2>
<section id="at-cipv6">
<h3>AT+CIPV6<a class="headerlink" href="#at-cipv6" title="Link to this heading"></a></h3>
<p>Function: Enable/disable the network of Internet Protocol Version 6 (IPv6).</p>
<section id="id84">
<h4>Query command<a class="headerlink" href="#id84" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query whether IPv6 is enabled.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPV6?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPV6</span><span class="p">:</span><span class="o">&lt;</span><span class="n">enable</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id85">
<h4>Set command<a class="headerlink" href="#id85" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Enable/disable IPv6 network.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPV6</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;enable&gt;</strong>: status of IPv6 network. Default: 0.</p>
<blockquote>
<div><ul class="simple">
<li><p>0: disable IPv6 network.</p></li>
<li><p>1: enable IPv6 network.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
</section>
<section id="at-cifsr">
<h3>AT+CIFSR<a class="headerlink" href="#at-cifsr" title="Link to this heading"></a></h3>
<p>Function: Obtain the local IP address and MAC address.</p>
<section id="id86">
<h4>Execute command<a class="headerlink" href="#id86" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIFSR</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">AP</span> <span class="n">mode</span>
<span class="o">//</span> <span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">2</span>
<span class="o">+</span><span class="n">CIFSR</span><span class="p">:</span><span class="n">APIP</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;APIP&quot;</span><span class="o">&gt;</span>
<span class="o">+</span><span class="n">CIFSR</span><span class="p">:</span><span class="n">APIP6LL</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;APIP6LL&quot;</span><span class="o">&gt;</span>
<span class="o">+</span><span class="n">CIFSR</span><span class="p">:</span><span class="n">APMAC</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;APMAC&quot;</span><span class="o">&gt;</span>

<span class="o">//</span> <span class="n">STA</span> <span class="n">mode</span>
<span class="o">//</span> <span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">1</span>
<span class="o">+</span><span class="n">CIFSR</span><span class="p">:</span><span class="n">STAIP</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;STAIP&quot;</span><span class="o">&gt;</span>
<span class="o">+</span><span class="n">CIFSR</span><span class="p">:</span><span class="n">STAIP6LL</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;STAIP6LL&quot;</span><span class="o">&gt;</span>
<span class="o">+</span><span class="n">CIFSR</span><span class="p">:</span><span class="n">STAIP6GL</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;STAIP6GL&quot;</span><span class="o">&gt;</span>
<span class="o">+</span><span class="n">CIFSR</span><span class="p">:</span><span class="n">STAMAC</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;STAMAC&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;&quot;APIP&quot;&gt;</strong>: IPv4 address of Wi-Fi softAP interface</p></li>
<li><p><strong>&lt;”APIP6GL”&gt;</strong>: Global IPv6 address of Wi-Fi softAP interface</p></li>
<li><p><strong>&lt;&quot;APMAC&quot;&gt;</strong>: MAC address of Wi-Fi softAP interface</p></li>
<li><p><strong>&lt;&quot;STAIP&quot;&gt;</strong>: IPv4 address of Wi-Fi station interface</p></li>
<li><p><strong>&lt;”STAIP6LL”&gt;</strong>: Link local IPv6 address of Wi-Fi station interface</p></li>
<li><p><strong>&lt;”STAIP6GL”&gt;</strong>: Global IPv6 address of Wi-Fi station interface</p></li>
<li><p><strong>&lt;&quot;STAMAC&quot;&gt;</strong>: MAC address of Wi-Fi station interface</p></li>
</ul>
</section>
</section>
<section id="at-cipdomain">
<h3>AT+CIPDOMAIN<a class="headerlink" href="#at-cipdomain" title="Link to this heading"></a></h3>
<p>Function: Resolve a domain name.</p>
<section id="id87">
<h4>Set command<a class="headerlink" href="#id87" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPDOMAIN</span><span class="o">=&lt;</span><span class="s2">&quot;domain name&quot;</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">ip</span> <span class="n">network</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPDOMAIN</span><span class="p">:</span><span class="o">&lt;</span><span class="s2">&quot;IP address&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;&quot;domain name&quot;&gt;</strong>: the domain name.</p></li>
<li><p><strong>&lt;ip network&gt;</strong>: preferred IP network. Default: 1.</p>
<ul>
<li><p>1: preferred resolution of IPv4 address</p></li>
<li><p>2: resolve IPv4 address only</p></li>
<li><p>3: resolve IPv6 address only</p></li>
</ul>
</li>
<li><p><strong>&lt;&quot;IP address&quot;&gt;</strong>: the resolved IPv4 address or IPv6 address.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">1</span>                       <span class="o">//</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">station</span> <span class="n">mode</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;SSID&quot;</span><span class="p">,</span><span class="s2">&quot;password&quot;</span>        <span class="o">//</span> <span class="n">access</span> <span class="n">to</span> <span class="n">the</span> <span class="n">internet</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPDOMAIN</span><span class="o">=</span><span class="s2">&quot;www.google.com&quot;</span>   <span class="o">//</span> <span class="n">Domain</span> <span class="n">Name</span> <span class="n">Resolution</span> <span class="n">function</span>

<span class="o">//</span> <span class="n">Domain</span> <span class="n">Name</span> <span class="n">Resolution</span> <span class="n">Function</span> <span class="k">for</span> <span class="n">IPv4</span> <span class="n">address</span> <span class="n">only</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPDOMAIN</span><span class="o">=</span><span class="s2">&quot;www.google.com&quot;</span><span class="p">,</span><span class="mi">2</span>

<span class="o">//</span> <span class="n">Domain</span> <span class="n">Name</span> <span class="n">Resolution</span> <span class="n">Function</span> <span class="k">for</span> <span class="n">IPv6</span> <span class="n">address</span> <span class="n">only</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPDOMAIN</span><span class="o">=</span><span class="s2">&quot;www.google.com&quot;</span><span class="p">,</span><span class="mi">3</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cipdns">
<h3>AT+CIPDNS<a class="headerlink" href="#at-cipdns" title="Link to this heading"></a></h3>
<p>Function: Set/query the current DNS server information.</p>
<section id="id88">
<h4>Query command<a class="headerlink" href="#id88" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the current DNS server information.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPDNS?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPDNS</span><span class="p">:</span><span class="o">&lt;</span><span class="n">enable</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;DNS IP1&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;DNS IP2&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;DNS IP3&quot;</span><span class="o">&gt;</span><span class="p">]</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id89">
<h4>Set command<a class="headerlink" href="#id89" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set DNS server information.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPDNS</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;DNS IP1&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;DNS IP2&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;DNS IP3&quot;</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p>or</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;enable&gt;</strong>: the domain name.</p>
<ul>
<li><p>0: Enable automatic DNS server settings from DHCP. Only when the ST67W611M1 station completes the DHCP process, the DNS server of the ST67W611M1 station could be updated.</p></li>
<li><p>1: Enable manual DNS server settings. If you don’t set a value for &lt;DNS IPx&gt;, it will use 208.67.222.222 and 8.8.8.8 by default.</p></li>
</ul>
</li>
<li><p><strong>&lt;”DNS IP1”&gt;</strong>: the first DNS server IP address. For the Set command, this parameter only works when you set &lt;enable&gt; to 1, i.e. enable manual DNS settings. If you set &lt;enable&gt; to 1 and a value for this parameter, the ST67W611M1-AT will return this parameter as the current DNS setting when you run the Query command.</p></li>
<li><p><strong>&lt;”DNS IP2”&gt;</strong>: the second DNS server IP address. For the Set command, this parameter only works when you set &lt;enable&gt; to 1, i.e. enable manual DNS settings. If you set &lt;enable&gt; to 1 and a value for this parameter, the ST67W611M1-AT will return this parameter as the current DNS setting when you run the Query command.</p></li>
<li><p><strong>&lt;”DNS IP3”&gt;</strong>: the third DNS server IP address. For the Set command, this parameter only works when you set &lt;enable&gt; to 1, i.e. enable manual DNS settings. If you set &lt;enable&gt; to 1 and a value for this parameter, the ST67W611M1-AT will return this parameter as the current DNS setting when you run the Query command.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes will be saved in the NVS area if AT+SYSSTORE=1.</p></li>
<li><p>The three parameters can’t be set to the same server.</p></li>
<li><p>When &lt;enable&gt; is set to 1, the DNS server may change according to the configuration of the router which the ST67W611M1 is connected to.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPDNS</span><span class="o">=</span><span class="mi">0</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPDNS</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;114.114.114.114&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cipstate">
<h3>AT+CIPSTATE<a class="headerlink" href="#at-cipstate" title="Link to this heading"></a></h3>
<p>Function: Obtain the TCP/UDP/SSL connection information.</p>
<section id="id90">
<h4>Query command<a class="headerlink" href="#id90" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSTATE?
</pre></div>
</div>
<p><strong>Response</strong></p>
<p>When there is a connection, AT returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSTATE</span><span class="p">:</span><span class="o">&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;type&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;remote IP&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">local</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">tetype</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p>When there is no connection, AT returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;link ID&gt;</strong>: ID of the connection (0~4), used for multiple connections.</p></li>
<li><p><strong>&lt;&quot;type&quot;&gt;</strong>: string parameter showing the type of transmission: “TCP”, “TCPv6”, “UDP”, “UDPv6”, “SSL”, or “SSLv6”.</p></li>
<li><p><strong>&lt;&quot;remote IP&quot;&gt;</strong>: string parameter showing the remote IPv4 address.</p></li>
<li><p><strong>&lt;remote port&gt;</strong>: the remote port number.</p></li>
<li><p><strong>&lt;local port&gt;</strong>: the local port number.</p></li>
<li><p><strong>&lt;tetype&gt;</strong>:</p>
<ul>
<li><p>0: ST67W611M1 runs as a client.</p></li>
<li><p>1: ST67W611M1 runs as a server.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="at-ciprecvbuf">
<h3>AT+CIPRECVBUF<a class="headerlink" href="#at-ciprecvbuf" title="Link to this heading"></a></h3>
<p>Function: Query/set the TCP/UDP/SSL receive buffer size.</p>
<section id="id91">
<h4>Set command<a class="headerlink" href="#id91" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPRECVBUF</span><span class="o">=&lt;</span><span class="n">size</span><span class="o">&gt;</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connection</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPRECVBUF</span><span class="o">=&lt;</span><span class="n">linkid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">size</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<p>This command needs to be used when there is no connection with this ID; otherwise, it will return an ERROR.</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPRECVBUF</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;linkid&gt;</strong>: ID of the connection (0~4), used for multiple connections.</p></li>
<li><p><strong>&lt;size&gt;</strong>: Set the size of the buffer, unit bytes.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The receive buffer holds data from the remote peer; if the incoming payload exceeds its configured size, excess bytes are dropped.</p></li>
</ul>
</div>
</section>
<section id="id92">
<h4>Query command<a class="headerlink" href="#id92" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Single connection (AT+CIPMUX=0):
AT+CIPRECVBUF?

// Multiple connection (AT+CIPMUX=1):
AT+CIPRECVBUF=&lt;linkid&gt;?
</pre></div>
</div>
<p><strong>Response</strong></p>
<p>Returns the buffer size for the specified link ID. The default buffer size is 2920 bytes.</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPRECVBUF</span><span class="p">:</span><span class="o">&lt;</span><span class="n">size</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-cipstart">
<h3>AT+CIPSTART<a class="headerlink" href="#at-cipstart" title="Link to this heading"></a></h3>
<p>Function: Establish TCP connection, UDP transmission, or SSL connection.</p>
<section id="establish-tcp-connection">
<h4>Establish TCP connection<a class="headerlink" href="#establish-tcp-connection" title="Link to this heading"></a></h4>
<section id="id93">
<h5>Set command<a class="headerlink" href="#id93" title="Link to this heading"></a></h5>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSTART</span><span class="o">=&lt;</span><span class="s2">&quot;type&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;remote host&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">keep_alive</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;local IP&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">timeout</span><span class="o">&gt;</span><span class="p">]</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">Connections</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSTART</span><span class="o">=&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;type&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;remote host&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">keep_alive</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;local IP&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">timeout</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<p>For single connection, it returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIP</span><span class="p">:</span><span class="n">CONNECTED</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p>For multiple connections, it returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIP</span><span class="p">:</span><span class="o">&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="n">CONNECTED</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;link ID&gt;</strong>: ID of network connection (0~4), used for multiple connections.</p></li>
<li><p><strong>&lt;&quot;type&quot;&gt;</strong>: string parameter showing the type of transmission: “TCP”,”TCPv6”,”UDP”,”UDPv6”,”SSL”,”SSLv6”. Default: “TCP”.</p></li>
<li><p><strong>&lt;&quot;remote host&quot;&gt;</strong>: IPv4/IPv6 address,  or domain name of remote host. The maximum length is 64 bytes. If you need to use a domain name and the length of the domain name exceeds 64 bytes, use the AT+CIPDOMAIN command to obtain the IP address corresponding to the domain name, and then use the IP address to establish a connection.</p></li>
<li><p><strong>&lt;remote port&gt;</strong>: the remote port number.</p></li>
<li><p><strong>&lt;keep_alive&gt;</strong>: It configures the <a class="reference external" href="https://man7.org/linux/man-pages/man7/socket.7.html#SO_KEEPALIVE">SO_KEEPALIVE</a> option for socket. Unit: second.</p>
<ul>
<li><p>Range: [0,7200].</p>
<ul>
<li><p>0: disable keep-alive function (default).</p></li>
<li><p>1 ~ 7200: enable keep-alive function. <a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_KEEPIDLE">TCP_KEEPIDLE</a> value is <strong>&lt;keep_alive&gt;</strong>, <a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_KEEPINTVL">TCP_KEEPINTVL</a> value is 1, and <a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_KEEPCNT">TCP_KEEPCNT</a> value is 3.</p></li>
</ul>
</li>
<li><p>This parameter of this command is the same as the <code class="docutils literal notranslate"><span class="pre">&lt;keep_alive&gt;</span></code> parameter of AT+CIPTCPOPT command. It always takes the value set later by either of the two commands. If it’s omitted or not set, the last configured value is used by default.</p></li>
</ul>
</li>
<li><p><strong>&lt;&quot;local IP&quot;&gt;</strong>: the local IPv4 address or IPv6 address that the connection binds. This parameter is useful when you are using multiple network interfaces or multiple IP addresses. By default, it’s disabled. If you want to use it, you should specify it first. Null is also valid.</p></li>
<li><p><strong>&lt;timeout&gt;</strong>: Command timeout. Unit: milliseconds. Default value: 10000. Range: [0,20000]. When set to 0, the command timeout depends on the network and lwIP protocol stack; when set to a non-zero value, the command will return within the specified timeout.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>To establish a TCP connection based on an IPv6 network, do as follows:</p>
<ul>
<li><p>Make sure that the AP supports IPv6</p></li>
<li><p>Set AT+CIPV6=1</p></li>
<li><p>Obtain an IPv6 address through the AT+CWJAP command</p></li>
<li><p>(Optional) Check whether ST67W611M1 has obtained an IPv6 address using the AT+CIPSTA? command</p></li>
</ul>
</li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSTART</span><span class="o">=</span><span class="s2">&quot;TCP&quot;</span><span class="p">,</span><span class="s2">&quot;192.168.101.110&quot;</span><span class="p">,</span><span class="mi">1000</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSTART</span><span class="o">=</span><span class="s2">&quot;TCP&quot;</span><span class="p">,</span><span class="s2">&quot;192.168.101.110&quot;</span><span class="p">,</span><span class="mi">2500</span><span class="p">,</span><span class="mi">60</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSTART</span><span class="o">=</span><span class="s2">&quot;TCP&quot;</span><span class="p">,</span><span class="s2">&quot;192.168.101.110&quot;</span><span class="p">,</span><span class="mi">1000</span><span class="p">,,</span><span class="s2">&quot;192.168.101.100&quot;</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSTART</span><span class="o">=</span><span class="s2">&quot;TCPv6&quot;</span><span class="p">,</span><span class="s2">&quot;test-ipv6.com&quot;</span><span class="p">,</span><span class="mi">80</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSTART</span><span class="o">=</span><span class="s2">&quot;TCPv6&quot;</span><span class="p">,</span><span class="s2">&quot;fe80::860d:8eff:fe9d:cd90&quot;</span><span class="p">,</span><span class="mi">1000</span><span class="p">,,</span><span class="s2">&quot;fe80::411c:1fdb:22a6:4d24&quot;</span>
</pre></div>
</div>
</section>
<section id="id94">
<h5>Query command<a class="headerlink" href="#id94" title="Link to this heading"></a></h5>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSTART?
</pre></div>
</div>
<p><strong>Response</strong></p>
<p>For single connection, it returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSTART</span><span class="p">:</span><span class="o">&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;type&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;ip&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote_port</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">local_port</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">tetype</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;link ID&gt;</strong>: ID of the connection (0~4), used for multiple connections.</p></li>
<li><p><strong>&lt;&quot;type&quot;&gt;</strong>: string parameter showing the type of transmission: “TCP”, “TCPv6”, “UDP”, “UDPv6”, “SSL”, or “SSLv6”.</p></li>
<li><p><strong>&lt;&quot;remote IP&quot;&gt;</strong>: string parameter showing the remote IPv4 address.</p></li>
<li><p><strong>&lt;remote port&gt;</strong>: the remote port number.</p></li>
<li><p><strong>&lt;local port&gt;</strong>: the local port number.</p></li>
<li><p><strong>&lt;tetype&gt;</strong>:</p>
<ul>
<li><p>0: ST67W611M1 runs as a client.</p></li>
<li><p>1: ST67W611M1 runs as a server.</p></li>
</ul>
</li>
</ul>
</section>
</section>
</section>
<section id="at-cipstartex">
<h3>AT+CIPSTARTEX<a class="headerlink" href="#at-cipstartex" title="Link to this heading"></a></h3>
<p>Function: Establish TCP connection, UDP transmission, or SSL connection with an Automatically Assigned ID.</p>
<p>This command is similar to AT+CIPSTART except that you don’t need to assign an ID by yourself in multiple connections mode (AT+CIPMUX=1). The system will assign an ID to the new connection automatically.</p>
</section>
<section id="data-mode-only-exit-from-data-mode">
<h3>[Data Mode Only] +++ : Exit from Data Mode<a class="headerlink" href="#data-mode-only-exit-from-data-mode" title="Link to this heading"></a></h3>
<section id="special-execute-command">
<h4>Special Execute command<a class="headerlink" href="#special-execute-command" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Exit from Data Mode and enter the Command Mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Only</span> <span class="k">for</span> <span class="n">data</span> <span class="n">mode</span>
<span class="o">+++</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This special execution command consists of three identical <code class="docutils literal notranslate"><span class="pre">+</span></code> characters (0x2b ASCII), and no CR-LF appends to the command tail.</p></li>
<li><p>Make sure there is more than 20 ms interval before the first <code class="docutils literal notranslate"><span class="pre">+</span></code> character, more than 20 ms interval after the third <code class="docutils literal notranslate"><span class="pre">+</span></code> character, less than 20 ms interval among the three <code class="docutils literal notranslate"><span class="pre">+</span></code> characters. Otherwise, the <code class="docutils literal notranslate"><span class="pre">+</span></code> characters will be sent out as normal data.</p></li>
<li><p>This command returns no reply.</p></li>
<li><p>Please wait for at least one second before sending the next AT command.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-ciptcpopt">
<h3>AT+CIPTCPOPT<a class="headerlink" href="#at-ciptcpopt" title="Link to this heading"></a></h3>
<p>Function: Query/set the socket options.</p>
<section id="id95">
<h4>Query command<a class="headerlink" href="#id95" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query current socket options.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPTCPOPT?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPTCPOPT</span><span class="p">:</span><span class="o">&lt;</span><span class="n">link_id</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">so_linger</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">tcp_nodelay</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">so_sndtimeo</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">keepalive</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id96">
<h4>Set command<a class="headerlink" href="#id96" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">TCP</span> <span class="n">connection</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPTCPOPT</span><span class="o">=</span><span class="p">[</span><span class="o">&lt;</span><span class="n">so_linger</span><span class="o">&gt;</span><span class="p">],[</span><span class="o">&lt;</span><span class="n">tcp_nodelay</span><span class="o">&gt;</span><span class="p">],[</span><span class="o">&lt;</span><span class="n">so_sndtimeo</span><span class="o">&gt;</span><span class="p">],[</span><span class="o">&lt;</span><span class="n">keepalive</span><span class="o">&gt;</span><span class="p">]</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">TCP</span> <span class="n">Connections</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPTCPOPT</span><span class="o">=&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,[</span><span class="o">&lt;</span><span class="n">so_linger</span><span class="o">&gt;</span><span class="p">],[</span><span class="o">&lt;</span><span class="n">tcp_nodelay</span><span class="o">&gt;</span><span class="p">],[</span><span class="o">&lt;</span><span class="n">so_sndtimeo</span><span class="o">&gt;</span><span class="p">],[</span><span class="o">&lt;</span><span class="n">keepalive</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p>or</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;link_id&gt;</strong>: ID of the connection (0 ~ max). For multiple connections, if the value is max, it means all connections. By default, max is 5.</p></li>
<li><p><strong>&lt;so_linger&gt;</strong>: configure the <code class="docutils literal notranslate"><span class="pre">SO_LINGER</span></code> options for the socket (refer to <a class="reference external" href="https://man7.org/linux/man-pages/man7/socket.7.html#SO_LINGER">SO_LINGER description</a>). Unit: second. Default: -1.</p>
<ul>
<li><p>= -1: off</p></li>
<li><p>= 0: on, linger time = 0</p></li>
<li><p>&gt; 0: on, linger time = &lt;so_linger&gt;</p></li>
</ul>
</li>
<li><p><strong>&lt;tcp_nodelay&gt;</strong>: configure the <code class="docutils literal notranslate"><span class="pre">TCP_NODELAY</span></code> option for the socket (refer to <a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_NODELAY">TCP_NODELAY description</a>). Default: 0.</p>
<ul>
<li><p>0: disable TCP_NODELAY</p></li>
<li><p>1: enable TCP_NODELAY</p></li>
</ul>
</li>
<li><p><strong>&lt;so_sndtimeo&gt;</strong>: configure the <code class="docutils literal notranslate"><span class="pre">SO_SNDTIMEO</span></code> option for socket (refer to <a class="reference external" href="https://man7.org/linux/man-pages/man7/socket.7.html#SO_SNDTIMEO">SO_SNDTIMEO description</a>). Unit: millisecond. Default: 0.</p></li>
<li><p><strong>&lt;keepalive&gt;</strong>: It configures the <a class="reference external" href="https://man7.org/linux/man-pages/man7/socket.7.html#SO_KEEPALIVE">SO_KEEPALIVE</a> option for socket. Unit: second.</p>
<ul>
<li><p>Range: [0,7200].</p>
<ul>
<li><p>0: disable keep-alive function (default).</p></li>
<li><p>1 ~ 7200: enable keep-alive function. <a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_KEEPIDLE">TCP_KEEPIDLE</a> value is <strong>&lt;keepalive&gt;</strong>, <a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_KEEPINTVL">TCP_KEEPINTVL</a> value is 1, and <a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_KEEPCNT">TCP_KEEPCNT</a> value is 3.</p></li>
</ul>
</li>
<li><p>This parameter of this command is the same as the <code class="docutils literal notranslate"><span class="pre">&lt;keepalive&gt;</span></code> parameter of AT+CIPTCPOPT command. It always takes the value set later by either of the two commands. If it’s omitted or not set, the last configured value is used by default.
Setting a low keepalive value in low-power mode will result in increased power consumption.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Before configuring these socket options, make sure you fully understand the function of them and the possible impact after configuration.</p></li>
<li><p>The SO_LINGER option isn’t recommended to be set to a large value. For example, if you set SO_LINGER value to 60, then AT+CIPCLOSE command will block for 60 seconds if ST67W611M1 can’t receive TCP FIN packet from the remote TCP peer due to network issues, so ST67W611M1 is unable to respond to any other AT commands. Therefore, it’s recommended to keep the default value of the SO_LINGER option.</p></li>
<li><p>The TCP_NODELAY option is used for situations with small throughput but high real-time requirements. If this option is enabled, LwIP will speed up TCP transmission, but in a poor network environment, the throughput will be reduced due to retransmission. Therefore, it’s recommended to keep the default value of the TCP_NODELAY option.</p></li>
<li><p>The SO_SNDTIMEO option is used for situations where the keepalive parameter isn’t configured in AT+CIPSTART command. After this option is configured, AT+CIPSEND , AT+CIPSENDL , and AT+CIPSENDEX commands will exit within this timeout, regardless of whether data are sent successfully or not. Here, SO_SNDTIMEO is recommended to be set to 5 ~ 10 seconds.</p></li>
<li><p>The SO_KEEPALIVE option is used for actively and regularly detecting whether the connection is disconnected. It’s generally recommended to configure this option when AT is used as a TCP server. After this option is configured, additional network bandwidth will be cost. Recommended value of SO_KEEPALIVE should be not less than 60 seconds. Setting a low keepalive value in low-power mode will result in increased power consumption.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cipclose">
<h3>AT+CIPCLOSE<a class="headerlink" href="#at-cipclose" title="Link to this heading"></a></h3>
<p>Function: Close TCP/UDP/SSL connection.</p>
<section id="id100">
<h4>Set command<a class="headerlink" href="#id100" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Close TCP/UDP/SSL connection in the multiple connections mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPCLOSE</span><span class="o">=&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="n">CLOSED</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id101">
<h4>Execute command<a class="headerlink" href="#id101" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Close TCP/UDP/SSL connection in the single connection mode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPCLOSE</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CLOSED</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;link ID&gt;</strong>: ID of the connection that you want to close. If you set it to 5, all connections will be closed.</p></li>
</ul>
</section>
</section>
<section id="at-cipsend">
<h3>AT+CIPSEND<a class="headerlink" href="#at-cipsend" title="Link to this heading"></a></h3>
<p>Function: Send data in the normal transmission mode or Wi-Fi passthrough mode</p>
<section id="id102">
<h4>Set command<a class="headerlink" href="#id102" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the data length to be send in the normal transmission mode. If the length of data you need to send exceeds 8192 bytes, please use the AT+CIPSENDL command.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSEND</span><span class="o">=&lt;</span><span class="n">length</span><span class="o">&gt;</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connections</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSEND</span><span class="o">=&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span>

<span class="o">//</span> <span class="n">Remote</span> <span class="n">host</span> <span class="ow">and</span> <span class="n">port</span> <span class="n">can</span> <span class="n">be</span> <span class="nb">set</span> <span class="k">for</span> <span class="n">UDP</span> <span class="n">transmission</span><span class="p">:</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSEND</span><span class="o">=</span><span class="p">[</span><span class="o">&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,]</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;remote host&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>This response indicates that AT is ready for receiving serial data. You should enter the data, and when the data length reaches the <code class="docutils literal notranslate"><span class="pre">&lt;length&gt;</span></code> value, the transmission of data starts.</p>
<p>If the connection can’t be established or is disrupted during data transmission, the system returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p>If the data has been successfully sent to the protocol stack (It doesn’t mean that the data has been sent to the opposite end), the system returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id103">
<h4>Execute command<a class="headerlink" href="#id103" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Enter the Wi-Fi passthrough mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSEND</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>or</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p>Enter the Wi-Fi passthrough mode. The ST67W611M1 can receive 8192 bytes and send 2920 bytes at most each time. If the data received by ST67W611M1 reaches or exceeds 2920 bytes, the data will be immediately sent in chunks of 2920 bytes. Otherwise, it will wait for 20 milliseconds before being sent (You can configure this interval using AT+TRANSINTVL command). When a single packet containing +++ is received, the ST67W611M1 will exit the data sending mode under the Wi-Fi passthrough mode. Please wait for at least one second before sending the next AT command.</p>
<p>This command can only be used for single connection in the Wi-Fi passthrough mode. For UDP Wi-Fi passthrough, the <code class="docutils literal notranslate"><span class="pre">&lt;mode&gt;</span></code> parameter has to be 0 when using AT+CIPSTART.</p>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;link ID&gt;</strong>: ID of the connection (0~4), for multiple connections.</p></li>
<li><p><strong>&lt;length&gt;</strong>: data length. Maximum: 8192 bytes.</p></li>
<li><p><strong>&lt;&quot;remote host&quot;&gt;</strong>: IPv4 address, or domain name of remote host. It can be set in UDP transmission.</p></li>
<li><p><strong>&lt;remote port&gt;</strong>: the remote port number.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>You can use AT+CIPTCPOPT command to configure socket options for each TCP connection. For example, setting &lt;so_sndtimeo&gt; to 5000 will enable TCP send operation to return results within 5 seconds, regardless of success or failure. This can save the time that the MCU waits for AT command response.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cipsendl">
<h3>AT+CIPSENDL<a class="headerlink" href="#at-cipsendl" title="Link to this heading"></a></h3>
<p>Function: Send long data in parallel in the normal transmission mode.</p>
<section id="id104">
<h4>Set command<a class="headerlink" href="#id104" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>In the Normal Transmission Mode, set the data length to be sent, and then send data to remote host in parallel (the AT command port receives data in parallel with the AT sending data to the remote host). You can use the AT+CIPSENDLCFG command to configure this command. If the length of data you need to send is less than 8192 bytes, you also can use the AT+CIPSEND command.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSENDL</span><span class="o">=&lt;</span><span class="n">length</span><span class="o">&gt;</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connections</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSENDL</span><span class="o">=&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span>

<span class="o">//</span> <span class="n">Remote</span> <span class="n">host</span> <span class="ow">and</span> <span class="n">port</span> <span class="n">can</span> <span class="n">be</span> <span class="nb">set</span> <span class="k">for</span> <span class="n">UDP</span> <span class="n">transmission</span><span class="p">:</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSENDL</span><span class="o">=</span><span class="p">[</span><span class="o">&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,]</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;remote host&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>This response indicates that AT enters the Data Mode and AT command port is ready to receive data. You can enter the data now. Once the port receives data, it will be pushed to underlying protocol stack and the transmission starts.</p>
<p>If the transmission starts, the system reports message according to AT+CIPSENDLCFG configuration:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSENDL</span><span class="p">:</span><span class="o">&lt;</span><span class="n">had</span> <span class="n">sent</span> <span class="nb">len</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">port</span> <span class="n">recv</span> <span class="nb">len</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>If the transmission is cancelled by +++ command, the system returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SEND</span> <span class="n">CANCELLED</span>
</pre></div>
</div>
</div>
<p>If not all the data has been sent out, the system finally returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SEND</span> <span class="n">FAIL</span>
</pre></div>
</div>
</div>
<p>If the data has been successfully sent to the protocol stack (It doesn’t mean that the data has been sent to the opposite end), the system finally returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</div>
<p>When the connection is disconnected, you can send +++ command to cancel the transmission, then the ST67W611M1 will exit from the Data Mode, otherwise, the Data Mode won’t end until the AT command port receives all the data of the specified <code class="docutils literal notranslate"><span class="pre">&lt;length&gt;</span></code>.</p>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;link ID&gt;</strong>: ID of the connection (0~4), for multiple connections.</p></li>
<li><p><strong>&lt;length&gt;</strong>: data length. Maximum: 2 <sup>31</sup> - 1 bytes.</p></li>
<li><p><strong>&lt;&quot;remote host&quot;&gt;</strong>: IPv4 address, or domain name of remote host. It can be set in UDP transmission.</p></li>
<li><p><strong>&lt;remote port&gt;</strong>: the remote port number.</p></li>
<li><p><strong>&lt;had sent len&gt;</strong>: the length of data successfully sent to the underlying protocol stack.</p></li>
<li><p><strong>&lt;port recv len&gt;</strong>: data length received by AT command port.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>It’s recommended to use UART flow control, because if the UART receives data at a faster rate than the network sends, data loss may occur.</p></li>
<li><p>You can use AT+CIPTCPOPT command to configure socket options for each TCP connection. For example, setting &lt;so_sndtimeo&gt; to 5000 will enable TCP send operation to return results within 5 seconds, regardless of success or failure. This can save the time that the MCU waits for AT command response.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cipsendlcfg">
<h3>AT+CIPSENDLCFG<a class="headerlink" href="#at-cipsendlcfg" title="Link to this heading"></a></h3>
<p>Function: Set the configuration for the command AT+CIPSENDL.</p>
<section id="id105">
<h4>Query command<a class="headerlink" href="#id105" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the configuration of AT+CIPSENDL</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSENDLCFG?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSENDLCFG</span><span class="p">:</span><span class="o">&lt;</span><span class="n">report</span> <span class="n">size</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">transmit</span> <span class="n">size</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id106">
<h4>Set command<a class="headerlink" href="#id106" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the configuration of AT+CIPSENDL.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSENDLCFG</span><span class="o">=&lt;</span><span class="n">report</span> <span class="n">size</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">transmit</span> <span class="n">size</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;report size&gt;</strong>: report block size for AT+CIPSENDL. Default: 1024. Range: [100,2 <sup>20</sup>]. For example, set <code class="docutils literal notranslate"><span class="pre">&lt;report</span> <span class="pre">size&gt;</span></code> to 100, <code class="docutils literal notranslate"><span class="pre">&lt;had</span> <span class="pre">sent</span> <span class="pre">len&gt;</span></code> report sequence in the response of AT+CIPSENDL will be (100, 200, 300, 400, …). The final <code class="docutils literal notranslate"><span class="pre">&lt;had</span> <span class="pre">sent</span> <span class="pre">len&gt;</span></code> report is always equal to the data length that had been sent out.</p></li>
<li><p><strong>&lt;transmit size&gt;</strong>: transmit block size of AT+CIPSENDL. It specifies the size of the data block sent to the underlying protocol stack. Default: 2920. Range: [100,2920]. If the data received by ST67W611M1 reaches or exceeds <code class="docutils literal notranslate"><span class="pre">&lt;transmit</span> <span class="pre">size&gt;</span></code> bytes, the data will be immediately sent in chunks of <code class="docutils literal notranslate"><span class="pre">&lt;transmit</span> <span class="pre">size&gt;</span></code> bytes. Otherwise, it will wait for 20 milliseconds before being sent (You can configure this interval using AT+TRANSINTVL command).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>For devices with small throughput but high real-time requirements, it’s recommended to set a smaller <code class="docutils literal notranslate"><span class="pre">&lt;transmit</span> <span class="pre">size&gt;</span></code>. It’s also recommended to set <code class="docutils literal notranslate"><span class="pre">TCP_NODELAY</span></code> by AT+CIPTCPOPT command.</p></li>
<li><p>For devices with large throughput, it’s recommended to set a larger <code class="docutils literal notranslate"><span class="pre">&lt;transmit</span> <span class="pre">size&gt;</span></code>.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cipsendex">
<h3>AT+CIPSENDEX<a class="headerlink" href="#at-cipsendex" title="Link to this heading"></a></h3>
<p>Function: Send data in the normal transmission mode in expanded ways.</p>
<section id="id107">
<h4>Set command<a class="headerlink" href="#id107" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the data length to be send in normal transmission mode, or use <code class="docutils literal notranslate"><span class="pre">\0</span></code> (0x5c, 0x30 ASCII) to trigger data transmission.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSENDEX</span><span class="o">=&lt;</span><span class="n">length</span><span class="o">&gt;</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connections</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSENDEX</span><span class="o">=&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span>

<span class="o">//</span> <span class="n">Remote</span> <span class="n">host</span> <span class="ow">and</span> <span class="n">port</span> <span class="n">can</span> <span class="n">be</span> <span class="nb">set</span> <span class="k">for</span> <span class="n">UDP</span> <span class="n">transmission</span><span class="p">:</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSENDEX</span><span class="o">=</span><span class="p">[</span><span class="o">&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,]</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;remote host&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>This response indicates that AT is ready for receiving data. You should enter the data of designated length. When the data length reaches the <code class="docutils literal notranslate"><span class="pre">&lt;length&gt;</span></code> value, or when the string <code class="docutils literal notranslate"><span class="pre">\0</span></code> appears in the data, the transmission starts.</p>
<p>If the connection can’t be established or gets disconnected during transmission, the system returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p>If the data has been successfully sent to the protocol stack (It doesn’t mean that the data has been sent to the opposite end), the system returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Recv</span> <span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span> <span class="nb">bytes</span>
<span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;link ID&gt;</strong>: ID of the connection (0~4), for multiple connections.</p></li>
<li><p><strong>&lt;length&gt;</strong>: data length. Maximum: 8192 bytes.</p></li>
<li><p><strong>&lt;&quot;remote host&quot;&gt;</strong>: IPv4 address, or domain name of remote host. It can be set in UDP transmission.</p></li>
<li><p><strong>&lt;remote port&gt;</strong>: remote port can be set in UDP transmission.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>When the requirement of data length is met, or when the string <code class="docutils literal notranslate"><span class="pre">\0</span></code> (0x5c, 0x30 in ASCII) appears, the transmission of data starts. Go back to the normal command mode and wait for the next AT command.</p></li>
<li><p>If the data contains the <code class="docutils literal notranslate"><span class="pre">\&lt;any&gt;</span></code>, it means that drop backslash symbol and only use <code class="docutils literal notranslate"><span class="pre">&lt;any&gt;</span></code> character.</p></li>
<li><p>When sending <code class="docutils literal notranslate"><span class="pre">\0</span></code>, please use a backslash to escape it as <code class="docutils literal notranslate"><span class="pre">\\0</span></code>.</p></li>
<li><p>You can use AT+CIPTCPOPT command to configure socket options for each TCP connection. For example, setting &lt;so_sndtimeo&gt; to 5000 will enable TCP send operation to return results within 5 seconds, regardless of success or failure. This can save the time that the MCU waits for AT command response.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cipdinfo">
<h3>AT+CIPDINFO<a class="headerlink" href="#at-cipdinfo" title="Link to this heading"></a></h3>
<p>Function: Set “+IPD” message mode.</p>
<section id="id108">
<h4>Query command<a class="headerlink" href="#id108" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPDINFO?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPDINFO</span><span class="p">:</span><span class="n">true</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p>or</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPDINFO</span><span class="p">:</span><span class="n">false</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id109">
<h4>Set command<a class="headerlink" href="#id109" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPDINFO</span><span class="o">=&lt;</span><span class="n">mode</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;mode&gt;</strong>:</p>
<ul>
<li><p>0: doesn’t show the remote host and port in “+IPD” messages.</p></li>
<li><p>1: show the remote host and port in “+IPD” messages.</p></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPDINFO</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cipmux">
<h3>AT+CIPMUX<a class="headerlink" href="#at-cipmux" title="Link to this heading"></a></h3>
<p>Function: Enable/disable multiple connections.</p>
<section id="id110">
<h4>Query command<a class="headerlink" href="#id110" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the connection type.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPMUX?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPMUX</span><span class="p">:</span><span class="o">&lt;</span><span class="n">mode</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id111">
<h4>Set command<a class="headerlink" href="#id111" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the connection type.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=&lt;</span><span class="n">mode</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;mode&gt;</strong>: connection mode. Default: 0.</p>
<ul>
<li><p>0: single connection.</p></li>
<li><p>1: multiple connections.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This mode can only be changed after all connections are disconnected.</p></li>
<li><p>If you want to set the single connection mode when the TCP/SSL server is running, you should delete the server first. (AT+CIPSERVER=0).</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-cipserver">
<h3>AT+CIPSERVER<a class="headerlink" href="#at-cipserver" title="Link to this heading"></a></h3>
<p>Function: Delete/create a TCP/SSL Server.</p>
<section id="id112">
<h4>Query command<a class="headerlink" href="#id112" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the TCP/SSL server status.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSERVER?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSERVER</span><span class="p">:</span><span class="o">&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;type&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">CA</span> <span class="n">enable</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">keepalive</span><span class="o">&gt;</span><span class="p">]</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id113">
<h4>Set command<a class="headerlink" href="#id113" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSERVER</span><span class="o">=&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">param2</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;type&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">CA</span> <span class="n">enable</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="n">keepalive</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;mode&gt;</strong>:</p>
<ul class="simple">
<li><p>0: delete a server.</p></li>
<li><p>1: create a server.</p></li>
</ul>
</li>
<li><p><strong>&lt;param2&gt;</strong>: It means differently depending on the parameter <code class="docutils literal notranslate"><span class="pre">&lt;mode&gt;</span></code>:</p>
<ul>
<li><p>If <code class="docutils literal notranslate"><span class="pre">&lt;mode&gt;</span></code> is 1, <code class="docutils literal notranslate"><span class="pre">&lt;param2&gt;</span></code> represents the port number. Default: 333.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">&lt;mode&gt;</span></code> is 0, <code class="docutils literal notranslate"><span class="pre">&lt;param2&gt;</span></code> represents whether the server closes all connections. Default: 0.</p>
<blockquote>
<div><ul class="simple">
<li><p>0: shut down the server and keep existing connections.</p></li>
<li><p>1: shut down the server and close all connections.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
<li><p><strong>&lt;&quot;type&quot;&gt;</strong>: server type: “TCP”, “TCPv6”, “SSL”, or “SSLv6”. Default: “TCP”.</p></li>
<li><p><strong>&lt;CA enable&gt;</strong>:</p>
<ul class="simple">
<li><p>0: disable CA.</p></li>
<li><p>1: enable CA.</p></li>
</ul>
</li>
<li><p><strong>&lt;keepalive&gt;</strong>: It configures the <a class="reference external" href="https://man7.org/linux/man-pages/man7/socket.7.html#SO_KEEPALIVE">SO_KEEPALIVE</a> option for socket. Unit: second.</p>
<ul class="simple">
<li><p>Range: [0,7200].</p>
<ul>
<li><p>0: disable keep-alive function (default).</p></li>
<li><p>1 ~ 7200: enable keep-alive function. <a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_KEEPIDLE">TCP_KEEPIDLE</a> value is <strong>&lt;keepalive&gt;</strong>, <a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_KEEPINTVL">TCP_KEEPINTVL</a> value is 1, and <a class="reference external" href="https://man7.org/linux/man-pages/man7/tcp.7.html#TCP_KEEPCNT">TCP_KEEPCNT</a> value is 3.</p></li>
</ul>
</li>
<li><p>This parameter of this command is the same as the <code class="docutils literal notranslate"><span class="pre">&lt;keepalive&gt;</span></code> parameter of AT+CIPTCPOPT command. It always takes the value set later by either of the two commands. If it’s omitted or not set, the last configured value is used by default.
Setting a low keepalive value in low-power mode will result in increased power consumption.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>A TCP/SSL server can only be created when multiple connections are activated (AT+CIPMUX=1).</p></li>
<li><p>A server monitor will be created automatically when the server is created. Only one server can be created at most.</p></li>
<li><p>When a client is connected to the server, it will take up one connection and be assigned an ID.</p></li>
<li><p>Parameters <code class="docutils literal notranslate"><span class="pre">&lt;\&quot;type\&quot;&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;CA</span> <span class="pre">enable&gt;</span></code> must be omitted when delete a server.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">To</span> <span class="n">create</span> <span class="n">a</span> <span class="n">TCP</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSERVER</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">80</span>

<span class="o">//</span> <span class="n">To</span> <span class="n">create</span> <span class="n">an</span> <span class="n">SSL</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSERVER</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">443</span><span class="p">,</span><span class="s2">&quot;SSL&quot;</span><span class="p">,</span><span class="mi">1</span>

<span class="o">//</span> <span class="n">To</span> <span class="n">delete</span> <span class="n">an</span> <span class="n">server</span> <span class="ow">and</span> <span class="n">close</span> <span class="nb">all</span> <span class="n">clients</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSERVER</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cipservermaxconn">
<h3>AT+CIPSERVERMAXCONN<a class="headerlink" href="#at-cipservermaxconn" title="Link to this heading"></a></h3>
<p>Function: Query/set the maximum connections allowed by a server.</p>
<section id="id117">
<h4>Query command<a class="headerlink" href="#id117" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Obtain the maximum number of clients allowed to connect to the TCP/SSL server.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSERVERMAXCONN?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSERVERMAXCONN</span><span class="p">:</span><span class="o">&lt;</span><span class="n">num</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id118">
<h4>Set command<a class="headerlink" href="#id118" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the maximum number of clients allowed to connect to the TCP/SSL server.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSERVERMAXCONN</span><span class="o">=&lt;</span><span class="n">num</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;num&gt;</strong>: the maximum number of clients allowed to connect to the TCP/SSL server. Range: [1,5]. For how to change the upper limit of this range, please refer to the description of the <code class="docutils literal notranslate"><span class="pre">&lt;link</span> <span class="pre">ID&gt;</span></code> parameter of the AT+CIPSTART command.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>You should call the command <code class="docutils literal notranslate"><span class="pre">AT+CIPSERVERMAXCONN=&lt;num&gt;</span></code> before creating a server.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSERVERMAXCONN</span><span class="o">=</span><span class="mi">2</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSERVER</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">80</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cipsto">
<h3>AT+CIPSTO<a class="headerlink" href="#at-cipsto" title="Link to this heading"></a></h3>
<p>Function: Query/set the local TCP/SSL server timeout.</p>
<section id="id119">
<h4>Query command<a class="headerlink" href="#id119" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the local TCP/SSL server timeout.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSTO?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSTO</span><span class="p">:</span><span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id120">
<h4>Set command<a class="headerlink" href="#id120" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the local TCP/SSL server timeout.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSTO</span><span class="o">=&lt;</span><span class="n">time</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;time&gt;</strong>: local TCP/SSL server timeout. Unit: second. Range: [0,7200].</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>When a TCP/SSL client doesn’t communicate with the ST67W611M1 server within the <code class="docutils literal notranslate"><span class="pre">&lt;time&gt;</span></code> value, the server will terminate this connection.</p></li>
<li><p>If you set <code class="docutils literal notranslate"><span class="pre">&lt;time&gt;</span></code> to 0, the connection will never timeout. This configuration isn’t recommended.</p></li>
<li><p>When the client initiates a communication with the server or the server initiate a communication with the client within the set time, the timer will restart. After the timeout expires, the client is closed.</p></li>
<li><p>Setting this parameter while in low-power mode will lead to increased power draw.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSERVER</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">1001</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSTO</span><span class="o">=</span><span class="mi">10</span>
</pre></div>
</div>
</section>
</section>
<section id="at-savetranslink">
<h3>AT+SAVETRANSLINK<a class="headerlink" href="#at-savetranslink" title="Link to this heading"></a></h3>
<p>Function: Set whether to enter Wi-Fi passthrough mode on power-up.</p>
<section id="for-tcp-ssl-single-connection">
<h4>For TCP/SSL single connection<a class="headerlink" href="#for-tcp-ssl-single-connection" title="Link to this heading"></a></h4>
<section id="id121">
<h5>Set command<a class="headerlink" href="#id121" title="Link to this heading"></a></h5>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;remote host&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;type&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">keep</span> <span class="n">alive</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;mode&gt;</strong>:</p>
<ul>
<li><p>0: ST67W611M1 won’t enter Wi-Fi passthrough mode on power-up.</p></li>
<li><p>1: ST67W611M1 will enter Wi-Fi passthrough mode on power-up.</p></li>
</ul>
</li>
<li><p><strong>&lt;&quot;remote host&quot;&gt;</strong>: string parameter showing the IPv4 address or domain name of remote host.</p></li>
<li><p><strong>&lt;remote port&gt;</strong>: the remote port number.</p></li>
<li><p><strong>&lt;&quot;type&quot;&gt;</strong>: string parameter showing the type of transmission: “TCP”, “TCPv6”, “SSL”, or “SSLv6”. Default: “TCP”.</p></li>
<li><p><strong>&lt;keep alive&gt;</strong>: TCP keep-alive interval. Default: 0.</p>
<ul>
<li><p>0: disable the keep-alive function.</p></li>
<li><p>1 ~ 7200: detection interval. Unit: second.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This command will save the Wi-Fi passthrough mode configuration in the easyflash area. If <code class="docutils literal notranslate"><span class="pre">&lt;mode&gt;</span></code> is set to 1, ST67W611M1 device will enter the Wi-Fi passthrough mode in any subsequent power cycles. The configuration will take effect after ST67W611M1 reboots.</p></li>
<li><p>As long as the remote host and port are valid, the configuration will be saved in flash.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;192.168.6.110&quot;</span><span class="p">,</span><span class="mi">1002</span><span class="p">,</span><span class="s2">&quot;TCP&quot;</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;www.google.com&quot;</span><span class="p">,</span><span class="mi">443</span><span class="p">,</span><span class="s2">&quot;SSL&quot;</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;240e:3a1:2070:11c0:55ce:4e19:9649:b75&quot;</span><span class="p">,</span><span class="mi">8080</span><span class="p">,</span><span class="s2">&quot;TCPv6&quot;</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;240e:3a1:2070:11c0:55ce:4e19:9649:b75&quot;</span><span class="p">,</span><span class="mi">8080</span><span class="p">,</span><span class="s2">&quot;SSLv6&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="for-udp-transmission">
<h4>For UDP Transmission<a class="headerlink" href="#for-udp-transmission" title="Link to this heading"></a></h4>
<section id="id122">
<h5>Set command<a class="headerlink" href="#id122" title="Link to this heading"></a></h5>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;remote host&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">,[</span><span class="o">&lt;</span><span class="s2">&quot;type&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">local</span> <span class="n">port</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;mode&gt;</strong>:</p>
<ul>
<li><p>0: ST67W611M1 won’t enter Wi-Fi passthrough mode on power-up.</p></li>
<li><p>1: ST67W611M1 will enter Wi-Fi passthrough mode on power-up.</p></li>
</ul>
</li>
<li><p><strong>&lt;&quot;remote host&quot;&gt;</strong>: string parameter showing the IPv4 address or domain name of remote host.</p></li>
<li><p><strong>&lt;remote port&gt;</strong>: the remote port number.</p></li>
<li><p><strong>&lt;&quot;type&quot;&gt;</strong>: string parameter showing the type of transmission: “UDP” or “UDPv6”. Default: “TCP”.</p></li>
<li><p><strong>&lt;local port&gt;</strong>: local port when UDP Wi-Fi passthrough is enabled on power-up.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This command will save the Wi-Fi passthrough mode configuration in the easyflash area. If <code class="docutils literal notranslate"><span class="pre">&lt;mode&gt;</span></code> is set to 1, ST67W611M1 device will enter the Wi-Fi passthrough mode in any subsequent power cycles. The configuration will take effect after ST67W611M1 reboots.</p></li>
<li><p>As long as the remote host and port are valid, the configuration will be saved in flash.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;192.168.6.110&quot;</span><span class="p">,</span><span class="mi">1002</span><span class="p">,</span><span class="s2">&quot;UDP&quot;</span><span class="p">,</span><span class="mi">1005</span>
<span class="n">AT</span><span class="o">+</span><span class="n">SAVETRANSLINK</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;240e:3a1:2070:11c0:55ce:4e19:9649:b75&quot;</span><span class="p">,</span><span class="mi">8081</span><span class="p">,</span><span class="s2">&quot;UDPv6&quot;</span><span class="p">,</span><span class="mi">1005</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="at-cipsntpcfg">
<h3>AT+CIPSNTPCFG<a class="headerlink" href="#at-cipsntpcfg" title="Link to this heading"></a></h3>
<p>Function: Query/set the time zone and the SNTP server.</p>
<section id="id123">
<h4>Query command<a class="headerlink" href="#id123" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSNTPCFG?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSNTPCFG</span><span class="p">:</span><span class="o">&lt;</span><span class="n">enable</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">timezone</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">SNTP</span> <span class="n">server1</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">SNTP</span> <span class="n">server2</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">SNTP</span> <span class="n">server3</span><span class="o">&gt;</span><span class="p">]</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id124">
<h4>Set command<a class="headerlink" href="#id124" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSNTPCFG</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">timezone</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">SNTP</span> <span class="n">server1</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">SNTP</span> <span class="n">server2</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">SNTP</span> <span class="n">server3</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;enable&gt;</strong>: configure the SNTP server:</p>
<ul>
<li><p>1: the SNTP server is configured.</p></li>
<li><p>0: the SNTP server isn’t configured.</p></li>
</ul>
</li>
<li><p><strong>&lt;timezone&gt;</strong>: support the following two formats:</p>
<ul>
<li><p>The first format range is [-12,14]. It marks most of the time zones by offset from Coordinated Universal Time (UTC) in <strong>whole hours</strong> (<a class="reference external" href="https://en.wikipedia.org/wiki/UTC%E2%88%9212:00">UTC–12:00</a> to <a class="reference external" href="https://en.wikipedia.org/wiki/UTC%2B14:00">UTC+14:00</a>).</p></li>
<li><p>The second format is <code class="docutils literal notranslate"><span class="pre">UTC</span> <span class="pre">offset</span></code>. The <code class="docutils literal notranslate"><span class="pre">UTC</span> <span class="pre">offset</span></code> specifies the time value you must add to the UTC time to get a local time value. It has syntax like <code class="docutils literal notranslate"><span class="pre">[+|-][hh]mm</span></code>. This is negative if the local time zone is on the west of the Prime Meridian and positive if it’s on the east. The hour (hh) must be between -12 and 14, and the minute(mm) between 0 and 59. For example, if you want to set the timezone to New Zealand (Chatham Islands) which is in <code class="docutils literal notranslate"><span class="pre">UTC+12:45</span></code>, you should set the parameter <code class="docutils literal notranslate"><span class="pre">&lt;timezone&gt;</span></code> to <code class="docutils literal notranslate"><span class="pre">1245</span></code>. Please refer to <a class="reference external" href="https://en.wikipedia.org/wiki/Time_zone#List_of_UTC_offsets">UTC offset wiki</a> for more information.</p></li>
</ul>
</li>
<li><p><strong>[&lt;SNTP server1&gt;]</strong>: the first SNTP server.</p></li>
<li><p><strong>[&lt;SNTP server2&gt;]</strong>: the second SNTP server.</p></li>
<li><p><strong>[&lt;SNTP server3&gt;]</strong>: the third SNTP server.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If the three SNTP servers aren’t configured, the default server will be used.</p></li>
<li><p>For the Query command, <code class="docutils literal notranslate"><span class="pre">&lt;timezone&gt;</span></code> parameter in the response may be different from the <code class="docutils literal notranslate"><span class="pre">&lt;timezone&gt;</span></code> parameter in Set command. Because the <code class="docutils literal notranslate"><span class="pre">&lt;timezone&gt;</span></code> parameter supports the second <code class="docutils literal notranslate"><span class="pre">UTC</span> <span class="pre">offset</span></code> format, for example, set <code class="docutils literal notranslate"><span class="pre">AT+CIPSNTPCFG=1,015</span></code>, for Query command, ST67W611M1-AT ignores the leading zero of the <code class="docutils literal notranslate"><span class="pre">&lt;timezone&gt;</span></code> parameter, and the valid value is <code class="docutils literal notranslate"><span class="pre">15</span></code>. It doesn’t belong to the first format, so it’s parsed according to the second <code class="docutils literal notranslate"><span class="pre">UTC</span> <span class="pre">offset</span></code> format, that’s, <code class="docutils literal notranslate"><span class="pre">UTC+00:15</span></code>, that’s, <code class="docutils literal notranslate"><span class="pre">timezone</span></code> is 0 in the response.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Enable SNTP server, set timezone to New York of the United States (UTC–05:00)
AT+CIPSNTPCFG=1,-5,&quot;0.pool.ntp.org&quot;,&quot;time.google.com&quot;
or
AT+CIPSNTPCFG=1,-500,&quot;0.pool.ntp.org&quot;,&quot;time.google.com&quot;

// Enable SNTP server, set timezone to New Zealand (Chatham Islands, UTC+12:45)
AT+CIPSNTPCFG=1,1245,&quot;0.pool.ntp.org&quot;,&quot;time.google.com&quot;
</pre></div>
</div>
</section>
</section>
<section id="at-cipsntptime">
<h3>AT+CIPSNTPTIME<a class="headerlink" href="#at-cipsntptime" title="Link to this heading"></a></h3>
<p>Function: Query the SNTP time.</p>
<section id="id125">
<h4>Query command<a class="headerlink" href="#id125" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSNTPTIME?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSNTPTIME</span><span class="p">:</span><span class="o">&lt;</span><span class="n">asctime</span> <span class="n">style</span> <span class="n">time</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The asctime style time is defined at <a class="reference external" href="https://linux.die.net/man/3/asctime">asctime man page</a>.</p></li>
<li><p>When ST67W611M1 enters Light-sleep or Deep-sleep mode and then wakes up, the system time may become inaccurate. It’s recommended to resend the AT+CIPSNTPCFG command to obtain the new time from the NTP server.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWMODE=1
AT+CWJAP=&quot;AP_TEST&quot;,&quot;1234567890&quot;
AT+CIPSNTPCFG=1,-5,&quot;0.pool.ntp.org&quot;,&quot;time.google.com&quot;
AT+CIPSNTPTIME?
+CIPSNTPTIME:Tue Oct 19 17:47:56 2021

OK
</pre></div>
</div>
<p>or</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWMODE=1
AT+CWJAP=&quot;AP_TEST&quot;,&quot;1234567890&quot;
AT+CIPSNTPCFG=1,530
AT+CIPSNTPTIME?
+CIPSNTPTIME:Tue Oct 19 15:17:56 2021

OK
</pre></div>
</div>
</section>
</section>
<section id="at-cipsntpintv">
<h3>AT+CIPSNTPINTV<a class="headerlink" href="#at-cipsntpintv" title="Link to this heading"></a></h3>
<p>Function: Query/set the SNTP time synchronization interval.</p>
<section id="id126">
<h4>Query command<a class="headerlink" href="#id126" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSNTPINTV?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSNTPINTV</span><span class="p">:</span><span class="o">&lt;</span><span class="n">interval</span> <span class="n">second</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id127">
<h4>Set command<a class="headerlink" href="#id127" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSNTPINTV</span><span class="o">=&lt;</span><span class="n">interval</span> <span class="n">second</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;interval second&gt;</strong>: the SNTP time synchronization interval. Unit: second. Range: [15,4294967].</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>It configures interval for synchronization, which means that it sets interval how often ST67W611M1 connects to NTP servers to get new time.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPSNTPCFG</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="s2">&quot;0.pool.ntp.org&quot;</span><span class="p">,</span><span class="s2">&quot;time.google.com&quot;</span>

<span class="n">OK</span>

<span class="o">//</span> <span class="n">synchronize</span> <span class="n">SNTP</span> <span class="n">time</span> <span class="n">every</span> <span class="n">hour</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSNTPINTV</span><span class="o">=</span><span class="mi">3600</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cipreconnintv">
<h3>AT+CIPRECONNINTV<a class="headerlink" href="#at-cipreconnintv" title="Link to this heading"></a></h3>
<p>Function: Query/set the TCP/UDP/SSL reconnection Interval for the Wi-Fi passthrough mode.</p>
<section id="id128">
<h4>Query command<a class="headerlink" href="#id128" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the automatic connect interval for the Wi-Fi passthrough mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPRECONNINTV?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPRECONNINTV</span><span class="p">:</span><span class="o">&lt;</span><span class="n">interval</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id129">
<h4>Set command<a class="headerlink" href="#id129" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the automatic reconnecting interval when TCP/UDP/SSL transmission breaks in the Wi-Fi passthrough mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPRECONNINTV</span><span class="o">=&lt;</span><span class="n">interval</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;interval&gt;</strong>: the duration between automatic reconnections. Unit: 100 milliseconds. Default: 1. Range: [1,36000].</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The configuration changes will be saved in the easyflash area if AT+SYSSTORE=1 .</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPRECONNINTV</span><span class="o">=</span><span class="mi">10</span>
</pre></div>
</div>
</section>
</section>
<section id="at-ciprecvmode">
<h3>AT+CIPRECVMODE<a class="headerlink" href="#at-ciprecvmode" title="Link to this heading"></a></h3>
<p>Function: Query/set Socket Receiving Mode.</p>
<section id="id130">
<h4>Query command<a class="headerlink" href="#id130" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the socket receiving mode.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPRECVMODE?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPRECVMODE</span><span class="p">:</span><span class="o">&lt;</span><span class="n">mode</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id131">
<h4>Set command<a class="headerlink" href="#id131" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPRECVMODE</span><span class="o">=&lt;</span><span class="n">mode</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;mode&gt;</strong>: the receive mode of socket data. Default: 0.</p>
<blockquote>
<div><ul class="simple">
<li><p>0: active mode. ST67W611M1-AT will send all the received socket data instantly to the host MCU with the header “+IPD”. (The socket receive window is 2920 bytes by default. The maximum valid bytes sent to MCU is 2920 bytes each time.)</p></li>
<li><p>1: passive mode. ST67W611M1-AT will keep the received socket data in an internal buffer (socket receive window, 2920 bytes by default), and wait for the host MCU to read. If the buffer is full, the socket transmission will be blocked for TCP/SSL connections, or data will be lost for UDP connections.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>The configuration can not be used in the Wi-Fi passthrough mode. If it’s a UDP transmission in passive mode, data will be lost when the buffer is full.</p></li>
<li><p>When ST67W611M1-AT receives socket data in passive mode, it will prompt the following messages in different scenarios:</p>
<blockquote>
<div><p>For multiple connections mode (AT+CIPMUX=1), the message is +IPD:&lt;link ID&gt;,&lt;len&gt;.</p>
<p>For single connection mode (AT+CIPMUX=0), the message is +IPD:&lt;len&gt;.</p>
</div></blockquote>
</li>
<li><p>&lt;len&gt; is the total length of socket data in the buffer.</p></li>
<li><p>You should read data by running AT+CIPRECVDATA once there is a +IPD reported. Otherwise, the next +IPD won’t be reported to the host MCU until the previous +IPD has been read.</p></li>
<li><p>When the connection is disconnected, the cache will be cleared.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPRECVMODE</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
</section>
</section>
<section id="at-ciprecvdata">
<h3>AT+CIPRECVDATA<a class="headerlink" href="#at-ciprecvdata" title="Link to this heading"></a></h3>
<p>Obtain socket data in passive receiving mode.</p>
<section id="id132">
<h4>Set command<a class="headerlink" href="#id132" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPRECVDATA</span><span class="o">=&lt;</span><span class="nb">len</span><span class="o">&gt;</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connections</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPRECVDATA</span><span class="o">=&lt;</span><span class="n">link_id</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="nb">len</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPRECVDATA</span><span class="p">:</span><span class="o">&lt;</span><span class="n">actual_len</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">data</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;mode&gt;</strong>: the receive mode of socket data. Default: 0.</p></li>
<li><p><strong>&lt;link_id&gt;</strong>: connection ID in multiple connections mode.</p></li>
<li><p><strong>&lt;len&gt;</strong>: the max value is 0x7fffffff. If the actual length of the received data is less than len, the actual length will be returned.</p></li>
<li><p><strong>&lt;actual_len&gt;</strong>: length of the data you actually obtain.</p></li>
<li><p><strong>&lt;data&gt;</strong>: the data you want to obtain.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPRECVMODE</span><span class="o">=</span><span class="mi">1</span>

<span class="o">//</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="k">if</span> <span class="n">host</span> <span class="n">MCU</span> <span class="n">gets</span> <span class="n">a</span> <span class="n">message</span> <span class="n">of</span> <span class="n">receiving</span> <span class="mi">100</span><span class="o">-</span><span class="n">byte</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">connection</span> <span class="k">with</span> <span class="n">No</span><span class="mf">.0</span><span class="p">,</span>
<span class="o">//</span> <span class="n">the</span> <span class="n">message</span> <span class="n">will</span> <span class="n">be</span> <span class="s2">&quot;+IPD:0,100&quot;</span><span class="o">.</span>
<span class="o">//</span> <span class="n">Then</span> <span class="n">you</span> <span class="n">can</span> <span class="n">read</span> <span class="n">those</span> <span class="mi">100</span><span class="o">-</span><span class="n">byte</span> <span class="n">data</span> <span class="n">by</span> <span class="n">using</span> <span class="n">the</span> <span class="n">command</span> <span class="n">below</span><span class="o">.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPRECVDATA</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span>
</pre></div>
</div>
</section>
</section>
<section id="at-ciprecvlen">
<h3>AT+CIPRECVLEN<a class="headerlink" href="#at-ciprecvlen" title="Link to this heading"></a></h3>
<p>Function: Obtain Socket Data Length in Passive Receiving Mode.</p>
<section id="id133">
<h4>Query command<a class="headerlink" href="#id133" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the length of the entire data buffered for the connection.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPRECVLEN?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="o">+</span><span class="n">CIPRECVLEN</span><span class="p">:</span><span class="o">&lt;</span><span class="n">data</span> <span class="n">length</span> <span class="n">of</span> <span class="n">link</span><span class="o">&gt;</span>

<span class="n">OK</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connections</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="o">+</span><span class="n">CIPRECVLEN</span><span class="p">:</span><span class="o">&lt;</span><span class="n">data</span> <span class="n">length</span> <span class="n">of</span> <span class="n">link0</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">data</span> <span class="n">length</span> <span class="n">of</span> <span class="n">link1</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">data</span> <span class="n">length</span> <span class="n">of</span> <span class="n">link2</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">data</span> <span class="n">length</span> <span class="n">of</span> <span class="n">link3</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">data</span> <span class="n">length</span> <span class="n">of</span> <span class="n">link4</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>For SSL connections, the data length returned by ST67W611M1-AT may be less than the actual data length.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPRECVLEN?

// Multiple connections: (AT+CIPMUX=1)
+CIPRECVLEN:100,0,0,0,0,

// Single connection: (AT+CIPMUX=0)
+CIPRECVLEN:100

OK
</pre></div>
</div>
</section>
</section>
<section id="at-ping">
<h3>AT+PING<a class="headerlink" href="#at-ping" title="Link to this heading"></a></h3>
<p>Function: Ping the remote host.</p>
<section id="id134">
<h4>Set command<a class="headerlink" href="#id134" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Ping the remote host.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">PING</span><span class="o">=&lt;</span><span class="s2">&quot;host&quot;</span><span class="o">&gt;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">PING</span><span class="o">=&lt;</span><span class="s2">&quot;host&quot;</span><span class="o">&gt;</span><span class="p">,[</span><span class="o">&lt;</span><span class="nb">len</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">count</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">interval</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">timeout</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">PING</span><span class="p">:</span><span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p>or</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">PING</span><span class="p">:</span><span class="n">TIMEOUT</span>   <span class="o">//</span> <span class="n">AT</span> <span class="n">returns</span> <span class="n">this</span> <span class="n">response</span> <span class="n">only</span> <span class="n">when</span> <span class="n">the</span> <span class="n">domain</span> <span class="n">name</span> <span class="n">resolution</span> <span class="n">fails</span> <span class="ow">or</span> <span class="n">ping</span> <span class="n">times</span> <span class="n">out</span>

<span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;&quot;host&quot;&gt;</strong>: String parameter showing the host IPv4 or IPV6 address or domain name.</p></li>
<li><p><strong>&lt;len&gt;</strong>: the length of the ping packet. Unit: byte. Range: (0,65535).</p></li>
<li><p><strong>&lt;count&gt;</strong>: the count of the ping packet.</p></li>
<li><p><strong>&lt;interval&gt;</strong>: the interval between ping packets. Unit: millisecond. Range: (0,65535).</p></li>
<li><p><strong>&lt;timeout&gt;</strong>: the maximum waiting time for a ping response (per packet). Unit: millisecond. Range: (0,65535).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If the remote host is a domain name string, ping will first resolve the domain name (IPv4 address preferred) from DNS (domain name server) and then ping the remote IP address.</p></li>
<li><p>Timeout must be greater than or equal to Interval. If Timeout is smaller than Interval, it will be automatically adjusted to be equal to Interval.</p></li>
<li><p>The default value of Interval is 1000 (milliseconds), and the default value of Timeout is also 1000 (milliseconds).</p></li>
</ul>
<p>For example:</p>
<ul class="simple">
<li><p>AT+PING=”192.168.1.1”,64,8,,100 → AT+PING=”192.168.1.1”,64,8,1000,1000
(Timeout is set to 100, which is smaller than the default Interval of 1000, so Timeout is adjusted to 1000);</p></li>
<li><p>AT+PING=”192.168.1.1”,64,8,2000 → AT+PING=”192.168.1.1”,64,8,2000,2000
(Interval is set to 2000, which is larger than the default Timeout of 1000, so Timeout is adjusted to 2000).</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">PING</span><span class="o">=</span><span class="s2">&quot;192.168.1.1&quot;</span>
<span class="n">AT</span><span class="o">+</span><span class="n">PING</span><span class="o">=</span><span class="s2">&quot;www.google.com&quot;</span>
<span class="n">AT</span><span class="o">+</span><span class="n">PING</span><span class="o">=</span><span class="s2">&quot;192.168.1.1&quot;</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">500</span>

<span class="o">//</span> <span class="n">China</span> <span class="n">Future</span> <span class="n">Internet</span> <span class="n">Engineering</span> <span class="n">Center</span>
<span class="n">AT</span><span class="o">+</span><span class="n">PING</span><span class="o">=</span><span class="s2">&quot;240c::6666&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="at-cipevt">
<h3>AT+CIPEVT<a class="headerlink" href="#at-cipevt" title="Link to this heading"></a></h3>
<p>Function: Turn on or off the event message notification prefixed with +CIP.</p>
<section id="id135">
<h4>Set command<a class="headerlink" href="#id135" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Turn on or off the event message notification prefixed with +CIP.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CIPEVT</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPEVT</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;enable&gt;</strong>: Turn on or off the event message notification prefixed with +CIP.</p>
<blockquote>
<div><ul class="simple">
<li><p>1: Enable printing of “+CIP” events.</p></li>
<li><p>0: Disable printing of “+CIP” events.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="id136">
<h4>Query command<a class="headerlink" href="#id136" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query event message notifications with prefix +CIP.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPEVT?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPEVT</span><span class="p">:</span><span class="o">&lt;</span><span class="n">enable</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-cwevt">
<h3>AT+CWEVT<a class="headerlink" href="#at-cwevt" title="Link to this heading"></a></h3>
<p>Function: Turn on or off the event message notification prefixed with +CW.</p>
<section id="id137">
<h4>Set command<a class="headerlink" href="#id137" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Turn on or off the event message notification prefixed with +CW.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWEVT</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWEVT</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;enable&gt;</strong>: Turn on or off the event message notification prefixed with +CW.</p>
<blockquote>
<div><ul class="simple">
<li><p>1: Enable printing of “+CW” events.</p></li>
<li><p>0: Disable printing of “+CW” events.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="id138">
<h4>Query command<a class="headerlink" href="#id138" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query event message notifications with prefix +CW.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CWEVT?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CWEVT</span><span class="p">:</span><span class="o">&lt;</span><span class="n">enable</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-cipsslcconf">
<h3>AT+CIPSSLCCONF<a class="headerlink" href="#at-cipsslcconf" title="Link to this heading"></a></h3>
<p>Function: Query/set SSL clients.</p>
<section id="id139">
<h4>Query command<a class="headerlink" href="#id139" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the configuration of each connection where the ST67W611M1 runs as an SSL client.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSSLCCONF?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSSLCCONF</span><span class="p">:</span><span class="o">&lt;</span><span class="n">linkid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">auth_mode</span><span class="o">&gt;</span><span class="p">,</span><span class="s2">&quot;&lt;cert_name&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;key_name&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;ca_name&gt;&quot;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id140">
<h4>Set command<a class="headerlink" href="#id140" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCCONF</span><span class="o">=&lt;</span><span class="n">auth_mode</span><span class="o">&gt;</span><span class="p">[,</span><span class="s2">&quot;&lt;cert_name&gt;&quot;</span><span class="p">][,</span><span class="s2">&quot;&lt;key_name&gt;&quot;</span><span class="p">][,</span><span class="s2">&quot;&lt;ca_name&gt;&quot;</span><span class="p">]</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connections</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCCONF</span><span class="o">=&lt;</span><span class="n">linkid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">auth_mode</span><span class="o">&gt;</span><span class="p">[,</span><span class="s2">&quot;&lt;cert_name&gt;&quot;</span><span class="p">][,</span><span class="s2">&quot;&lt;key_name&gt;&quot;</span><span class="p">][,</span><span class="s2">&quot;&lt;ca_name&gt;&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;linkid&gt;</strong>: ID of the connection (0~4), used for multiple connections.</p></li>
<li><p><strong>&lt;auth_mode&gt;</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p>0: no authentication. In this case &lt;pki_number&gt; and &lt;ca_number&gt; aren’t required.</p></li>
<li><p>1: the client provides the client certificate for the server to verify.</p></li>
<li><p>2: the client loads CA certificate to verify the server’s certificate.</p></li>
<li><p>3: mutual authentication.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;cert_name&gt;</strong>: The file name of the certificate.</p></li>
<li><p><strong>&lt;key_name&gt;</strong>: The file name of the private key.</p></li>
<li><p><strong>&lt;ca_name&gt;</strong>: The file name of CA used by the client to verify the server.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCCONF</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;client_1.crt&quot;</span><span class="p">,</span><span class="s2">&quot;client_1.key&quot;</span><span class="p">,</span><span class="s2">&quot;ca_1.crt&quot;</span>

<span class="o">//</span> <span class="n">No</span> <span class="n">auth</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCCONF</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>

<span class="o">//</span> <span class="n">Client</span> <span class="n">auth</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCCONF</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;client_1.crt&quot;</span><span class="p">,</span><span class="s2">&quot;client_1.key&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span>

<span class="o">//</span> <span class="n">Server</span> <span class="n">auth</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCCONF</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;ca_1.crt&quot;</span>

<span class="o">//</span> <span class="n">Both</span> <span class="n">auth</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCCONF</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;client_1.crt&quot;</span><span class="p">,</span><span class="s2">&quot;client_1.key&quot;</span><span class="p">,</span><span class="s2">&quot;ca_1.crt&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If you want this configuration to take effect immediately, run this command before establishing an SSL connection.</p></li>
<li><p>When downloading AT firmware, it’s necessary to download the littlefs file system, and the default file system is mounted to /lfs.</p></li>
<li><p>If you need to dynamically modify the certificate content, you can refer to the command <a class="reference internal" href="#at-fs">AT+FS</a>.</p></li>
<li><p>If &lt;auth_mode&gt; is configured to 2 or 3, in order to check the server certificate validity period,  make sure ST67W611M1 has obtained the current time before sending the AT+CIPSTART command. (You can send AT+CIPSNTPCFG command to configure SNTP and obtain the current time, and send AT+CIPSNPTIME? command to query the current time.)</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cipsslsconf">
<h3>AT+CIPSSLSCONF<a class="headerlink" href="#at-cipsslsconf" title="Link to this heading"></a></h3>
<p>Function: Query/set SSL Server.</p>
<section id="id141">
<h4>Query command<a class="headerlink" href="#id141" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the configuration where the ST67W611M1 runs as an SSL server.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSSLSCONF?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSSLSCONF</span><span class="p">:</span><span class="o">&lt;</span><span class="n">auth_mode</span><span class="o">&gt;</span><span class="p">,</span><span class="s2">&quot;&lt;cert_name&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;key_name&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;ca_name&gt;&quot;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id142">
<h4>Set command<a class="headerlink" href="#id142" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLSCONF</span><span class="o">=&lt;</span><span class="n">auth_mode</span><span class="o">&gt;</span><span class="p">[,</span><span class="s2">&quot;&lt;cert_name&gt;&quot;</span><span class="p">][,</span><span class="s2">&quot;&lt;key_name&gt;&quot;</span><span class="p">][,</span><span class="s2">&quot;&lt;ca_name&gt;&quot;</span><span class="p">]</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connections</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLSCONF</span><span class="o">=&lt;</span><span class="n">linkid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">auth_mode</span><span class="o">&gt;</span><span class="p">[,</span><span class="s2">&quot;&lt;cert_name&gt;&quot;</span><span class="p">][,</span><span class="s2">&quot;&lt;key_name&gt;&quot;</span><span class="p">][,</span><span class="s2">&quot;&lt;ca_name&gt;&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;linkid&gt;</strong>: ID of the connection (0~4), used for multiple connections.</p></li>
<li><p><strong>&lt;auth_mode&gt;</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p>0: no authentication. In this case &lt;pki_number&gt; and &lt;ca_number&gt; aren’t required.</p></li>
<li><p>1: The server loads the CA certificate to verify the certificate provided by the client.</p></li>
<li><p>2: The server provides its own certificate for the client to verify.</p></li>
<li><p>3: mutual authentication.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;cert_name&gt;</strong>: The file name of the certificate.</p></li>
<li><p><strong>&lt;key_name&gt;</strong>: The file name of the private key.</p></li>
<li><p><strong>&lt;ca_name&gt;</strong>: The file name of the CA certificate used by the server to verify the client</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLSCONF</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;server_1.crt&quot;</span><span class="p">,</span><span class="s2">&quot;server_1.key&quot;</span><span class="p">,</span><span class="s2">&quot;ca_1.crt&quot;</span>

<span class="o">//</span> <span class="n">No</span> <span class="n">auth</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLSCONF</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>

<span class="o">//</span> <span class="n">Client</span> <span class="n">auth</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLSCONF</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;ca_1.crt&quot;</span>

<span class="o">//</span> <span class="n">Server</span> <span class="n">auth</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLSCONF</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;server_1.crt&quot;</span><span class="p">,</span><span class="s2">&quot;server_1.key&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span>

<span class="o">//</span> <span class="n">Both</span> <span class="n">auth</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLSCONF</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s2">&quot;server_1.crt&quot;</span><span class="p">,</span><span class="s2">&quot;server_1.key&quot;</span><span class="p">,</span><span class="s2">&quot;ca_1.crt&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If you want this configuration to take effect immediately, run this command before starting the SSL server.</p></li>
<li><p>When downloading the AT firmware, it’s necessary to download the littlefs file system, and the default file system is mounted to /lfs.</p></li>
<li><p>If you need to dynamically modify the certificate content, you can refer to the command <a class="reference internal" href="#at-fs">AT+FS</a> (commands related to file system operations).</p></li>
<li><p>If &lt;auth_mode&gt; is configured to 1 or 3 (which require verifying the client’s certificate), to ensure the validity period of the client’s certificate can be checked properly, make sure the ST67W611M1 device has obtained the current time before starting the SSL server. (You can send the AT+CIPSNTPCFG command to configure the SNTP protocol and obtain the network time, and send the AT+CIPSNPTIME? command to query the device’s current time.)</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cipsslcsni">
<h3>AT+CIPSSLCSNI<a class="headerlink" href="#at-cipsslcsni" title="Link to this heading"></a></h3>
<p>Function: Query/set SSL Client Server Name Indication (SNI).</p>
<section id="id143">
<h4>Query command<a class="headerlink" href="#id143" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the SNI configuration of each connection.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Single connection: (AT+CIPMUX=0)
AT+CIPSSLCSNI?

// Multiple connections: (AT+CIPMUX=1)
AT+CIPSSLCSNI=&lt;linkid&gt;?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSSLCSNI</span><span class="p">:</span><span class="o">&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;sni&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id144">
<h4>Set command<a class="headerlink" href="#id144" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCSNI</span><span class="o">=&lt;</span><span class="s2">&quot;sni&quot;</span><span class="o">&gt;</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connections</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCSNI</span><span class="o">=&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;sni&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;linkid&gt;</strong>: ID of the connection (0~4), used for multiple connections.</p></li>
<li><p><strong>&lt;”sni”&gt;</strong>: the Server Name Indication in ClientHello, this parameter is used to verify the Common Name in the certificate sent by the server. The maximum length of sni is 64 bytes.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If you want this configuration to take effect immediately, run this command before establishing an SSL connection.</p></li>
<li><p>When downloading AT firmware, it’s necessary to download the romfs file system, and the default file system is mounted to /romfs.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cipsslcalpn">
<h3>AT+CIPSSLCALPN<a class="headerlink" href="#at-cipsslcalpn" title="Link to this heading"></a></h3>
<p>Function: Query/set SSL Client Application Layer Protocol Negotiation (ALPN).</p>
<section id="id145">
<h4>Query command<a class="headerlink" href="#id145" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the ALPN configuration of each connection where the ST67W611M1 runs as an SSL client.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+CIPSSLCALPN?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSSLCALPN</span><span class="p">:</span><span class="o">&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">]</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id146">
<h4>Set command<a class="headerlink" href="#id146" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCALPN</span><span class="o">=&lt;</span><span class="n">counts</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">]</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connections</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCALPN</span><span class="o">=&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">counts</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;linkid&gt;</strong>: ID of the connection (0~4), used for multiple connections.</p></li>
<li><p><strong>&lt;counts&gt;</strong>: the number of ALPNs. Range: [0,5].</p>
<blockquote>
<div><ul class="simple">
<li><p>0: clean the ALPN configuration.</p></li>
<li><p>[1,5]: set the ALPN configuration.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;”alpn”&gt;</strong>: A string parameter showing the ALPN in ClientHello. The maximum length of alpn is limited by the command length.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If you want this configuration to take effect immediately, run this command before establishing an SSL connection.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cipsslcpsk">
<h3>AT+CIPSSLCPSK<a class="headerlink" href="#at-cipsslcpsk" title="Link to this heading"></a></h3>
<p>Function: Query/set SSL client pre-shared key (psk) in string format.</p>
<section id="id147">
<h4>Query command<a class="headerlink" href="#id147" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the PSK configuration of each connection where the ST67W611M1 runs as an SSL client.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Single connection: (AT+CIPMUX=0)
AT+CIPSSLCPSK?

// Multiple connections: (AT+CIPMUX=1)
AT+CIPSSLCPSK=&lt;linkid&gt;?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSSLCPSK</span><span class="p">:</span><span class="o">&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;psk&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;hint&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id148">
<h4>Set command<a class="headerlink" href="#id148" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCPSK</span><span class="o">=&lt;</span><span class="s2">&quot;psk&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;hint&quot;</span><span class="o">&gt;</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connections</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCPSK</span><span class="o">=&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;psk&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;hint&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;linkid&gt;</strong>: ID of the connection (0~4), used for multiple connections.</p></li>
<li><p><strong>&lt;”psk”&gt;</strong>: The pre-shared key in string format. Maximum length: 32. Please use <a class="reference internal" href="#at-cipsslcpskhex">AT+CIPSSLCPSKHEX</a> command if your &lt;”psk”&gt; parameter contains 0 characters.</p></li>
<li><p><strong>&lt;”hint”&gt;</strong>: The pre-shared key identity. Maximum length: 32.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If you want this configuration to take effect immediately, run this command before establishing an SSL connection.</p></li>
</ul>
</div>
</section>
</section>
<section id="at-cipsslcpskhex">
<h3>AT+CIPSSLCPSKHEX<a class="headerlink" href="#at-cipsslcpskhex" title="Link to this heading"></a></h3>
<p>Function: Query/set SSL client pre-shared key (psk) in hexadecimal format.</p>
<section id="id149">
<h4>Query command<a class="headerlink" href="#id149" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the PSK configuration in hexadecimal format of each connection where the ST67W611M1 runs as an SSL client.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Single connection: (AT+CIPMUX=0)
AT+CIPSSLCPSKHEX?

// Multiple connections: (AT+CIPMUX=1)
AT+CIPSSLCPSKHEX=&lt;linkid&gt;?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">CIPSSLCPSKHEX</span><span class="p">:</span><span class="o">&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;psk&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;hint&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id150">
<h4>Set command<a class="headerlink" href="#id150" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCPSKHEX</span><span class="o">=&lt;</span><span class="s2">&quot;psk&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;hint&quot;</span><span class="o">&gt;</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connections</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCPSKHEX</span><span class="o">=&lt;</span><span class="n">link</span> <span class="n">ID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;psk&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;hint&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;linkid&gt;</strong>: ID of the connection (0~4), used for multiple connections.</p></li>
<li><p><strong>&lt;”psk”&gt;</strong>: The pre-shared key in string format. Maximum length: 32. Please use <a class="reference internal" href="#at-cipsslcpskhex">AT+CIPSSLCPSKHEX</a> command if your &lt;”psk”&gt; parameter contains 0 characters.</p></li>
<li><p><strong>&lt;”hint”&gt;</strong>: The pre-shared key identity. Maximum length: 32.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Similar to the <a class="reference internal" href="#at-cipsslcpsk">AT+CIPSSLCPSK</a> command, this command also sets or queries the SSL Client PSK, but its &lt;”psk”&gt; is in hexadecimal format rather than in string format. So, 0 in the &lt;”psk”&gt; parameter means 00.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Single</span> <span class="n">connection</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">pre</span><span class="o">-</span><span class="n">shared</span> <span class="n">key</span> <span class="ow">is</span> <span class="s2">&quot;psk&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">-</span><span class="n">shared</span> <span class="n">key</span> <span class="n">identity</span> <span class="ow">is</span> <span class="s2">&quot;myhint&quot;</span><span class="o">.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCPSKHEX</span><span class="o">=</span><span class="s2">&quot;70736b&quot;</span><span class="p">,</span><span class="s2">&quot;myhint&quot;</span>

<span class="o">//</span> <span class="n">Multiple</span> <span class="n">connections</span><span class="p">:</span> <span class="p">(</span><span class="n">AT</span><span class="o">+</span><span class="n">CIPMUX</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">pre</span><span class="o">-</span><span class="n">shared</span> <span class="n">key</span> <span class="ow">is</span> <span class="s2">&quot;psk&quot;</span><span class="p">,</span> <span class="n">pre</span><span class="o">-</span><span class="n">shared</span> <span class="n">key</span> <span class="n">identity</span> <span class="ow">is</span> <span class="s2">&quot;myhint&quot;</span><span class="o">.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">CIPSSLCPSKHEX</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;70736b&quot;</span><span class="p">,</span><span class="s2">&quot;myhint&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="at-iperf">
<h3>AT+IPERF<a class="headerlink" href="#at-iperf" title="Link to this heading"></a></h3>
<p>Function: Test throughput of the ST67W611M1 in standalone mode.</p>
<section id="id151">
<h4>Set command<a class="headerlink" href="#id151" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">IPERF</span><span class="o">=&lt;</span><span class="s2">&quot;direct&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;type&quot;</span><span class="o">&gt;</span><span class="p">,[</span><span class="o">&lt;</span><span class="s2">&quot;ipaddr&quot;</span><span class="o">&gt;</span><span class="p">],[</span><span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span><span class="p">],[</span><span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;”direct”&gt;</strong>: The direction of iperf, “TX” or “RX”.</p></li>
<li><p><strong>&lt;”type”&gt;</strong>: The type of connection, “TCP” or “UDP”.</p></li>
<li><p><strong>&lt;”ipaddr”&gt;</strong>: Target ip address. If acting as a client, this parameter must be set.</p></li>
<li><p><strong>&lt;”time”&gt;</strong>: The duration of iperf. Default value 10.(Unit: seconds)</p></li>
<li><p><strong>&lt;”port”&gt;</strong>: The port number of iperf. Default value 5001.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">IPERF</span><span class="o">=</span><span class="s2">&quot;RX&quot;</span><span class="p">,</span><span class="s2">&quot;TCP&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">IPERF</span><span class="o">=</span><span class="s2">&quot;TX&quot;</span><span class="p">,</span><span class="s2">&quot;TCP&quot;</span><span class="p">,</span><span class="s2">&quot;192.168.1.2&quot;</span><span class="p">,</span><span class="mi">1000</span>

<span class="n">AT</span><span class="o">+</span><span class="n">IPERF</span><span class="o">=</span><span class="s2">&quot;TX&quot;</span><span class="p">,</span><span class="s2">&quot;TCP&quot;</span><span class="p">,</span><span class="s2">&quot;192.168.1.2&quot;</span><span class="p">,</span><span class="mi">1000</span><span class="p">,</span><span class="mi">5001</span>
</pre></div>
</div>
</section>
</section>
<section id="at-iperfstop">
<h3>AT+IPERFSTOP<a class="headerlink" href="#at-iperfstop" title="Link to this heading"></a></h3>
<p>Function: Stop test throughput of the ST67W611M1.</p>
<section id="id152">
<h4>Set command<a class="headerlink" href="#id152" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">IPERFSTOP</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">IPERF</span><span class="o">=</span><span class="s2">&quot;TX&quot;</span><span class="p">,</span><span class="s2">&quot;TCP&quot;</span><span class="p">,</span><span class="s2">&quot;192.168.1.2&quot;</span><span class="p">,</span><span class="mi">1000</span>

<span class="n">AT</span><span class="o">+</span><span class="n">IPERFSTOP</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
<section id="mqtt-at-commands">
<h1>MQTT AT commands<a class="headerlink" href="#mqtt-at-commands" title="Link to this heading"></a></h1>
<table class="docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Instruction</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#at-mqttusercfg">AT+MQTTUSERCFG</a></p></td>
<td><p>Get/set MQTT user configuration</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-mqttclientid">AT+MQTTCLIENTID</a></p></td>
<td><p>Get/set MQTT client ID</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-mqttusername">AT+MQTTUSERNAME</a></p></td>
<td><p>Get/set MQTT username</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-mqttpassword">AT+MQTTPASSWORD</a></p></td>
<td><p>Get/set MQTT password</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-mqttconncfg">AT+MQTTCONNCFG</a></p></td>
<td><p>Get/set configuration of MQTT connection</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-mqttalpn">AT+MQTTALPN</a></p></td>
<td><p>Get/set MQTT Application Layer Protocol Negotiation (ALPN)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-mqttsni">AT+MQTTSNI</a></p></td>
<td><p>Get/set MQTT Server Name Indication (SNI)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-mqttconn">AT+MQTTCONN</a></p></td>
<td><p>Connect to MQTT Brokers</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-mqttpub">AT+MQTTPUB</a></p></td>
<td><p>Publish MQTT Messages in string</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-mqttpubraw">AT+MQTTPUBRAW</a></p></td>
<td><p>Publish long MQTT messages</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-mqttsub">AT+MQTTSUB</a></p></td>
<td><p>Subscribe to MQTT topics</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-mqttunsub">AT+MQTTUNSUB</a></p></td>
<td><p>Unsubscribe from MQTT topics</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-mqttclean">AT+MQTTCLEAN</a></p></td>
<td><p>Close MQTT connections</p></td>
</tr>
</tbody>
</table>
<section id="mqtt-at-command-description">
<h2>MQTT AT command description<a class="headerlink" href="#mqtt-at-command-description" title="Link to this heading"></a></h2>
<section id="at-mqttusercfg">
<h3>AT+MQTTUSERCFG<a class="headerlink" href="#at-mqttusercfg" title="Link to this heading"></a></h3>
<p>Get/set MQTT user configuration.</p>
<section id="id153">
<h4>Query command<a class="headerlink" href="#id153" title="Link to this heading"></a></h4>
<p>Query MQTT user configuration.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+MQTTUSERCFG?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTTUSERCFG</span><span class="p">:</span><span class="o">&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">scheme</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;client_id&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;username&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;password&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;cert_file&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;key_file&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;ca_file&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id154">
<h4>Set command<a class="headerlink" href="#id154" title="Link to this heading"></a></h4>
<p>Set MQTT user configuration.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTUSERCFG</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">scheme</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;client_id&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;username&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;password&quot;</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;cert_file&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;key_file&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;ca_file&quot;</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;LinkID&gt;</strong>: currently only supports link ID 0.</p></li>
<li><p><strong>&lt;scheme&gt;</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p>0: MQTT over TCP.</p></li>
<li><p>1: MQTT over TLS (no certificate verify).</p></li>
<li><p>2: MQTT over TLS (verify server certificate).</p></li>
<li><p>3: MQTT over TLS (provide client certificate).</p></li>
<li><p>4: MQTT over TLS (verify server certificate and provide client certificate).</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;client_id&gt;</strong>: MQTT client ID. Maximum length: 23 bytes.</p></li>
<li><p><strong>&lt;username&gt;</strong>: The username to login to the MQTT broker. Maximum length: 128 bytes.</p></li>
<li><p><strong>&lt;password&gt;</strong>: The password to login to the MQTT broker. Maximum length: 128 bytes.</p></li>
<li><p><strong>&lt;”cert_file”&gt;</strong>: The file name of the certificate.</p></li>
<li><p><strong>&lt;”key_file”&gt;</strong>: The file name of the private key.</p></li>
<li><p><strong>&lt;”ca_file”&gt;</strong>: The file name of CA used by the client to verify the server.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The length of the entire AT command should be less than 256 bytes.</p></li>
<li><p>If &lt;scheme&gt; is configured to 3, 5, 8, or 10, in order to check the server certificate validity period, please make sure ST67W611M1 has obtained the current time before sending the AT+MQTTCONN command. (You can send AT+CIPSNTPCFG command to configure SNTP and obtain the current time, and send AT+CIPSNPTIME? command to query the current time.)</p></li>
</ul>
</div>
</section>
</section>
<section id="at-mqttclientid">
<h3>AT+MQTTCLIENTID<a class="headerlink" href="#at-mqttclientid" title="Link to this heading"></a></h3>
<p>Get/set MQTT client ID.</p>
<section id="id155">
<h4>Query command<a class="headerlink" href="#id155" title="Link to this heading"></a></h4>
<p>Query MQTT client ID.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+MQTTCLIENTID?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTTCLIENTID</span><span class="p">:</span><span class="o">&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;client_id&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The maximum length of the Query command doesn’t exceed 128 bytes (limited to AT length).</p></li>
</ul>
</div>
</section>
<section id="id156">
<h4>Set command<a class="headerlink" href="#id156" title="Link to this heading"></a></h4>
<p>Set MQTT client ID.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTLONGCLIENTID</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>This response indicates that AT is ready for receiving MQTT Client ID. You should enter the Client ID, and when the Client ID length reaches the &lt;length&gt; value, the system returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;LinkID&gt;</strong>: currently only supports link ID 0.</p></li>
<li><p><strong>&lt;length&gt;</strong>: MQTT client ID length. Range: [1,23].</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>The command AT+MQTTUSERCFG can also set MQTT client ID. The differences between the two commands include:</p>
<blockquote>
<div><ul class="simple">
<li><p>You can use AT+MQTTLONGCLIENTID to set a relatively long client ID since there is a limitation on the length of the AT+MQTTUSERCFG command.</p></li>
<li><p>You should set AT+MQTTLONGCLIENTID after setting the AT+MQTTUSERCFG command.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</section>
</section>
<section id="at-mqttusername">
<h3>AT+MQTTUSERNAME<a class="headerlink" href="#at-mqttusername" title="Link to this heading"></a></h3>
<p>Get/set MQTT username.</p>
<section id="id157">
<h4>Query command<a class="headerlink" href="#id157" title="Link to this heading"></a></h4>
<p>Query MQTT username.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+MQTTUSERNAME?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTTUSERNAME</span><span class="p">:</span><span class="o">&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;user_name&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The maximum length of the Query command doesn’t exceed 128 bytes (limited to AT length).</p></li>
</ul>
</div>
</section>
<section id="id158">
<h4>Set command<a class="headerlink" href="#id158" title="Link to this heading"></a></h4>
<p>Set MQTT username.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTUSERNAME</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>This response indicates that AT is ready for receiving MQTT username. You should enter the MQTT username, and when the MQTT username length reaches the &lt;length&gt; value, the system returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;LinkID&gt;</strong>: currently only supports link ID 0.</p></li>
<li><p><strong>&lt;length&gt;</strong>: MQTT username length. Range: [1,128].</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>The command AT+MQTTUSERCFG can also set MQTT username. The differences between the two commands include:</p>
<blockquote>
<div><ul class="simple">
<li><p>You can use AT+MQTTLONGUSERNAME to set a relatively long username since there is a limitation on the length of the AT+MQTTUSERCFG command.</p></li>
<li><p>You should set AT+MQTTLONGUSERNAME after setting the command AT+MQTTUSERCFG.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</section>
</section>
<section id="at-mqttpassword">
<h3>AT+MQTTPASSWORD<a class="headerlink" href="#at-mqttpassword" title="Link to this heading"></a></h3>
<p>Get/set MQTT password.</p>
<section id="id159">
<h4>Query command<a class="headerlink" href="#id159" title="Link to this heading"></a></h4>
<p>Query MQTT password.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+MQTTPASSWORD?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTTPASSWORD</span><span class="p">:</span><span class="o">&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;password&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The maximum length of the Query command doesn’t exceed 128 bytes (limited to AT length).</p></li>
</ul>
</div>
</section>
<section id="id160">
<h4>Set command<a class="headerlink" href="#id160" title="Link to this heading"></a></h4>
<p>Set MQTT password.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTPASSWORD</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>This response indicates that AT is ready for receiving MQTT password. You should enter the MQTT password, and when the MQTT password length reaches the &lt;length&gt; value, the system returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;LinkID&gt;</strong>: currently only supports link ID 0.</p></li>
<li><p><strong>&lt;length&gt;</strong>: MQTT password length. Range: [1,128].</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>The command AT+MQTTUSERCFG can also set MQTT password. The differences between the two commands include:</p>
<blockquote>
<div><ul class="simple">
<li><p>You can use AT+MQTTLONGPASSWORD to set a relatively long password since there is a limitation on the length of the AT+MQTTUSERCFG command.</p></li>
<li><p>You should set AT+MQTTLONGPASSWORD after setting the command AT+MQTTUSERCFG.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</section>
</section>
<section id="at-mqttconncfg">
<h3>AT+MQTTCONNCFG<a class="headerlink" href="#at-mqttconncfg" title="Link to this heading"></a></h3>
<p>Get/set configuration of MQTT connection.</p>
<section id="id161">
<h4>Query command<a class="headerlink" href="#id161" title="Link to this heading"></a></h4>
<p>Query configuration of MQTT connection.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+MQTTCONNCFG?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTTCONNCFG</span><span class="p">:</span><span class="o">&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">keepalive</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">disable_clean_session</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;lwt_topic&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;lwt_msg&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">lwt_qos</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">lwt_retain</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id162">
<h4>Set command<a class="headerlink" href="#id162" title="Link to this heading"></a></h4>
<p>Set configuration of MQTT Connection.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTCONNCFG</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">keepalive</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">disable_clean_session</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;lwt_topic&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;lwt_msg&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">lwt_qos</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">lwt_retain</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;LinkID&gt;</strong>: currently only supports link ID 0.</p></li>
<li><p><strong>&lt;keepalive&gt;</strong>: timeout of MQTT ping. Unit: second. Range [0,7200]. The default value is 0, which will be force-changed to 120 s.</p></li>
<li><p><strong>&lt;disable_clean_session&gt;</strong>: set MQTT clean session. For more details about this parameter, please refer to the section Clean Session in MQTT Version 3.1.1.</p>
<blockquote>
<div><ul class="simple">
<li><p>0: enable clean session.</p></li>
<li><p>1: disable clean session.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;lwt_topic&gt;</strong>: LWT (Last Will and Testament) message topic. Maximum length: 128 bytes.</p></li>
<li><p><strong>&lt;lwt_msg&gt;</strong>: LWT message. Maximum length: 128 bytes.</p></li>
<li><p><strong>&lt;lwt_qos&gt;</strong>: LWT QoS, which can be set to 0, 1, or 2. Default: 0.</p></li>
<li><p><strong>&lt;lwt_retain&gt;</strong>: LWT retain, which can be set to 0 or 1. Default: 0.</p></li>
</ul>
</section>
</section>
<section id="at-mqttalpn">
<h3>AT+MQTTALPN<a class="headerlink" href="#at-mqttalpn" title="Link to this heading"></a></h3>
<p>Get/set MQTT Application Layer Protocol Negotiation (ALPN).</p>
<section id="id163">
<h4>Query command<a class="headerlink" href="#id163" title="Link to this heading"></a></h4>
<p>Query MQTT Application Layer Protocol Negotiation (ALPN).</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+MQTTALPN?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTTALPN</span><span class="p">:</span><span class="o">&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">]</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id164">
<h4>Set command<a class="headerlink" href="#id164" title="Link to this heading"></a></h4>
<p>Set MQTT Application Layer Protocol Negotiation (ALPN).</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTALPN</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">alpn_counts</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">][,</span><span class="o">&lt;</span><span class="s2">&quot;alpn&quot;</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;LinkID&gt;</strong>: Currently only supports link ID 0.</p></li>
<li><p><strong>&lt;alpn_counts&gt;</strong>: The number of &lt;”alpn”&gt; parameters. Range: [0,5].</p>
<blockquote>
<div><ul class="simple">
<li><p>0: clean the MQTT ALPN configuration.</p></li>
<li><p>[1,5]: set the MQTT ALPN configuration.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;”alpn”&gt;</strong>: You can send more than one ALPN in ClientHello to the server.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The length of the entire AT command should be less than 256 bytes.</p></li>
<li><p>MQTT ALPN will be effective only if the MQTT connection is based on TLS or WSS.</p></li>
<li><p>You should set AT+MQTTALPN after setting the command AT+MQTTUSERCFG.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">1</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;ssid&quot;</span><span class="p">,</span><span class="s2">&quot;password&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CIPSNTPCFG</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="s2">&quot;0.pool.ntp.org&quot;</span><span class="p">,</span><span class="s2">&quot;time.google.com&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">MQTTUSERCFG</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="s2">&quot;ST67_01&quot;</span><span class="p">,</span><span class="s2">&quot;ST67W611M1&quot;</span><span class="p">,</span><span class="s2">&quot;123456789&quot;</span><span class="p">,</span><span class="s2">&quot;client_1.crt&quot;</span><span class="p">,</span><span class="s2">&quot;client_1.key&quot;</span><span class="p">,</span><span class="s2">&quot;ca_1.crt&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">MQTTALPN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;mqtt-ca.cn&quot;</span><span class="p">,</span><span class="s2">&quot;mqtt-ca.us&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">MQTTCONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;192.168.31.112&quot;</span><span class="p">,</span><span class="mi">8883</span><span class="p">,</span><span class="mi">1</span>
</pre></div>
</div>
</section>
</section>
<section id="at-mqttsni">
<h3>AT+MQTTSNI<a class="headerlink" href="#at-mqttsni" title="Link to this heading"></a></h3>
<p>Get/set MQTT Server Name Indication (SNI).</p>
<section id="id165">
<h4>Query command<a class="headerlink" href="#id165" title="Link to this heading"></a></h4>
<p>Query MQTT Server Name Indication (SNI).</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+MQTTSNI?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTTSNI</span><span class="p">:</span><span class="o">&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;sni&quot;</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id166">
<h4>Set command<a class="headerlink" href="#id166" title="Link to this heading"></a></h4>
<p>Set MQTT Server Name Indication (SNI).</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTSNI</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;sni&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;LinkID&gt;</strong>: Currently only supports link ID 0.</p></li>
<li><p><strong>&lt;”sni”&gt;</strong>: MQTT Server Name Indication. You can send it in ClientHello to the server.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The length of the entire AT command should be less than 256 bytes.</p></li>
<li><p>MQTT SNI will be effective only if the MQTT connection is based on TLS or WSS.</p></li>
<li><p>You should set AT+MQTTSNI after setting the command AT+MQTTUSERCFG.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">1</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;ssid&quot;</span><span class="p">,</span><span class="s2">&quot;password&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CIPSNTPCFG</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="s2">&quot;0.pool.ntp.org&quot;</span><span class="p">,</span><span class="s2">&quot;time.google.com&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">MQTTUSERCFG</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="s2">&quot;ST67_01&quot;</span><span class="p">,</span><span class="s2">&quot;ST67W611M1&quot;</span><span class="p">,</span><span class="s2">&quot;123456789&quot;</span><span class="p">,</span><span class="s2">&quot;client_1.crt&quot;</span><span class="p">,</span><span class="s2">&quot;client_1.key&quot;</span><span class="p">,</span><span class="s2">&quot;ca_1.crt&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">MQTTSNI</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;my_specific_prefix.iot.my_aws_region.amazonaws.com&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">MQTTCONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;192.168.31.112&quot;</span><span class="p">,</span><span class="mi">8883</span><span class="p">,</span><span class="mi">1</span>
</pre></div>
</div>
</section>
</section>
<section id="at-mqttconn">
<h3>AT+MQTTCONN<a class="headerlink" href="#at-mqttconn" title="Link to this heading"></a></h3>
<p>Connect to MQTT Brokers.</p>
<section id="id167">
<h4>Query command<a class="headerlink" href="#id167" title="Link to this heading"></a></h4>
<p>Query MQTT Brokers that have already been connected.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+MQTTCONN?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTTCONN</span><span class="p">:</span><span class="o">&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">state</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">scheme</span><span class="o">&gt;&lt;</span><span class="s2">&quot;host&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">reconnect</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id168">
<h4>Set command<a class="headerlink" href="#id168" title="Link to this heading"></a></h4>
<p>Connect to MQTT Brokers.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTCONN</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;host&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">reconnect</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">+</span><span class="n">MQTT</span><span class="p">:</span><span class="n">CONNECTED</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTT</span><span class="p">:</span><span class="n">DISCONNECTED</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;LinkID&gt;</strong>: Currently only supports link ID 0.</p></li>
<li><p><strong>&lt;”host”&gt;</strong>: MQTT broker domain. Maximum length: 128 bytes.</p></li>
<li><p><strong>&lt;port&gt;</strong>: MQTT broker port. Maximum: port 65535.</p></li>
<li><p><strong>&lt;reconnect&gt;</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p>0: MQTT won’t reconnect automatically. If MQTT connection established and then disconnected, you can’t use this command to reestablish MQTT connection. Please send AT+MQTTCLEAN=0 command to clean MQTT connection first, reconfigure the connection parameters, and then establish a new MQTT connection.</p></li>
<li><p>1: MQTT will reconnect automatically. It takes more resources.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;state&gt;</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p>0: MQTT uninitialized.</p></li>
<li><p>1: already set AT+MQTTUSERCFG.</p></li>
<li><p>2: already set AT+MQTTCONNCFG.</p></li>
<li><p>3: connection disconnected.</p></li>
<li><p>4: connection established.</p></li>
<li><p>5: connected, but did not subscribe to any topic.</p></li>
<li><p>6: connected, and subscribed to MQTT topics.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;scheme&gt;</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p>0: MQTT over TCP.</p></li>
<li><p>1: MQTT over TLS (no certificate verify).</p></li>
<li><p>2: MQTT over TLS (verify server certificate).</p></li>
<li><p>3: MQTT over TLS (provide client certificate).</p></li>
<li><p>4: MQTT over TLS (verify server certificate and provide client certificate).</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
</section>
<section id="at-mqttpub">
<h3>AT+MQTTPUB<a class="headerlink" href="#at-mqttpub" title="Link to this heading"></a></h3>
<p>Publish MQTT Messages in string.</p>
<section id="id169">
<h4>Set command<a class="headerlink" href="#id169" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Publish MQTT messages in string to a defined topic. If the amount of data you publish is relatively large, and the length of a single AT command has exceeded the threshold of 256, please use the AT+MQTTPUBRAW command.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTPUB</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;topic&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;data&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">qos</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">retain</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;LinkID&gt;</strong>: Currently only supports link ID 0.</p></li>
<li><p><strong>&lt;”topic”&gt;</strong>: MQTT topic. Maximum length: 128 bytes.</p></li>
<li><p><strong>&lt;”data”&gt;</strong>: MQTT message in string.</p></li>
<li><p><strong>&lt;qos&gt;</strong>: QoS of message, which can be set to 0, 1, or 2. Default: 0.</p></li>
<li><p><strong>&lt;retain&gt;</strong>: retain flag.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The length of the entire AT command should be less than 256 bytes.</p></li>
<li><p>This command can’t send data 0. If you need to send 0, please use the command AT+MQTTPUBRAW instead.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">CWMODE</span><span class="o">=</span><span class="mi">1</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CWJAP</span><span class="o">=</span><span class="s2">&quot;ssid&quot;</span><span class="p">,</span><span class="s2">&quot;password&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">CIPSNTPCFG</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="s2">&quot;0.pool.ntp.org&quot;</span><span class="p">,</span><span class="s2">&quot;time.google.com&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">MQTTUSERCFG</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="s2">&quot;ST67_01&quot;</span><span class="p">,</span><span class="s2">&quot;ST67W611M1&quot;</span><span class="p">,</span><span class="s2">&quot;123456789&quot;</span><span class="p">,</span><span class="s2">&quot;client_1.crt&quot;</span><span class="p">,</span><span class="s2">&quot;client_1.key&quot;</span><span class="p">,</span><span class="s2">&quot;ca_1.crt&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">MQTTALPN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;mqtt-ca.cn&quot;</span><span class="p">,</span><span class="s2">&quot;mqtt-ca.us&quot;</span>

<span class="n">AT</span><span class="o">+</span><span class="n">MQTTCONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;192.168.31.112&quot;</span><span class="p">,</span><span class="mi">8883</span><span class="p">,</span><span class="mi">1</span>

<span class="n">AT</span><span class="o">+</span><span class="n">MQTTPUB</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;topic&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">{</span><span class="se">\&quot;</span><span class="s2">timestamp</span><span class="se">\&quot;</span><span class="s2">:</span><span class="se">\&quot;</span><span class="s2">20201121085253</span><span class="se">\&quot;</span><span class="s2">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>  <span class="o">//</span> <span class="n">When</span> <span class="n">sending</span> <span class="n">this</span> <span class="n">command</span><span class="p">,</span> <span class="n">please</span> <span class="n">pay</span> <span class="n">attention</span> <span class="n">to</span> <span class="n">whether</span> <span class="n">special</span> <span class="n">characters</span> <span class="n">need</span> <span class="n">to</span> <span class="n">be</span> <span class="n">escaped</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="at-mqttpubraw">
<h3>AT+MQTTPUBRAW<a class="headerlink" href="#at-mqttpubraw" title="Link to this heading"></a></h3>
<p>Publish long MQTT messages.</p>
<section id="id170">
<h4>Set command<a class="headerlink" href="#id170" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Publish long MQTT messages to a defined topic. If the amount of data you publish is relatively small, and the length of a single AT command isn’t greater than the threshold of 256, you also can use the AT+MQTTPUB command.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTPUBRAW</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;topic&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">qos</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">retain</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>

<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>The symbol &gt; indicates that AT is ready for receiving serial data, and you can enter the data now. When the requirement of message length determined by the parameter &lt;length&gt; is met, the transmission starts.</p>
<p>If the transmission is successful, AT returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</div>
<p>Otherwise, it returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SEND</span> <span class="n">FAIL</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;LinkID&gt;</strong>: Currently only supports link ID 0.</p></li>
<li><p><strong>&lt;”topic”&gt;</strong>: MQTT topic. Maximum length: 128 bytes.</p></li>
<li><p><strong>&lt;length&gt;</strong>: The length of an MQTT message. Its maximum length is 1536.</p></li>
<li><p><strong>&lt;qos&gt;</strong>: QoS of the published message, which can be set to 0, 1, or 2. Default is 0.</p></li>
<li><p><strong>&lt;retain&gt;</strong>: retain flag.</p></li>
</ul>
</section>
</section>
<section id="at-mqttsub">
<h3>AT+MQTTSUB<a class="headerlink" href="#at-mqttsub" title="Link to this heading"></a></h3>
<p>Subscribe to MQTT topics.</p>
<section id="id171">
<h4>Query command<a class="headerlink" href="#id171" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query subscribed MQTT topics.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+MQTTSUB?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTTSUB</span><span class="p">:</span><span class="o">&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">state</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;topic1&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">qos</span><span class="o">&gt;</span>

<span class="o">+</span><span class="n">MQTTSUB</span><span class="p">:</span><span class="o">&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">state</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;topic2&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">qos</span><span class="o">&gt;</span>

<span class="o">+</span><span class="n">MQTTSUB</span><span class="p">:</span><span class="o">&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">state</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;topic3&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">qos</span><span class="o">&gt;</span>

<span class="o">...</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id172">
<h4>Set command<a class="headerlink" href="#id172" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Subscribe to defined MQTT topics with defined QoS. It supports subscribing to multiple topics.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTSUB</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;topic&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">qos</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p>If the topic has been subscribed before, it will prompt:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTTSUB</span><span class="p">,</span><span class="n">ALREADY_SUBSCRIBE</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p>When AT receives MQTT messages of the subscribed topic, it will prompt:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTT</span><span class="p">:</span><span class="n">SUBRECV</span><span class="p">,</span><span class="o">&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">topic_length</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">data_length</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;topic&quot;</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">data</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;LinkID&gt;</strong>: Currently only supports link ID 0.</p></li>
<li><p><strong>&lt;state&gt;</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p>0: MQTT uninitialized.</p></li>
<li><p>1: already set AT+MQTTUSERCFG.</p></li>
<li><p>2: already set AT+MQTTCONNCFG.</p></li>
<li><p>3: connection disconnected.</p></li>
<li><p>4: connection established.</p></li>
<li><p>5: connected, but subscribe to no topic.</p></li>
<li><p>6: connected, and subscribed to MQTT topics.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;topic&gt;</strong>: the topic that’s subscribed to.</p></li>
<li><p><strong>&lt;qos&gt;</strong>: the QoS that’s subscribed to.</p></li>
</ul>
</section>
</section>
<section id="at-mqttunsub">
<h3>AT+MQTTUNSUB<a class="headerlink" href="#at-mqttunsub" title="Link to this heading"></a></h3>
<p>Unsubscribe from MQTT topics.</p>
<section id="id173">
<h4>Set command<a class="headerlink" href="#id173" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Unsubscribe the client from defined topics. This command can be called multiple times to unsubscribe from different topics.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTUNSUB</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="s2">&quot;topic&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p>If the topic has been subscribed before, it will prompt:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">MQTTUNSUB</span><span class="p">:</span><span class="n">NO_UNSUBSCRIBE</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;LinkID&gt;</strong>: Currently only supports link ID 0.</p></li>
<li><p><strong>&lt;topic&gt;</strong>: MQTT topic. Maximum length: 128 bytes.</p></li>
</ul>
</section>
</section>
<section id="at-mqttclean">
<h3>AT+MQTTCLEAN<a class="headerlink" href="#at-mqttclean" title="Link to this heading"></a></h3>
<p>Close MQTT connections.</p>
<section id="id174">
<h4>Set command<a class="headerlink" href="#id174" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Close the MQTT connection and release the resource.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">MQTTCLEAN</span><span class="o">=&lt;</span><span class="n">LinkID</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;LinkID&gt;</strong>: Currently only supports link ID 0.</p></li>
</ul>
</section>
</section>
</section>
</section>
<section id="ble-at-commands">
<h1>BLE AT commands<a class="headerlink" href="#ble-at-commands" title="Link to this heading"></a></h1>
<table class="docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 37.5%" />
<col style="width: 62.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Instruction</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#at-bleinit">AT+BLEINIT</a></p></td>
<td><p>Initialize BLE</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-bleaddr">AT+BLEADDR</a></p></td>
<td><p>BLE address</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blename">AT+BLENAME</a></p></td>
<td><p>Set BLE device name</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blescanparam">AT+BLESCANPARAM</a></p></td>
<td><p>Set BLE scanning parameters</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blescan">AT+BLESCAN</a></p></td>
<td><p>Enable BLE scanning</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blescanrspdata">AT+BLESCANRSPDATA</a></p></td>
<td><p>Set BLE SCAN Response data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-bleadvparam">AT+BLEADVPARAM</a></p></td>
<td><p>Set BLE advertising parameters</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-bleadvdata">AT+BLEADVDATA</a></p></td>
<td><p>Set BLE advertising data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-bleadvstart">AT+BLEADVSTART</a></p></td>
<td><p>Enable BLE advertising</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-bleadvstop">AT+BLEADVSTOP</a></p></td>
<td><p>Stop BLE advertising</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-bleconn">AT+BLECONN</a></p></td>
<td><p>Establish BLE connection</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-bleconnparam">AT+BLECONNPARAM</a></p></td>
<td><p>Update BLE connection parameters</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-bledisconn">AT+BLEDISCONN</a></p></td>
<td><p>End BLE connection</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-bledatalen">AT+BLEDATALEN</a></p></td>
<td><p>Set BLE packet length</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-bleexchangemtu">AT+BLEEXCHANGEMTU</a></p></td>
<td><p>Exchange the size of BLE MTU</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blegattssrv">AT+BLEGATTSSRV</a></p></td>
<td><p>GATTS discover services</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blegattssrvcre">AT+BLEGATTSSRVCRE</a></p></td>
<td><p>GATTS create services</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blegattssrvdel">AT+BLEGATTSSRVDEL</a></p></td>
<td><p>GATTS delete services</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blegattsregister">AT+BLEGATTSREGISTER</a></p></td>
<td><p>GATTS services register/unregister</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blegattschar">AT+BLEGATTSCHAR</a></p></td>
<td><p>GATTS discover characteristics</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blegattscharcre">AT+BLEGATTSCHARCRE</a></p></td>
<td><p>GATTS create characteristics</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blegattsntfy">AT+BLEGATTSNTFY</a></p></td>
<td><p>GATTS characteristics notify</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blegattsind">AT+BLEGATTSIND</a></p></td>
<td><p>GATTS characteristics indicate</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blegattsrd">AT+BLEGATTSRD</a></p></td>
<td><p>GATTS characteristics read</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blegattcsrvdis">AT+BLEGATTCSRVDIS</a></p></td>
<td><p>GATTC discover services</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blegattcchardis">AT+BLEGATTCCHARDIS</a></p></td>
<td><p>GATTC discover characteristics</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blegattcwr">AT+BLEGATTCWR</a></p></td>
<td><p>GATTC characteristics write</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blegattcrd">AT+BLEGATTCRD</a></p></td>
<td><p>GATTC characteristics read</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blegattcsubscribe">AT+BLEGATTCSUBSCRIBE</a></p></td>
<td><p>GATTC subscribe server</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blegattcunsubscribe">AT+BLEGATTCUNSUBSCRIBE</a></p></td>
<td><p>GATTC unsubscribe server</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-bletxpwr">AT+BLETXPWR</a></p></td>
<td><p>BLE TX power</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blesecparam">AT+BLESECPARAM</a></p></td>
<td><p>Set/query BLE security parameter</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-bleseccannel">AT+BLESECCANNEL</a></p></td>
<td><p>BLE cancel pairing</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blesecpasskeyconfirm">AT+BLESECPASSKEYCONFIRM</a></p></td>
<td><p>BLE pairing passkey confirm</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blesecpairingconfirm">AT+BLESECPAIRINGCONFIRM</a></p></td>
<td><p>BLE pairing confirm</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blesecpasskey">AT+BLESECPASSKEY</a></p></td>
<td><p>BLE pairing pass entry</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blesecgetltklist">AT+BLESECGETLTKLIST</a></p></td>
<td><p>Query BLE paired device list</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blesecunpair">AT+BLESECUNPAIR</a></p></td>
<td><p>BLE unpairing</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blesecstart">AT+BLESECSTART</a></p></td>
<td><p>BLE start pairing</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blebasinit">AT+BLEBASINIT</a></p></td>
<td><p>BLE BAS profile init</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blebasdeinit">AT+BLEBASDEINIT</a></p></td>
<td><p>BLE BAS profile deinit</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-blebaslvlget">AT+BLEBASLVLGET</a></p></td>
<td><p>GET BLE BAS profile level</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-blebaslvlset">AT+BLEBASLVLSET</a></p></td>
<td><p>SET BLE BAS profile level</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-bleiasinit">AT+BLEIASINIT</a></p></td>
<td><p>BLE IAS profile init</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-bleiasdeinit">AT+BLEIASDEINIT</a></p></td>
<td><p>BLE IAS profile deinit</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-bledisinit">AT+BLEDISINIT</a></p></td>
<td><p>BLE DIS profile init</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-bledisdeinit">AT+BLEDISDEINIT</a></p></td>
<td><p>BLE DIS profile deinit</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-bledisset">AT+BLEDISSET</a></p></td>
<td><p>BLE DIS profile setting</p></td>
</tr>
</tbody>
</table>
<section id="ble-at-command-description">
<h2>BLE AT command description<a class="headerlink" href="#ble-at-command-description" title="Link to this heading"></a></h2>
<section id="at-bleinit">
<h3>AT+BLEINIT<a class="headerlink" href="#at-bleinit" title="Link to this heading"></a></h3>
<p>Function: BLE initialization.</p>
<section id="id175">
<h4>Query command<a class="headerlink" href="#id175" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Check the initialization status of BLE.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLEINIT?
</pre></div>
</div>
<p><strong>Response</strong></p>
<p>If BLE is initialized, AT will return:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLEINIT</span><span class="p">:</span><span class="o">&lt;</span><span class="n">role</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
<p>If BLE isn’t initialized, AT will return:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLEINIT</span><span class="p">:</span><span class="mi">0</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id176">
<h4>Set command<a class="headerlink" href="#id176" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Initialize BLE.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=&lt;</span><span class="n">init</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;init&gt;</strong>:</p>
<ul>
<li><p>0: deinit BLE</p></li>
<li><p>1: client role</p></li>
<li><p>2: server role</p></li>
<li><p>3: dual role</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="at-bleaddr">
<h3>AT+BLEADDR<a class="headerlink" href="#at-bleaddr" title="Link to this heading"></a></h3>
<p>Function: Query/set the BLE address.</p>
<section id="id177">
<h4>Query command<a class="headerlink" href="#id177" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the BLE device address.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLEADDR?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLEADDR</span><span class="p">:</span><span class="o">&lt;</span><span class="n">BLE_public_addr</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id178">
<h4>Set command<a class="headerlink" href="#id178" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the BLE device address.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEADDR</span><span class="o">=&lt;</span><span class="n">BLE_public_addr</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;BLE_public_addr&gt;:</p></li>
</ul>
</section>
</section>
<section id="at-blename">
<h3>AT+BLENAME<a class="headerlink" href="#at-blename" title="Link to this heading"></a></h3>
<p>Function: Query/set the BLE device name.</p>
<section id="id179">
<h4>Query command<a class="headerlink" href="#id179" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the BLE device name.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLENAME?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLENAME</span><span class="p">:</span><span class="o">&lt;</span><span class="n">device_name</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id180">
<h4>Set command<a class="headerlink" href="#id180" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the BLE device name.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLENAME</span><span class="o">=&lt;</span><span class="n">device_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;device_name&gt;: the BLE device name. The maximum length is 29.</p></li>
</ul>
</section>
</section>
<section id="at-blescanparam">
<h3>AT+BLESCANPARAM<a class="headerlink" href="#at-blescanparam" title="Link to this heading"></a></h3>
<p>Function: Query/set the parameters of BLE scanning.</p>
<section id="id181">
<h4>Query command<a class="headerlink" href="#id181" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the parameters of BLE scanning.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLESCANPARAM?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLESCANPARAM</span><span class="p">:</span><span class="o">&lt;</span><span class="n">scan_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">own_addr_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">filter_policy</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">scan_interval</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">scan_window</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id182">
<h4>Set command<a class="headerlink" href="#id182" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the parameters of BLE scanning.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESCANPARAM</span><span class="o">=&lt;</span><span class="n">scan_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">own_addr_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">filter_policy</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">scan_interval</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">scan_window</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;scan_type&gt;:</p>
<ul>
<li><p>0: passive scan</p></li>
<li><p>1: active scan</p></li>
</ul>
</li>
<li><p>&lt;own_addr_type&gt;:</p>
<ul>
<li><p>0: Public address</p></li>
<li><p>1: Random address</p></li>
<li><p>2: RPA public address</p></li>
<li><p>3: RPA random address</p></li>
</ul>
</li>
<li><p>&lt;filter_policy&gt;:</p>
<ul>
<li><p>0: BLE_SCAN_FILTER_ALLOW_ALL</p></li>
<li><p>1: BLE_SCAN_FILTER_ALLOW_ONLY_WLST</p></li>
<li><p>2: BLE_SCAN_FILTER_ALLOW_UND_RPA_DIR</p></li>
<li><p>3: BLE_SCAN_FILTER_ALLOW_WLIST_PRA_DIR</p></li>
</ul>
</li>
<li><p>&lt;scan_interval&gt;: scan interval. It should be more than or equal to the value of &lt;scan_window&gt;. The range of this parameter is [0x0004,0x4000], which corresponds to [4, 16384] . The scan interval equals this parameter multiplied by 0.625 ms, so the range for the actual scan interval is [2.5,10240] ms.</p></li>
<li><p>&lt;scan_window&gt;: scan window. It should be less than or equal to the value of &lt;scan_interval&gt;. The range of this parameter is [0x0004,0x4000], which corresponds to [4, 16384]. The scan window equals this parameter multiplied by 0.625 ms, so the range for the actual scan window is [2.5,10240] ms.</p></li>
</ul>
</section>
</section>
<section id="at-blescan">
<h3>AT+BLESCAN<a class="headerlink" href="#at-blescan" title="Link to this heading"></a></h3>
<p>Function: Enable BLE scanning.</p>
<section id="id183">
<h4>Set command<a class="headerlink" href="#id183" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Enable/disable scanning.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESCAN</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLE</span><span class="p">:</span><span class="n">SCAN</span><span class="p">:</span><span class="o">&lt;</span><span class="n">addr</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">rssi</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">adv_data</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">scan_rsp_data</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addr_type</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;enable&gt;:</p>
<ul>
<li><p>1: enable continuous scanning.</p></li>
<li><p>0: disable continuous scanning.</p></li>
</ul>
</li>
<li><p>&lt;addr&gt;: BLE address.</p></li>
<li><p>&lt;rssi&gt;: signal strength.</p></li>
<li><p>&lt;adv_data&gt;: advertising data.</p></li>
<li><p>&lt;scan_rsp_data&gt;: scan response data.</p></li>
<li><p>&lt;addr_type&gt;: the address type of broadcasters.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span>    <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">client</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLESCAN</span><span class="o">=</span><span class="mi">1</span>    <span class="o">//</span> <span class="n">start</span> <span class="n">scanning</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLESCAN</span><span class="o">=</span><span class="mi">0</span>    <span class="o">//</span> <span class="n">stop</span> <span class="n">scanning</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blescanrspdata">
<h3>AT+BLESCANRSPDATA<a class="headerlink" href="#at-blescanrspdata" title="Link to this heading"></a></h3>
<p>Function: Set BLE scan response data.</p>
<section id="id184">
<h4>Set command<a class="headerlink" href="#id184" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set scan response.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESCANRSPDATA</span><span class="o">=&lt;</span><span class="n">scan_rsp_data</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;scan_rsp_data&gt;: scan response data is a HEX string. For example, if you want to set the response data to “02010606095757575757”, the command should be AT+BLESCANRSPDATA=”02010606095757575757”. BT_DATA_NAME_COMPLETE DATA index must be 2, like AT+BLESCANRSPDATA=”02010606095757575757”.</p>
<ul>
<li><p>02: Command</p></li>
<li><p>01: Flag</p></li>
<li><p>06: Value</p></li>
<li><p>06: Length of data + 1</p></li>
<li><p>09: AD type</p></li>
<li><p>5757575757: Data in Hex format</p></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span>   <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLESCANRSPDATA</span><span class="o">=</span><span class="s2">&quot;02010606095757575757&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bleadvparam">
<h3>AT+BLEADVPARAM<a class="headerlink" href="#at-bleadvparam" title="Link to this heading"></a></h3>
<p>Function: Query/set parameters of BLE advertising.</p>
<section id="id185">
<h4>Query command<a class="headerlink" href="#id185" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the parameters of advertising.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLEADVPARAM?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLEADVPARAM</span><span class="p">:</span><span class="o">&lt;</span><span class="n">adv_int_min</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">adv_int_max</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">adv_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">channel_map</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id186">
<h4>Set command<a class="headerlink" href="#id186" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the parameters of advertising.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEADVPARAM</span><span class="o">=&lt;</span><span class="n">adv_int_min</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">adv_int_max</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">adv_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">channel_map</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;adv_int_min&gt;: minimum advertising interval. The range of this parameter is [0x0020,0x4000] , which corresponds to [32, 16384]. The actual advertising interval equals this parameter multiplied by 0.625 ms, so the range for the actual minimum interval is [20, 10240] ms. It should be less than or equal to the value of &lt;adv_int_max&gt;.</p></li>
<li><p>&lt;adv_int_max&gt;: maximum advertising interval. The range of this parameter is [0x0020,0x4000], which corresponds to [32, 16384]. The actual advertising interval equals this parameter multiplied by 0.625 ms, so the range for the actual maximum interval is [20, 10240] ms. It should be more than or equal to the value of &lt;adv_int_min&gt;.</p></li>
<li><p>&lt;adv_type&gt;:</p>
<ul>
<li><p>0: ADV_TYPE_IND</p></li>
<li><p>1: ADV_TYPE_SCAN_IND</p></li>
<li><p>2: ADV_TYPE_NONCONN_IND</p></li>
</ul>
</li>
<li><p>&lt;channel_map&gt;: channel of advertising.</p>
<ul>
<li><p>1: ADV_CHNL_37</p></li>
<li><p>2: ADV_CHNL_38</p></li>
<li><p>4: ADV_CHNL_39</p></li>
<li><p>7: ADV_CHNL_ALL</p></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span>   <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEADVPARAM</span><span class="o">=</span><span class="mi">160</span><span class="p">,</span><span class="mi">320</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bleadvdata">
<h3>AT+BLEADVDATA<a class="headerlink" href="#at-bleadvdata" title="Link to this heading"></a></h3>
<p>Function: Set BLE advertising data.</p>
<section id="id187">
<h4>Set command<a class="headerlink" href="#id187" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set advertising data.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEADVDATA</span><span class="o">=&lt;</span><span class="n">adv_data</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;adv_data&gt;: advertising data in HEX string. For example, to set the advertising data to “02010606095757575757”, the command should be AT+BLEADVDATA=”02010606095757575757”. The maximum length is 31 bytes.</p>
<ul>
<li><p>02: Command</p></li>
<li><p>01: Flag</p></li>
<li><p>06: Value</p></li>
<li><p>06: Length of data + 1</p></li>
<li><p>09: AD type</p></li>
<li><p>5757575757: Data in Hex format</p></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span>   <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEADVDATA</span><span class="o">=</span><span class="s2">&quot;02010606095757575757&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bleadvstart">
<h3>AT+BLEADVSTART<a class="headerlink" href="#at-bleadvstart" title="Link to this heading"></a></h3>
<p>Function: Start BLE advertising.</p>
<section id="id188">
<h4>Execute command<a class="headerlink" href="#id188" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Start advertising.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEADVSTART</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span>   <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEADVSTART</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bleadvstop">
<h3>AT+BLEADVSTOP<a class="headerlink" href="#at-bleadvstop" title="Link to this heading"></a></h3>
<p>Function: Stop BLE advertising.</p>
<section id="id189">
<h4>Execute command<a class="headerlink" href="#id189" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Stop advertising.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEADVSTOP</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span>   <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEADVSTART</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEADVSTOP</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bleconn">
<h3>AT+BLECONN<a class="headerlink" href="#at-bleconn" title="Link to this heading"></a></h3>
<p>Function: Establish BLE connection.</p>
<section id="id190">
<h4>Query command<a class="headerlink" href="#id190" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the Bluetooth LE connection.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLECONN?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLECONN</span><span class="p">:</span><span class="o">&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote_address</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p>If the connection has not been established, there will be no &lt;conn_index&gt; and &lt;remote_address&gt; in the response.</p>
</section>
<section id="id191">
<h4>Set command<a class="headerlink" href="#id191" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Establish the BLE connection.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLECONN</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote_address</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">addr_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">timeout</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<p>If the connection is established successfully, it will prompt:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLE</span><span class="p">:</span><span class="n">CONNECTED</span><span class="p">:</span><span class="o">&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote_address</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">conn_role</span><span class="o">&gt;</span>
 <span class="n">OK</span>
</pre></div>
</div>
</div>
<p>If the connection fails, it will prompt:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p>If the connection fails due to parameters error or other reasons, it will prompt:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;remote_address&gt;: remote BLE address.</p></li>
<li><p>&lt;addr_type&gt;: the address type of broadcasters:</p>
<ul>
<li><p>0: Public address</p></li>
<li><p>1: Random address</p></li>
</ul>
</li>
<li><p>&lt;timeout&gt;: connection req timeout (option). Range: [3,30].</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span>   <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">client</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLECONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;11:22:33:44:55:66&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bleconnparam">
<h3>AT+BLECONNPARAM<a class="headerlink" href="#at-bleconnparam" title="Link to this heading"></a></h3>
<p>Function: Query/update parameters of BLE connection.</p>
<section id="id192">
<h4>Query command<a class="headerlink" href="#id192" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query the parameters of BLE connection.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLECONNPARAM?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLECONNPARAM</span><span class="p">:</span><span class="o">&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">min_interval</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">max_interval</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">cur_interval</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">latency</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">timeout</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id193">
<h4>Set command<a class="headerlink" href="#id193" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Update the parameters of BLE connection.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLECONNPARAM</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">min_interval</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">max_interval</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">latency</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">timeout</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p>If the setting fails, it will prompt the message below:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;min_interval&gt;: minimum connecting interval. It should be less than or equal to the value of &lt;max_interval&gt;. The range of this parameter is [0x0006,0x0C80], which corresponds to [6,3200]. The actual connecting interval equals this parameter multiplied by 1.25 ms, so the range for the actual minimum interval is [7.5,4000] ms.</p></li>
<li><p>&lt;max_interval&gt;: maximum connecting interval. It should be more than or equal to the value of &lt;min_interval&gt;. The range of this parameter is [0x0006,0x0C80], which corresponds to [6,3200]. The actual connecting interval equals this parameter multiplied by 1.25 ms, so the range for the actual maximum interval is [7.5,4000] ms.</p></li>
<li><p>&lt;cur_interval&gt;: current connecting interval.</p></li>
<li><p>&lt;latency&gt;: latency. Range: [0, 499].</p></li>
<li><p>&lt;timeout&gt;: timeout. The range of this parameter is [0x000A,0x0C80], which corresponds to [10,3200] ms. The actual timeout equals this parameter multiplied by 10 ms, so the range for the actual timeout is [100,32000] ms.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span>   <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">client</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLECONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;11:22:33:44:55:66&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLECONNPARAM</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">500</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bledisconn">
<h3>AT+BLEDISCONN<a class="headerlink" href="#at-bledisconn" title="Link to this heading"></a></h3>
<p>Function: End BLE connection.</p>
<section id="id194">
<h4>Execute command<a class="headerlink" href="#id194" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>End the BLE connection.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEDISCONN</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>  <span class="o">//</span> <span class="n">The</span> <span class="n">AT</span><span class="o">+</span><span class="n">BLEDISCONN</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">received</span><span class="o">.</span>
<span class="o">+</span><span class="n">BLE</span><span class="p">:</span><span class="n">DISCONNECTED</span><span class="p">:</span><span class="o">&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">remote_address</span><span class="o">&gt;</span>  <span class="o">//</span> <span class="n">The</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">successful</span><span class="o">.</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;remote_address&gt;: remote BLE address.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span>   <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">client</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLECONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;11:22:33:44:55:66&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEDISCONN</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bledatalen">
<h3>AT+BLEDATALEN<a class="headerlink" href="#at-bledatalen" title="Link to this heading"></a></h3>
<p>Function: Set the length of BLE data packet.</p>
<section id="id195">
<h4>Query command<a class="headerlink" href="#id195" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the length of BLE data packet.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEDATALEN</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">tx_octets</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">tx_time</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;tx_octets&gt;: data packet’s length. Range: [27,251].</p></li>
<li><p>&lt;tx_time&gt;: data packet transition time: Range: [328, 17040] ms.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The BLE connection has to be established first.</p>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span>   <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">client</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLECONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;11:22:33:44:55:66&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEDATALEN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">2120</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bleexchangemtu">
<h3>AT+BLEEXCHANGEMTU<a class="headerlink" href="#at-bleexchangemtu" title="Link to this heading"></a></h3>
<p>Function: Exchange BLE MTU length.</p>
<section id="id196">
<h4>Set command<a class="headerlink" href="#id196" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the length of the maximum transmission unit (MTU).</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEEXCHANGEMTU</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
<span class="o">+</span><span class="n">BLE</span><span class="p">:</span><span class="n">MTUSIZE</span><span class="p">:</span><span class="o">&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">MTU</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span>   <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">client</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLECONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;11:22:33:44:55:66&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEEXCHANGEMTU</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattssrv">
<h3>AT+BLEGATTSSRV<a class="headerlink" href="#at-blegattssrv" title="Link to this heading"></a></h3>
<p>Function: GATTS discovers services.</p>
<section id="id197">
<h4>Query command<a class="headerlink" href="#id197" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>GATTS discovers services.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLEGATTSSRV?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLEGATTSSRV</span><span class="p">:</span><span class="o">&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">srv_uuid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">srv_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">uuid_type</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;srv_index&gt;: service’s index starting from 0 to 2</p></li>
<li><p>&lt;srv_uuid&gt;: service’s UUID</p></li>
<li><p>&lt;srv_type&gt;: service’s type</p>
<ul>
<li><p>0: not primary service</p></li>
<li><p>1: primary service</p></li>
</ul>
</li>
<li><p>&lt;uuid_type&gt;: UUID’s type</p>
<ul>
<li><p>0: 16-bit UUID</p></li>
<li><p>2: 128-bit UUID</p></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLEINIT=2 // Role: server
AT+BLEGATTSSRV?
</pre></div>
</div>
</section>
</section>
<section id="at-blegattssrvcre">
<h3>AT+BLEGATTSSRVCRE<a class="headerlink" href="#at-blegattssrvcre" title="Link to this heading"></a></h3>
<p>Function: GATTS creates services.</p>
<section id="id198">
<h4>Set command<a class="headerlink" href="#id198" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>The Generic Attributes Server (GATTS) creates BLE services.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSSRVCRE</span><span class="o">=&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">srv_uuid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">srv_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">uuid_type</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;srv_index&gt;: service’s index starting from 0 to 2</p></li>
<li><p>&lt;srv_uuid&gt;: service’s UUID</p></li>
<li><p>&lt;srv_type&gt;: service’s type</p>
<ul>
<li><p>0: not primary service</p></li>
<li><p>1: primary service</p></li>
</ul>
</li>
<li><p>&lt;uuid_type&gt;: UUID’s type</p>
<ul>
<li><p>0: 16-bit UUID</p></li>
<li><p>2: 128-bit UUID</p></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSSRVCRE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;01020304010203040102030401020304&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattssrvdel">
<h3>AT+BLEGATTSSRVDEL<a class="headerlink" href="#at-blegattssrvdel" title="Link to this heading"></a></h3>
<p>Function: GATTS delete services.</p>
<section id="id199">
<h4>Set command<a class="headerlink" href="#id199" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>The Generic Attributes Server (GATTS) delete BLE services.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSSRVDEL</span><span class="o">=&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;srv_index&gt;: service’s index starting from 0 to 2</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSSRVDEL</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattsregister">
<h3>AT+BLEGATTSREGISTER<a class="headerlink" href="#at-blegattsregister" title="Link to this heading"></a></h3>
<p>Function: GATTS services register/unregister.</p>
<section id="id200">
<h4>Set command<a class="headerlink" href="#id200" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>GATTS services register/unregister.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSREGISTER</span><span class="o">=&lt;</span><span class="n">enable</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;enable&gt;: 1: Register; 0: Unregister</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSSRVCRE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;01020304010203040102030401020304&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span> <span class="o">//</span><span class="n">create</span> <span class="n">service</span> <span class="n">first</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSCHARCRE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;01020304010203040102030401020305&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span> <span class="o">//</span><span class="n">write</span> <span class="nb">property</span><span class="p">(</span><span class="n">read</span><span class="p">)</span> <span class="p">(</span><span class="n">read</span><span class="o">|</span><span class="n">write</span><span class="p">)</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSREGISTER</span><span class="o">=</span><span class="mi">1</span> <span class="o">//</span><span class="n">Register</span> <span class="n">Service</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattschar">
<h3>AT+BLEGATTSCHAR<a class="headerlink" href="#at-blegattschar" title="Link to this heading"></a></h3>
<p>Function: GATTS discovers characteristics.</p>
<section id="id201">
<h4>Query command<a class="headerlink" href="#id201" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>GATTS discovers characteristics.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLEGATTSCHAR?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLEGATTSCHAR</span><span class="p">:</span><span class="o">&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_uuid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_prop</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_perm</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">uuid_type</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;srv_index&gt;: service’s index starting from 0 to 2</p></li>
<li><p>&lt;char_index&gt;: characteristic’s index starting from 0 to 4</p></li>
<li><p>&lt;char_uuid&gt;: characteristic’s UUID</p></li>
<li><p>&lt;char_prop&gt;: characteristic’s property</p>
<ul>
<li><p>2: characteristic read property</p></li>
<li><p>4: characteristic write without response property</p></li>
<li><p>8: characteristic write with response property</p></li>
<li><p>16: characteristic notify property</p></li>
<li><p>32: characteristic indicate property</p></li>
</ul>
</li>
<li><p>&lt;char_perm&gt;: characteristic’s permissions</p>
<ul>
<li><p>1: read permissions</p></li>
<li><p>2: write permissions</p></li>
</ul>
</li>
<li><p>&lt;uuid_type&gt;: UUID’s type</p>
<ul>
<li><p>0: 16-bit UUID</p></li>
<li><p>2: 128-bit UUID</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="at-blegattscharcre">
<h3>AT+BLEGATTSCHARCRE<a class="headerlink" href="#at-blegattscharcre" title="Link to this heading"></a></h3>
<p>Function: GATTS creates characteristics.</p>
<section id="id202">
<h4>Set command<a class="headerlink" href="#id202" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>The Generic Attributes Server (GATTS) creates BLE servic’s characteristics.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSCHARCRE</span><span class="o">=&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_uuid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_prop</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_perm</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">uuid_type</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Recv</span> <span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span> <span class="nb">bytes</span>
<span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;srv_index&gt;: service’s index starting from 0 to 2</p></li>
<li><p>&lt;char_index&gt;: characteristic’s index starting from 0 to 4</p></li>
<li><p>&lt;char_uuid&gt;: characteristic’s UUID</p></li>
<li><p>&lt;char_prop&gt;: characteristic’s property</p>
<ul>
<li><p>2: characteristic read property</p></li>
<li><p>4: characteristic write without response property</p></li>
<li><p>8: characteristic write with response property</p></li>
<li><p>16: characteristic notify property</p></li>
<li><p>32: characteristic indicate property</p></li>
</ul>
</li>
<li><p>&lt;char_perm&gt;: characteristic’s permissions</p>
<ul>
<li><p>1: read permissions</p></li>
<li><p>2: write permissions</p></li>
</ul>
</li>
<li><p>&lt;uuid_type&gt;: UUID’s type</p>
<ul>
<li><p>0: 16-bit UUID</p></li>
<li><p>2: 128-bit UUID</p></li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSSRVCRE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;01020304010203040102030401020304&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span> <span class="o">//</span><span class="n">create</span> <span class="n">service</span> <span class="n">first</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSCHARCRE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;01020304010203040102030401020305&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span> <span class="o">//</span><span class="n">write</span> <span class="nb">property</span><span class="p">(</span><span class="n">read</span><span class="p">)</span> <span class="p">(</span><span class="n">read</span><span class="o">|</span><span class="n">write</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattsntfy">
<h3>AT+BLEGATTSNTFY<a class="headerlink" href="#at-blegattsntfy" title="Link to this heading"></a></h3>
<p>Function: Notify the characteristic value from the server to a client.</p>
<section id="id203">
<h4>Set command<a class="headerlink" href="#id203" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Notify the characteristic value from the server to a client.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSNTFY</span><span class="o">=&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>The symbol &gt; indicates that AT is ready for receiving serial data, and you can enter data now. When the requirement of data length determined by the parameter &lt;length&gt; is met, the notification starts.</p>
<p>If the data transmission is successful, AT returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Recv</span> <span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span> <span class="nb">bytes</span>
<span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: connection index(optional), default conn_index is zero.</p></li>
<li><p>&lt;srv_index&gt;: service’s index starting from 0 to 2</p></li>
<li><p>&lt;char_index&gt;: characteristic’s index starting from 0 to 4</p></li>
<li><p>&lt;length&gt;: maximum data length is 244.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSSRVCRE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;01020304010203040102030401020304&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="o">//</span><span class="n">create</span> <span class="n">service</span> <span class="n">first</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSCHARCRE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;01020304010203040102030401020305&quot;</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span> <span class="o">//</span><span class="n">notify</span> <span class="nb">property</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSREGISTER</span><span class="o">=</span><span class="mi">1</span> <span class="o">//</span><span class="n">Register</span> <span class="n">Service</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSNTFY</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span>
<span class="o">//</span> <span class="n">After</span> <span class="n">the</span> <span class="n">symbol</span> <span class="s2">&quot;&gt;&quot;</span> <span class="n">shows</span><span class="p">,</span> <span class="n">enter</span> <span class="n">the</span> <span class="mi">4</span><span class="o">-</span><span class="n">byte</span> <span class="n">data</span><span class="p">,</span> <span class="n">such</span> <span class="k">as</span> <span class="s2">&quot;1234&quot;</span><span class="o">.</span> <span class="n">Then</span> <span class="n">the</span> <span class="n">data</span> <span class="n">will</span> <span class="n">be</span> <span class="n">transmitted</span> <span class="n">automatically</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattsind">
<h3>AT+BLEGATTSIND<a class="headerlink" href="#at-blegattsind" title="Link to this heading"></a></h3>
<p>Function: Indicate the characteristic value from the server to a client.</p>
<section id="id204">
<h4>Set command<a class="headerlink" href="#id204" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Indicate the characteristic value from the server to a client.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSIND</span><span class="o">=&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>The symbol &gt; indicates that AT is ready for receiving serial data, and you can enter data now. When the requirement of data length determined by the parameter &lt;length&gt; is met, the notification starts.</p>
<p>If the data transmission is successful, AT returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Recv</span> <span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span> <span class="nb">bytes</span>
<span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: connection index(optional), default conn_index is zero.</p></li>
<li><p>&lt;srv_index&gt;: service’s index starting from 0 to 2</p></li>
<li><p>&lt;char_index&gt;: characteristic’s index starting from 0 to 4</p></li>
<li><p>&lt;length&gt;: maximum data length is 244.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSSRVCRE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;01020304010203040102030401020304&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span> <span class="o">//</span><span class="n">create</span> <span class="n">service</span> <span class="n">first</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSCHARCRE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;01020304010203040102030401020305&quot;</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span> <span class="o">//</span><span class="n">indicate</span> <span class="nb">property</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSREGISTER</span><span class="o">=</span><span class="mi">1</span> <span class="o">//</span><span class="n">Register</span> <span class="n">Service</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSIND</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span>
<span class="o">//</span> <span class="n">After</span> <span class="n">the</span> <span class="n">symbol</span> <span class="s2">&quot;&gt;&quot;</span> <span class="n">shows</span><span class="p">,</span> <span class="n">enter</span> <span class="n">the</span> <span class="mi">4</span><span class="o">-</span><span class="n">byte</span> <span class="n">data</span><span class="p">,</span> <span class="n">such</span> <span class="k">as</span> <span class="s2">&quot;1234&quot;</span><span class="o">.</span> <span class="n">Then</span> <span class="n">the</span> <span class="n">data</span> <span class="n">will</span> <span class="n">be</span> <span class="n">transmitted</span> <span class="n">automatically</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattsrd">
<h3>AT+BLEGATTSRD<a class="headerlink" href="#at-blegattsrd" title="Link to this heading"></a></h3>
<p>Function: Set the data when client read characteristic from the server.</p>
<section id="id205">
<h4>Set command<a class="headerlink" href="#id205" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set the data when client read characteristic from the server.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSRD</span><span class="o">=&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>The symbol &gt; indicates that AT is ready for receiving serial data, and you can enter data now. When the requirement of data length determined by the parameter &lt;length&gt; is met, the notification starts.</p>
<p>If the data transmission is successful, AT returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Recv</span> <span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span> <span class="nb">bytes</span>
<span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;srv_index&gt;: service’s index starting from 0 to 2</p></li>
<li><p>&lt;char_index&gt;: characteristic’s index starting from 0 to 4</p></li>
<li><p>&lt;length&gt;: maximum data length is 244.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">server</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSSRVCRE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;01020304010203040102030401020304&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span> <span class="o">//</span><span class="n">create</span> <span class="n">service</span> <span class="n">first</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSCHARCRE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;01020304010203040102030401020305&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span> <span class="o">//</span><span class="n">read</span> <span class="nb">property</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSREGISTER</span><span class="o">=</span><span class="mi">1</span> <span class="o">//</span><span class="n">Register</span> <span class="n">Service</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTSRD</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span>
<span class="o">//</span> <span class="n">After</span> <span class="n">the</span> <span class="n">symbol</span> <span class="s2">&quot;&gt;&quot;</span> <span class="n">shows</span><span class="p">,</span> <span class="n">enter</span> <span class="n">the</span> <span class="mi">4</span><span class="o">-</span><span class="n">byte</span> <span class="n">data</span><span class="p">,</span> <span class="n">such</span> <span class="k">as</span> <span class="s2">&quot;1234&quot;</span><span class="o">.</span> <span class="n">Then</span> <span class="n">the</span> <span class="n">data</span> <span class="n">will</span> <span class="n">be</span> <span class="n">transmitted</span> <span class="n">automatically</span> <span class="n">when</span> <span class="n">Client</span> <span class="n">read</span> <span class="n">characteristic</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">Server</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattcsrvdis">
<h3>AT+BLEGATTCSRVDIS<a class="headerlink" href="#at-blegattcsrvdis" title="Link to this heading"></a></h3>
<p>Function: GATTC discover services.</p>
<section id="id206">
<h4>Set command<a class="headerlink" href="#id206" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>GATTC discover services.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCSRVDIS</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLE</span><span class="p">:</span><span class="n">SRV</span><span class="p">:</span><span class="o">&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">srv_uuid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">srv_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">start_handle</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">end_handle</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;srv_index&gt;: service’s index starting from 1.</p></li>
<li><p>&lt;srv_uuid&gt;: service’s UUID.</p></li>
<li><p>&lt;srv_type&gt;: service’s type</p>
<ul>
<li><p>0: not primary service</p></li>
<li><p>1: primary service</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The BLE connection has to be established first.</p>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">client</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLECONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;11:22:33:44:55:66&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCSRVDIS</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattcchardis">
<h3>AT+BLEGATTCCHARDIS<a class="headerlink" href="#at-blegattcchardis" title="Link to this heading"></a></h3>
<p>Function: GATTC discover characteristics.</p>
<section id="id207">
<h4>Set command<a class="headerlink" href="#id207" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>GATTC discover characteristics.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCCHARDIS</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLE</span><span class="p">:</span><span class="n">SRVCHAR</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_uuid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_prop</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_handle</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_value_handle</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;srv_index&gt;: service’s index starting from 1.</p></li>
<li><p>&lt;char_index&gt;: characteristic’s index starting from 1.</p></li>
<li><p>&lt;char_uuid&gt;: characteristic’s UUID.</p></li>
<li><p>&lt;char_prop&gt;: characteristic’s property</p>
<ul>
<li><p>1: characteristic read property</p></li>
<li><p>2: characteristic write without response property</p></li>
<li><p>4: characteristic write with response property</p></li>
<li><p>8: characteristic notify property</p></li>
<li><p>16: characteristic indicate property</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The BLE connection has to be established first and the service needs to be discovered first.</p>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">client</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLECONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;11:22:33:44:55:66&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCSRVDIS</span><span class="o">=</span><span class="mi">0</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCCHARDIS</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattcwr">
<h3>AT+BLEGATTCWR<a class="headerlink" href="#at-blegattcwr" title="Link to this heading"></a></h3>
<p>Function: GATTC writes characteristics.</p>
<section id="id208">
<h4>Set command<a class="headerlink" href="#id208" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>GATTC writes characteristics.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCWR</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p>The symbol &gt; indicates that AT is ready for receiving serial data, and you can enter data now. When the requirement of data length determined by the parameter &lt;length&gt; is met, the notification starts.</p>
<p>If the data transmission is successful, AT returns:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Recv</span> <span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span> <span class="nb">bytes</span>
<span class="n">SEND</span> <span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;srv_index&gt;: service’s index starting from 1.</p></li>
<li><p>&lt;char_index&gt;: characteristic’s index starting from 1.</p></li>
<li><p>&lt;length&gt;: maximum data length is 244.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">client</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLECONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;11:22:33:44:55:66&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCSRVDIS</span><span class="o">=</span><span class="mi">0</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCCHARDIS</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCWR</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span>
<span class="o">//</span> <span class="n">After</span> <span class="n">the</span> <span class="n">symbol</span> <span class="s2">&quot;&gt;&quot;</span> <span class="n">shows</span><span class="p">,</span> <span class="n">enter</span> <span class="n">the</span> <span class="mi">4</span><span class="o">-</span><span class="n">byte</span> <span class="n">data</span><span class="p">,</span> <span class="n">such</span> <span class="k">as</span> <span class="s2">&quot;1234&quot;</span><span class="o">.</span> <span class="n">Then</span> <span class="n">the</span> <span class="n">data</span> <span class="n">will</span> <span class="n">be</span> <span class="n">transmitted</span> <span class="n">automatically</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattcrd">
<h3>AT+BLEGATTCRD<a class="headerlink" href="#at-blegattcrd" title="Link to this heading"></a></h3>
<p>Function: GATTC read characteristics.</p>
<section id="id209">
<h4>Set command<a class="headerlink" href="#id209" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>GATTC read characteristics.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCRD</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_index</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLE</span><span class="p">:</span><span class="n">GATTREAD</span><span class="p">:</span><span class="o">&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">srv_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">char_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">length</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;srv_index&gt;: service’s index starting from 1.</p></li>
<li><p>&lt;char_index&gt;: characteristic’s index starting from 1.</p></li>
<li><p>&lt;length&gt;: data length</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">client</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLECONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;11:22:33:44:55:66&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCSRVDIS</span><span class="o">=</span><span class="mi">0</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCCHARDIS</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCRD</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattcsubscribe">
<h3>AT+BLEGATTCSUBSCRIBE<a class="headerlink" href="#at-blegattcsubscribe" title="Link to this heading"></a></h3>
<p>Function: GATTC subscribe server.</p>
<section id="id210">
<h4>Set command<a class="headerlink" href="#id210" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>GATTC subscribe server.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCSUBSCRIBE</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">ccc_handle</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">value_handle</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;ccc_handle&gt;: Client Characteristic Configuration Descriptor handle.</p></li>
<li><p>&lt;value_handle&gt;: Characteristic value handle.</p></li>
<li><p>&lt;value&gt;: 1: notification; 2: indication</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">client</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLECONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;11:22:33:44:55:66&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCSUBSCRIBE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">1</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blegattcunsubscribe">
<h3>AT+BLEGATTCUNSUBSCRIBE<a class="headerlink" href="#at-blegattcunsubscribe" title="Link to this heading"></a></h3>
<p>Function: GATTC unsubscribe server.</p>
<section id="id211">
<h4>Set command<a class="headerlink" href="#id211" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>GATTC unsubscribe server.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCUNSUBSCRIBE</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">value_handle</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;value_handle&gt;: Characteristic value handle.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span> <span class="o">//</span> <span class="n">Role</span><span class="p">:</span> <span class="n">client</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLECONN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;11:22:33:44:55:66&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLEGATTCUNSUBSCRIBE</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">14</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bletxpwr">
<h3>AT+BLETXPWR<a class="headerlink" href="#at-bletxpwr" title="Link to this heading"></a></h3>
<p>Function: Query/set BLE TX power.</p>
<section id="id212">
<h4>Query command<a class="headerlink" href="#id212" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query BLE TX power.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLETXPWR?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLETXPWR</span><span class="p">:</span><span class="o">&lt;</span><span class="n">tx_power</span><span class="o">&gt;</span> <span class="n">Range</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">]</span><span class="o">.</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id213">
<h4>Set command<a class="headerlink" href="#id213" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set BLE TX power.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLETXPWR</span><span class="o">=&lt;</span><span class="n">tx_power</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;tx_power&gt;: tx power</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span> <span class="o">//</span> <span class="ow">or</span> <span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLETXPWR</span><span class="o">=</span><span class="mi">10</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blesecparam">
<h3>AT+BLESECPARAM<a class="headerlink" href="#at-blesecparam" title="Link to this heading"></a></h3>
<p>Function: Set/query BLE security parameter</p>
<section id="id214">
<h4>Query command<a class="headerlink" href="#id214" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query BLE security parameter.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLESECPARAM?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLESECPARAM</span><span class="p">:</span><span class="o">&lt;</span><span class="n">security</span> <span class="n">parameter</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
<section id="id215">
<h4>Set command<a class="headerlink" href="#id215" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Set BLE security parameter.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECPARAM</span><span class="o">=&lt;</span><span class="n">security</span> <span class="n">parameter</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p>&lt;security parameter&gt;: security parameter</p>
<blockquote>
<div><ul class="simple">
<li><p>0: BT_SMP_IO_DISPLAY_ONLY</p></li>
<li><p>1: BT_SMP_IO_DISPLAY_YESNO</p></li>
<li><p>2: BT_SMP_IO_KEYBOARD_ONLY</p></li>
<li><p>3: BT_SMP_IO_NO_INPUT_OUTPUT</p></li>
<li><p>4: BT_SMP_IO_KEYBOARD_DISPLAY</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">1</span> <span class="o">//</span> <span class="ow">or</span> <span class="n">AT</span><span class="o">+</span><span class="n">BLEINIT</span><span class="o">=</span><span class="mi">2</span>
<span class="n">AT</span><span class="o">+</span><span class="n">BLESECPARAM</span><span class="o">=</span><span class="mi">4</span> <span class="o">//</span> <span class="n">BT_SMP_IO_KEYBOARD_DISPLAY</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bleseccannel">
<h3>AT+BLESECCANNEL<a class="headerlink" href="#at-bleseccannel" title="Link to this heading"></a></h3>
<p>Function: BLE cancel pairing.</p>
<section id="id216">
<h4>Set command<a class="headerlink" href="#id216" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>BLE cancel pairing.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECCANNEL</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECCANNEL</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blesecpasskeyconfirm">
<h3>AT+BLESECPASSKEYCONFIRM<a class="headerlink" href="#at-blesecpasskeyconfirm" title="Link to this heading"></a></h3>
<p>Function: BLE pairing passkey confirm.</p>
<section id="id217">
<h4>Set command<a class="headerlink" href="#id217" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>BLE pairing passkey confirm .</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECPASSKEYCONFIRM</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECPASSKEYCONFIRM</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blesecpairingconfirm">
<h3>AT+BLESECPAIRINGCONFIRM<a class="headerlink" href="#at-blesecpairingconfirm" title="Link to this heading"></a></h3>
<p>Function: BLE pairing passkey confirm.</p>
<section id="id218">
<h4>Set command<a class="headerlink" href="#id218" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>BLE pairing confirm.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECPAIRINGCONFIRM</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECPAIRINGCONFIRM</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blesecpasskey">
<h3>AT+BLESECPASSKEY<a class="headerlink" href="#at-blesecpasskey" title="Link to this heading"></a></h3>
<p>Function: BLE pairing pass entry.</p>
<section id="id219">
<h4>Set command<a class="headerlink" href="#id219" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>BLE pairing pass entry.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECPASSKEY</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">passkey</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;passkey&gt;: pairing passkey. Range: [0,999999].</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECPASSKEY</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">123456</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blesecgetltklist">
<h3>AT+BLESECGETLTKLIST<a class="headerlink" href="#at-blesecgetltklist" title="Link to this heading"></a></h3>
<p>Function: Query BLE paired deviceList.</p>
<section id="id220">
<h4>Query command<a class="headerlink" href="#id220" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query BLE paired deviceList.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLESECGETLTKLIST?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BTADDR</span> <span class="mi">12</span><span class="p">:</span><span class="mi">34</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mi">78</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">11</span> <span class="p">(</span><span class="n">public</span><span class="p">)</span> <span class="n">LTK</span><span class="p">:</span><span class="mi">01234567890123456789012345678900</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-blesecunpair">
<h3>AT+BLESECUNPAIR<a class="headerlink" href="#at-blesecunpair" title="Link to this heading"></a></h3>
<p>Function: BLE unpairing.</p>
<section id="id221">
<h4>Set command<a class="headerlink" href="#id221" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>BLE unpairing.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECUNPAIR</span><span class="o">=&lt;</span><span class="n">address</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addrtype</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;addr&gt;: BLE address.</p></li>
<li><p>&lt;addr_type&gt;: BLE address type.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECUNPAIR</span><span class="o">=</span><span class="s2">&quot;12:34:56:78:00:12&quot;</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blesecstart">
<h3>AT+BLESECSTART<a class="headerlink" href="#at-blesecstart" title="Link to this heading"></a></h3>
<p>Function: BLE start pairing.</p>
<section id="id222">
<h4>Set command<a class="headerlink" href="#id222" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>BLE start pairing.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECSTART</span><span class="o">=&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">sec_level</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p>If error in pairing</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLE</span><span class="p">:</span><span class="n">PAIRINGFAILED</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">addr</span><span class="o">&gt;</span>

<span class="o">+</span><span class="n">BLE</span><span class="p">:</span><span class="n">DISCONNECTED</span><span class="p">:</span><span class="o">&lt;</span><span class="n">conn_index</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">addr</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;sec_level&gt;: Security level. Range: [0,4].</p>
<blockquote>
<div><ul class="simple">
<li><p>0: BT_SECURITY_L0, Only for BR/EDR special cases, like SDP.</p></li>
<li><p>1: BT_SEC_LEVEL_1, No encryption and no authentication.</p></li>
<li><p>2: BT_SEC_LEVEL_2, Encryption and no authentication (no MITM).</p></li>
<li><p>3: BT_SEC_LEVEL_3, Encryption and authentication (MITM).</p></li>
<li><p>4: BT_SEC_LEVEL_4, Authenticated Secure Connections and 128-bit key.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLESECSTART</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span>
</pre></div>
</div>
</section>
</section>
<section id="at-blebasinit">
<h3>AT+BLEBASINIT<a class="headerlink" href="#at-blebasinit" title="Link to this heading"></a></h3>
<p><strong>Function</strong></p>
<p>Initialize the Bluetooth BAS profile.</p>
<section id="id223">
<h4>Execute command<a class="headerlink" href="#id223" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEBASINIT</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-blebasdeinit">
<h3>AT+BLEBASDEINIT<a class="headerlink" href="#at-blebasdeinit" title="Link to this heading"></a></h3>
<p><strong>Function</strong></p>
<p>Deinitialize the Bluetooth BAS profile.</p>
<section id="id224">
<h4>Execute command<a class="headerlink" href="#id224" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEBASDEINIT</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-blebaslvlget">
<h3>AT+BLEBASLVLGET<a class="headerlink" href="#at-blebaslvlget" title="Link to this heading"></a></h3>
<p>Function: Query BLE BAS level.</p>
<section id="id225">
<h4>Query command<a class="headerlink" href="#id225" title="Link to this heading"></a></h4>
<p><strong>Function</strong></p>
<p>Query BLE BAS level.</p>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+BLEBASLVLGET?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">BLEBASLEVEL</span><span class="p">:</span><span class="mi">100</span> <span class="p">(</span><span class="n">level</span><span class="p">)</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-blebaslvlset">
<h3>AT+BLEBASLVLSET<a class="headerlink" href="#at-blebaslvlset" title="Link to this heading"></a></h3>
<p><strong>Function</strong></p>
<p>Set BLE BAS level.</p>
<section id="id226">
<h4>Set command<a class="headerlink" href="#id226" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEBASLVLSET</span><span class="o">=&lt;</span><span class="n">conn</span> <span class="n">idx</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">level</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p>&lt;conn_index&gt;: index of BLE connection. Range: [0,9].</p></li>
<li><p>&lt;level&gt;: battery level. Range: [0,100].</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEBASLVLSET</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bleiasinit">
<h3>AT+BLEIASINIT<a class="headerlink" href="#at-bleiasinit" title="Link to this heading"></a></h3>
<p><strong>Function</strong></p>
<p>Initialize the Bluetooth IAS profile.</p>
<section id="id227">
<h4>Execute command<a class="headerlink" href="#id227" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEIASINIT</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-bleiasdeinit">
<h3>AT+BLEIASDEINIT<a class="headerlink" href="#at-bleiasdeinit" title="Link to this heading"></a></h3>
<p><strong>Function</strong></p>
<p>Deinitialize the Bluetooth IAS profile.</p>
<section id="id228">
<h4>Execute command<a class="headerlink" href="#id228" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEIASDEINIT</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-bledisinit">
<h3>AT+BLEDISINIT<a class="headerlink" href="#at-bledisinit" title="Link to this heading"></a></h3>
<p><strong>Function</strong></p>
<p>Initialize the Bluetooth DIS profile.</p>
<section id="id229">
<h4>Set command<a class="headerlink" href="#id229" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEDISINIT</span><span class="o">=&lt;</span><span class="n">pnp_vid_src</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pnp_vid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pnp_pid</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">pnp_ver</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>&lt;pnp_vid_src&gt;</strong></dt><dd><ul>
<li><p>Range: &lt;0,255&gt;</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>&lt;pnp_vid&gt;</strong></dt><dd><ul>
<li><p>Range: &lt;0,65535&gt;</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>&lt;pnp_pid&gt;</strong></dt><dd><ul>
<li><p>Range: &lt;0,65535&gt;</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>&lt;pnp_ver&gt;</strong></dt><dd><ul>
<li><p>Range: &lt;0,65535&gt;</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEDISINIT</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">103</span>
</pre></div>
</div>
</section>
</section>
<section id="at-bledisdeinit">
<h3>AT+BLEDISDEINIT<a class="headerlink" href="#at-bledisdeinit" title="Link to this heading"></a></h3>
<p><strong>Function</strong></p>
<p>Deinitialize the Bluetooth DIS profile.</p>
<section id="id230">
<h4>Execute command<a class="headerlink" href="#id230" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEDISDEINIT</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="at-bledisset">
<h3>AT+BLEDISSET<a class="headerlink" href="#at-bledisset" title="Link to this heading"></a></h3>
<p><strong>Function</strong></p>
<p>Set the Bluetooth DIS profile.</p>
<section id="id231">
<h4>Set command<a class="headerlink" href="#id231" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEDISSET</span><span class="o">=&lt;</span><span class="n">parameter_name</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">parameter_value</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">parameter_len</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>&lt;parameter_name&gt;</strong>:</dt><dd><ul>
<li><p>“manuf”: Manufacturer Name String</p></li>
<li><p>“model”: Model Number String</p></li>
<li><p>“serial”: Serial Number String</p></li>
<li><p>“fw”: Firmware Revision String</p></li>
<li><p>“hw”: Hardware Revision String</p></li>
<li><p>“sw”: Software Revision String</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><strong>&lt;parameter_value&gt;</strong></p></li>
<li><p><strong>&lt;parameter_len&gt;</strong> Range: [0,21].</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">BLEDISSET</span><span class="o">=</span><span class="s2">&quot;manuf&quot;</span><span class="p">,</span><span class="s2">&quot;ST67W611M1&quot;</span><span class="p">,</span><span class="mi">10</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
<section id="low-power-at-commands">
<h1>Low power AT commands<a class="headerlink" href="#low-power-at-commands" title="Link to this heading"></a></h1>
<table class="docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Instruction</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#at-pwr">AT+PWR</a></p></td>
<td><p>Configure power mode</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-slwkio">AT+SLWKIO</a></p></td>
<td><p>Configure GPIO as wakeup source</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-dewkio">AT+DEWKIO</a></p></td>
<td><p>Delete GPIO as wakeup source</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-slwktimer">AT+SLWKTIMER</a></p></td>
<td><p>Configure timer as wakeup source</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-get-ap-dtim">AT+GET_AP_DTIM</a></p></td>
<td><p>Query the current DTIM setting obtained by the STA</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-get-twt-supported">AT+GET_TWT_SUPPORTED</a></p></td>
<td><p>Query whether TWT (Target Wake Time) is supported by the current firmware/platform</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-pwr-clear">AT+PWR_CLEAR</a></p></td>
<td><p>Clear/reset the internal power statistics/counters used by <code class="docutils literal notranslate"><span class="pre">PWR_GET</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-pwr-get">AT+PWR_GET</a></p></td>
<td><p>Get the current averaged power value (unit defined by implementation)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-slwkdtim">AT+SLWKDTIM</a></p></td>
<td><p>Configure DTIM</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-slcldtim">AT+SLCLDTIM</a></p></td>
<td><p>Delete DTIM config</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-twt-param">AT+TWT_PARAM</a></p></td>
<td><p>Setup TWT parameters</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-twt-sleep">AT+TWT_SLEEP</a></p></td>
<td><p>Enter TWT low power</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-twt-teardown">AT+TWT_TEARDOWN</a></p></td>
<td><p>Tear down TWT</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-twt-status">AT+TWT_STATUS</a></p></td>
<td><p>Get TWT status</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-lp-interval-get">AT+LP_INTERVAL_GET</a></p></td>
<td><p>Query the station listen interval value for power saving mode</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-start-keepalive">AT+START_KEEPALIVE</a></p></td>
<td><p>Start sending keepalive frames</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-stop-keepalive">AT+STOP_KEEPALIVE</a></p></td>
<td><p>Stop sending keepalive frames</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#at-get-clock">AT+GET_CLOCK</a></p></td>
<td><p>Get the current clock source</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at-set-clock">AT+SET_CLOCK</a></p></td>
<td><p>Set the system clock source</p></td>
</tr>
</tbody>
</table>
<section id="low-power-at-command-description">
<h2>Low power AT command description<a class="headerlink" href="#low-power-at-command-description" title="Link to this heading"></a></h2>
<section id="at-pwr">
<h3>AT+PWR<a class="headerlink" href="#at-pwr" title="Link to this heading"></a></h3>
<p>Function: Configure power mode</p>
<section id="id232">
<h4>Execute command<a class="headerlink" href="#id232" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">PWR</span><span class="o">=&lt;</span><span class="n">power</span> <span class="n">mode</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">level</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><dl class="simple">
<dt><strong>&lt;power mode&gt;</strong>:</dt><dd><ul>
<li><p>0: normal mode.</p></li>
<li><p>1: hibernate mode.</p></li>
<li><p>2: standby mode.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>[&lt;level&gt;]</strong>:</dt><dd><ul>
<li><p>In hibernate mode: power level 0-2;</p></li>
<li><p>In standby mode: 1 - enable receive broadcast package.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">PWR</span><span class="o">=</span><span class="mi">0</span>             <span class="o">//</span> <span class="n">Normal</span> <span class="n">mode</span>
<span class="n">AT</span><span class="o">+</span><span class="n">PWR</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span>           <span class="o">//</span> <span class="n">Hbn</span> <span class="n">mode</span><span class="p">,</span> <span class="n">level</span> <span class="mf">0.</span>
<span class="n">AT</span><span class="o">+</span><span class="n">PWR</span><span class="o">=</span><span class="mi">2</span>             <span class="o">//</span> <span class="n">Standby</span> <span class="n">mode</span>
<span class="n">AT</span><span class="o">+</span><span class="n">PWR</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span>           <span class="o">//</span> <span class="n">Standby</span> <span class="n">mode</span><span class="p">,</span> <span class="n">enable</span> <span class="n">receive</span> <span class="n">broadcast</span> <span class="n">package</span>
</pre></div>
</div>
</section>
</section>
<section id="at-slwkio">
<h3>AT+SLWKIO<a class="headerlink" href="#at-slwkio" title="Link to this heading"></a></h3>
<p>Function: Configure GPIO as wakeup source.</p>
<section id="id233">
<h4>Execute command<a class="headerlink" href="#id233" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SLWKIO</span><span class="o">=&lt;</span><span class="n">wakeup</span> <span class="n">io</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">trigger</span> <span class="n">mode</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;wakeup io&gt;</strong>: GPIO wakeup IO number. Supported values: 16 or 28</p></li>
<li><p><strong>&lt;trigger mode&gt;</strong>: wakeup trigger mode</p>
<blockquote>
<div><ul class="simple">
<li><p>0: Wakeup by high level</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The current implementation uses a five-wire SPI low-power solution, so the wakeup method isn’t configurable and only supports high-level wakeup.</p>
</div>
</section>
</section>
<section id="at-dewkio">
<h3>AT+DEWKIO<a class="headerlink" href="#at-dewkio" title="Link to this heading"></a></h3>
<p>Function: Delete GPIO as wakeup source.</p>
<section id="id234">
<h4>Execute command<a class="headerlink" href="#id234" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">DEWKIO</span><span class="o">=&lt;</span><span class="n">io</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;io&gt;</strong>: GPIO wakeup IO number.</p></li>
</ul>
</section>
</section>
<section id="at-slwktimer">
<h3>AT+SLWKTIMER<a class="headerlink" href="#at-slwktimer" title="Link to this heading"></a></h3>
<p>Function: Configure timer as wakeup source.</p>
<section id="id235">
<h4>Set command<a class="headerlink" href="#id235" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SLWKTIMER</span><span class="o">=&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">timeouts</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;mode&gt;</strong>: 0: standby mode; 1: hibernate mode</p></li>
<li><p><strong>&lt;timeouts&gt;</strong>: Set the wakeup duration in milliseconds. One-time wakeup timer, doesn’t enter sleep again after waking up (unless a new wakeup timer is configured again)</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SLWKTIMER</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">5000</span>                       <span class="o">//</span><span class="n">Standby</span> <span class="n">mode</span><span class="p">,</span> <span class="n">Wake</span> <span class="n">up</span> <span class="n">once</span> <span class="nb">next</span> <span class="mi">5000</span><span class="n">ms</span>
</pre></div>
</div>
</section>
</section>
<section id="at-get-ap-dtim">
<h3>AT+GET_AP_DTIM<a class="headerlink" href="#at-get-ap-dtim" title="Link to this heading"></a></h3>
<p>Function: Query the current DTIM setting obtained by the STA (as reported by firmware).</p>
<section id="id236">
<h4>Query command<a class="headerlink" href="#id236" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+GET_AP_DTIM?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">DTIM</span><span class="p">:</span><span class="o">&lt;</span><span class="n">dtim</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Return codes</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> — Query succeeded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERROR</span></code> — Query failed.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+GET_AP_DTIM?
+DTIM:3
OK
</pre></div>
</div>
</section>
</section>
<section id="at-get-twt-supported">
<h3>AT+GET_TWT_SUPPORTED<a class="headerlink" href="#at-get-twt-supported" title="Link to this heading"></a></h3>
<p>Function: Query whether TWT (Target Wake Time) is supported by the current firmware/platform.</p>
<section id="id237">
<h4>Query Command<a class="headerlink" href="#id237" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+GET_TWT_SUPPORTED?
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">TWT_SUPPORT</span><span class="p">:</span><span class="o">&lt;</span><span class="n">support</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">&lt;support&gt;</span></code> is:
- <code class="docutils literal notranslate"><span class="pre">0</span></code> — Not supported
- <code class="docutils literal notranslate"><span class="pre">1</span></code> — Supported</p>
<p><strong>Return codes</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> — Query succeeded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERROR</span></code> — Query failed.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+GET_TWT_SUPPORTED?
+TWT_SUPPORT:1
OK
</pre></div>
</div>
</section>
</section>
<section id="at-pwr-clear">
<h3>AT+PWR_CLEAR<a class="headerlink" href="#at-pwr-clear" title="Link to this heading"></a></h3>
<p>Function: Clear/reset the internal power statistics/counters used by <code class="docutils literal notranslate"><span class="pre">PWR_GET</span></code>.</p>
<section id="id238">
<h4>Execute command<a class="headerlink" href="#id238" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">PWR_CLEAR</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Return codes</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> — Operation succeeded.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">PWR_CLEAR</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-pwr-get">
<h3>AT+PWR_GET<a class="headerlink" href="#at-pwr-get" title="Link to this heading"></a></h3>
<p>Function: Get the current averaged power value (unit defined by implementation).</p>
<section id="id239">
<h4>Execute command<a class="headerlink" href="#id239" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">PWR_GET</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">AVERAGE</span> <span class="n">PWR</span><span class="p">:</span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>
<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Return codes</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> — Query succeeded.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">PWR_GET</span>
<span class="o">+</span><span class="n">AVERAGE</span> <span class="n">PWR</span><span class="p">:</span><span class="mi">1969</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-slwkdtim">
<h3>AT+SLWKDTIM<a class="headerlink" href="#at-slwkdtim" title="Link to this heading"></a></h3>
<p>Function: Configure DTIM as wakeup source</p>
<section id="id240">
<h4>Set command<a class="headerlink" href="#id240" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SLWKDTIM</span><span class="o">=&lt;</span><span class="n">dtim</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;dtim&gt;</strong>: Set the wakeup DTIM.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: Wake at every beacon (default; best compatibility, lowest latency).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code>: Wake at every DTIM (standards-compliant power save; no broadcast and multicast packet loss expected).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2…10</span></code>: Wake once every N DTIMs (stronger power saving; increased latency; broadcast and multicast packets may be missed).</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Standards compliance:</p></li>
</ul>
<blockquote>
<div><p>With <code class="docutils literal notranslate"><span class="pre">&lt;dtim&gt;=0</span></code> or <code class="docutils literal notranslate"><span class="pre">1</span></code>, behavior is 100% standards-compliant and shouldn’t lose broadcast and multicast packets by design.</p>
</div></blockquote>
<ul class="simple">
<li><p>Average reception ratio:</p></li>
</ul>
<blockquote>
<div><p>For <code class="docutils literal notranslate"><span class="pre">&lt;dtim&gt;</span> <span class="pre">≥</span> <span class="pre">2</span></code>, the STA is awake for roughly <code class="docutils literal notranslate"><span class="pre">1/&lt;dtim&gt;</span></code> of DTIM opportunities:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;dtim&gt;=2</span></code>: ~50% received on average.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;dtim&gt;=3</span></code>: ~33% received on average.</p></li>
<li><p>In general, received ≈ 1/N, missed ≈ 1 − 1/N.</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<ul class="simple">
<li><p>Broadcast/Multicast impact:</p></li>
</ul>
<blockquote>
<div><p>With <code class="docutils literal notranslate"><span class="pre">&lt;dtim&gt;</span> <span class="pre">≥</span> <span class="pre">2</span></code>, Broadcast/Multicast (for example, ARP, mDNS/LLMNR, discovery protocols) may be missed. Ensure the application tolerates this.</p>
</div></blockquote>
<ul class="simple">
<li><p>AP-defined DTIM:</p></li>
</ul>
<blockquote>
<div><p>The DTIM period is configured by the AP, not by the STA.</p>
<p>Effective wake interval is approximately:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>WakeInterval ≈ N × (AP&#39;s DTIM period in beacons) × BeaconInterval
</pre></div>
</div>
<p>Example (BeaconInterval = 100 ms):</p>
<ul class="simple">
<li><p>AP DTIM = 1, <code class="docutils literal notranslate"><span class="pre">&lt;dtim&gt;=3</span></code> → ~ <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">×</span> <span class="pre">1</span> <span class="pre">×</span> <span class="pre">100</span> <span class="pre">ms</span> <span class="pre">=</span> <span class="pre">300</span> <span class="pre">ms</span></code></p></li>
<li><p>AP DTIM = 2, <code class="docutils literal notranslate"><span class="pre">&lt;dtim&gt;=3</span></code> → ~ <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">×</span> <span class="pre">2</span> <span class="pre">×</span> <span class="pre">100</span> <span class="pre">ms</span> <span class="pre">=</span> <span class="pre">600</span> <span class="pre">ms</span></code></p></li>
</ul>
</div></blockquote>
</div></blockquote>
<ul class="simple">
<li><p>Wake point restriction:</p></li>
</ul>
<blockquote>
<div><p>When <code class="docutils literal notranslate"><span class="pre">&lt;dtim&gt;</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>, firmware must wake only at DTIM, not at arbitrary beacons.</p>
</div></blockquote>
<ul class="simple">
<li><p>Selection guidance:</p>
<ul>
<li><p>Low latency/high reliability: use <code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p></li>
<li><p>Power focused and tolerant of delay/loss: consider <code class="docutils literal notranslate"><span class="pre">2…3</span></code> (or higher) after validation.</p></li>
</ul>
</li>
</ul>
</div>
<p><strong>Return codes</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> — Command accepted.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ERROR</span></code> — Parameter out of range or invalid state.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SLWKDTIM</span><span class="o">=</span><span class="mi">10</span>                      <span class="o">//</span> <span class="n">Set</span> <span class="n">dtim10</span> <span class="k">for</span> <span class="n">wakeup</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="at-slcldtim">
<h3>AT+SLCLDTIM<a class="headerlink" href="#at-slcldtim" title="Link to this heading"></a></h3>
<p>Function: Delete DTIM config</p>
<section id="id241">
<h4>Set command<a class="headerlink" href="#id241" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SLCLDTIM</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SLCLDTIM</span>
</pre></div>
</div>
</section>
</section>
<section id="at-twt-param">
<h3>AT+TWT_PARAM<a class="headerlink" href="#at-twt-param" title="Link to this heading"></a></h3>
<p>Function: Setup TWT parameters.</p>
<section id="id242">
<h4>Set command<a class="headerlink" href="#id242" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">TWT_PARAM</span><span class="o">=&lt;</span><span class="n">setup</span> <span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">flow</span> <span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">exponent</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">wakeup</span> <span class="n">duration</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">wake</span> <span class="n">interval</span> <span class="n">mantissa</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>Setup type (s):</strong> 0: REQUEST, 1: SUGGEST, 2: DEMAND.</p></li>
<li><p><strong>Flow type (t):</strong> 0: ANNOUNCED TWT, 1: UNANNOUNCED TWT. Only supports unannounced TWT.</p></li>
<li><p><strong>Wake Interval Exponent:</strong> Specifies the wake interval</p></li>
<li><p><strong>Wake Duration (n):</strong> Minimum wake duration in microseconds.</p></li>
<li><p><strong>Wake Interval Mantissa (m):</strong> Mantissa value for precise interval adjustments.</p></li>
<li><p><strong>Service Period (SP):</strong> SP = WakeDuration * 256us.</p></li>
<li><p><strong>Wakeup Interval:</strong> Wakeup Interval = wake_int_mantissa &lt;&lt; WakeIntervalExponent us.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">TWT_PARAM</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">1000</span>                       <span class="o">//</span><span class="n">SP</span> <span class="o">=</span> <span class="mf">32.768</span> <span class="n">ms</span><span class="p">,</span> <span class="n">Wake</span> <span class="n">Interval</span> <span class="o">=</span> <span class="mf">8.192</span> <span class="n">seconds</span><span class="p">:</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>REQUEST setup type: The target wake time field of the TWT element is set to 0 as the responding STA/AP specifies the target wake time value in this case. Other fields are suggested by requesting STA.</p></li>
<li><p>SUGGEST setup type: TWT requesting STA will suggest the target wake time and other parameters during setup. Responding STA may / may not accommodate the suggested value. TWT Connection will still be accepted with values suggested by requesting STA or the values provided by responding STA.</p></li>
<li><p>DEMAND setup type: TWT requesting STA will demand the target wake time and other parameters during setup. If responding STA can’t accommodate the suggested value, TWT setup will fail.</p></li>
<li><p>Equation to calculate Service Period:</p>
<p><code class="docutils literal notranslate"><span class="pre">Service</span> <span class="pre">Period</span> <span class="pre">(SP)</span> <span class="pre">=</span> <span class="pre">(&lt;wakeup</span> <span class="pre">duration&gt;/10)</span> <span class="pre">ms</span></code></p>
<ul class="simple">
<li><p>Example:
<code class="docutils literal notranslate"><span class="pre">AT+TWT_PARAM=1,1,13,128,1000</span></code> → <code class="docutils literal notranslate"><span class="pre">SP</span> <span class="pre">=</span> <span class="pre">(128/10)</span> <span class="pre">=</span> <span class="pre">12.8</span> <span class="pre">ms</span></code></p></li>
</ul>
</li>
<li><p>Equation to calculate TWT Wake Interval:</p>
<p><code class="docutils literal notranslate"><span class="pre">TWT</span> <span class="pre">Wake</span> <span class="pre">Interval</span> <span class="pre">=</span> <span class="pre">((2^&lt;exponent&gt;)/&lt;wake</span> <span class="pre">interval</span> <span class="pre">mantissa&gt;)</span> <span class="pre">s</span></code></p>
<ul class="simple">
<li><p>Example:
<code class="docutils literal notranslate"><span class="pre">AT+TWT_PARAM=1,1,13,128,1000</span></code> → <code class="docutils literal notranslate"><span class="pre">TWT</span> <span class="pre">Wake</span> <span class="pre">Interval</span> <span class="pre">=</span> <span class="pre">((2^12)/1000)</span> <span class="pre">=</span> <span class="pre">8.192</span> <span class="pre">s</span></code></p></li>
</ul>
</li>
</ul>
</div>
</section>
</section>
<section id="at-twt-sleep">
<h3>AT+TWT_SLEEP<a class="headerlink" href="#at-twt-sleep" title="Link to this heading"></a></h3>
<p>Function: Enter TWT low power</p>
<section id="id243">
<h4>Set command<a class="headerlink" href="#id243" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">TWT_SLEEP</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">TWT_SLEEP</span>
</pre></div>
</div>
</section>
</section>
<section id="at-twt-teardown">
<h3>AT+TWT_TEARDOWN<a class="headerlink" href="#at-twt-teardown" title="Link to this heading"></a></h3>
<p>Function: Tear down the Target Wake Time (TWT) session.</p>
<section id="id244">
<h4>Set command<a class="headerlink" href="#id244" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">TWT_TEARDOWN</span><span class="o">=&lt;</span><span class="n">neg_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">all_twt</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">flow_id</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p>or</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;neg_type&gt;</strong>: TWT negotiation type.</p>
<blockquote>
<div><ul class="simple">
<li><p>0: Individual negotiation (TWT teardown will be performed for the specified TWT flow).</p></li>
<li><p>1: Negotiate TWT teardown on the next wake TBTT (Target Beacon Transmission Time). Currently not supported.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;all_twt&gt;</strong>: Specifies whether to tear down all TWT flows.</p>
<blockquote>
<div><ul class="simple">
<li><p>0: Tear down only the specified TWT flow (specified by &lt;flow_id&gt; parameter).</p></li>
<li><p>1: Tear down all existing TWT flows.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>&lt;flow_id&gt;</strong>: The TWT flow ID to be torn down. This parameter is required when &lt;all_twt&gt; is set to 0.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Internal RC errors can result in wake interval inaccuracies (for example, 60 ms deviation over 30 seconds).</p></li>
<li><p>External Oscillator Requirement: Testing must be conducted on boards with external crystal oscillators to minimize RTC clock deviation.</p></li>
<li><p>Router Compatibility: Use a TWT-compatible router for testing (for example, TP-Link AX5400).</p></li>
<li><p>Currently, only Individual negotiation type (0) is supported.</p></li>
<li><p>When &lt;all_twt&gt;=1, the &lt;flow_id&gt; parameter isn’t needed.</p></li>
<li><p>The device must be in TWT mode before using this command.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Tear</span> <span class="n">down</span> <span class="n">a</span> <span class="n">specific</span> <span class="n">TWT</span> <span class="n">flow</span> <span class="k">with</span> <span class="n">ID</span> <span class="mi">1</span>
<span class="n">AT</span><span class="o">+</span><span class="n">TWT_TEARDOWN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span>

<span class="o">//</span> <span class="n">Tear</span> <span class="n">down</span> <span class="nb">all</span> <span class="n">TWT</span> <span class="n">flows</span>
<span class="n">AT</span><span class="o">+</span><span class="n">TWT_TEARDOWN</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span>
</pre></div>
</div>
</section>
</section>
<section id="at-twt-status">
<h3>AT+TWT_STATUS<a class="headerlink" href="#at-twt-status" title="Link to this heading"></a></h3>
<p>Function: Query current TWT (Target Wake Time) session status.</p>
<section id="id245">
<h4>Execute command<a class="headerlink" href="#id245" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+TWT_STATUS?
</pre></div>
</div>
<p><strong>Response</strong></p>
<p>If TWT is active:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">TWT</span><span class="p">:</span><span class="n">ACTIVE</span><span class="p">:</span><span class="o">&lt;</span><span class="n">flow_id</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">flow_type</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">flow_type_str</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">wake_int_exp</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">min_wake_dur</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">wake_int_mantissa</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p>If no active TWT session:</p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">TWT</span><span class="p">:</span><span class="n">INACTIVE</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;flow_id&gt;</strong>: ID of the TWT flow</p></li>
<li><p><strong>&lt;flow_type&gt;</strong>: Type of TWT flow (0 for Announced, 1 for Unannounced)</p></li>
<li><p><strong>&lt;flow_type_str&gt;</strong>: Text description of flow type (“ANNOUNCED” or “UNANNOUNCED”)</p></li>
<li><p><strong>&lt;wake_int_exp&gt;</strong>: Wake interval exponent</p></li>
<li><p><strong>&lt;min_wake_dur&gt;</strong>: Minimum TWT wake duration</p></li>
<li><p><strong>&lt;wake_int_mantissa&gt;</strong>: Wake interval mantissa</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>AT+TWT_STATUS?

+TWT:ACTIVE:0,1,UNANNOUNCED,10,255,512

OK
</pre></div>
</div>
</section>
</section>
<section id="at-lp-interval-get">
<h3>AT+LP_INTERVAL_GET<a class="headerlink" href="#at-lp-interval-get" title="Link to this heading"></a></h3>
<p>Function: Query the station listen interval value for power saving mode.</p>
<section id="id246">
<h4>Query Command<a class="headerlink" href="#id246" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">LP_INTERVAL_GET</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">LP</span> <span class="n">INTERVAL</span><span class="p">:</span><span class="o">&lt;</span><span class="n">interval</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;interval&gt;</strong>: Listen interval value, specified as how often the STA wakes up to listen to beacon frames when in power save mode.</p></li>
</ul>
</section>
</section>
<section id="at-start-keepalive">
<h3>AT+START_KEEPALIVE<a class="headerlink" href="#at-start-keepalive" title="Link to this heading"></a></h3>
<p>Function: Start sending Null data frames at regular intervals to maintain AP connection.</p>
<section id="id247">
<h4>Set command<a class="headerlink" href="#id247" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">START_KEEPALIVE</span><span class="o">=&lt;</span><span class="n">period</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul class="simple">
<li><p><strong>&lt;period&gt;</strong>: The interval between Null data frame transmissions, in seconds.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This command creates a timer that periodically sends Null data frames to the connected AP to prevent connection timeout during periods of inactivity.</p></li>
<li><p>This can be useful for maintaining connection with APs that have aggressive client timeout settings.</p></li>
<li><p>The feature will only work when connected to an AP.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">START_KEEPALIVE</span><span class="o">=</span><span class="mi">30</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-stop-keepalive">
<h3>AT+STOP_KEEPALIVE<a class="headerlink" href="#at-stop-keepalive" title="Link to this heading"></a></h3>
<p>Function: Stop the periodic Null data frame transmission.</p>
<section id="id248">
<h4>Execute command<a class="headerlink" href="#id248" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">STOP_KEEPALIVE</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This command stops the timer created by AT+START_KEEPALIVE.</p></li>
<li><p>If no keepalive timer is active, the command will still return OK.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">STOP_KEEPALIVE</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-get-clock">
<h3>AT+GET_CLOCK<a class="headerlink" href="#at-get-clock" title="Link to this heading"></a></h3>
<p>Function: Get current clock source.</p>
<section id="id249">
<h4>Execute command<a class="headerlink" href="#id249" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">GET_CLOCK</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">GET_CLOCK</span><span class="p">:</span><span class="o">&lt;</span><span class="n">source</span><span class="o">&gt;</span>

<span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;source&gt;</strong>: Current clock source ID.</p>
<blockquote>
<div><ul class="simple">
<li><p>1: RC as the RTC clock source</p></li>
<li><p>2: Passive crystal oscillator as the RTC clock source</p></li>
<li><p>3: Active crystal oscillator as the RTC clock source</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">GET_CLOCK</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="o">+</span><span class="n">GET_CLOCK</span><span class="p">:</span><span class="mi">1</span>

<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
<section id="at-set-clock">
<h3>AT+SET_CLOCK<a class="headerlink" href="#at-set-clock" title="Link to this heading"></a></h3>
<p>Function: Set system clock source.</p>
<section id="id250">
<h4>Execute command<a class="headerlink" href="#id250" title="Link to this heading"></a></h4>
<p><strong>Command</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SET_CLOCK</span><span class="o">=&lt;</span><span class="n">source</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Response</strong></p>
<div class="screenoutput docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OK</span>
</pre></div>
</div>
</div>
<p><strong>Parameters</strong></p>
<ul>
<li><p><strong>&lt;source&gt;</strong>: Clock source to set.</p>
<blockquote>
<div><ul class="simple">
<li><p>1: RC as the RTC clock source</p></li>
<li><p>2: Passive crystal oscillator as the RTC clock source</p></li>
<li><p>3: Active crystal oscillator as the RTC clock source</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Changing the clock source may affect system performance and power consumption.</p></li>
<li><p>Some clock sources may not be available in certain power modes.</p></li>
</ul>
</div>
<p><strong>Example</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="o">+</span><span class="n">SET_CLOCK</span><span class="o">=</span><span class="mi">1</span>

<span class="o">//</span> <span class="n">Response</span>
<span class="n">OK</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
<section id="set-up-secure-communication">
<h1>Set up secure communication<a class="headerlink" href="#set-up-secure-communication" title="Link to this heading"></a></h1>
<p>This section walks you through embedding certificates into firmware using ROMFS, setting up a local HTTPS server, configuring MQTT services with TLS authentication, and verify MQTT TLS connectivity between ST67W611M1 devices and HiveMQ brokers.</p>
<section id="embed-certificates-with-romfs">
<h2>Embed certificates with ROMFS<a class="headerlink" href="#embed-certificates-with-romfs" title="Link to this heading"></a></h2>
<p>Integrate certificate files into the firmware by embedding them within a ROMFS (Read Only Memory File System) partition. This enables the device to securely access essential credentials such as CA certificates and private keys at runtime, supporting secure operations including authentication and encrypted communication.</p>
<ol class="arabic">
<li><p>Create the ROMFS directory and add certificate files</p>
<p>Create a folder named <code class="docutils literal notranslate"><span class="pre">romfs</span></code>, and place the required certificate files inside it. The directory structure should look like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>romfs$
<span class="w">  </span>ca_01.crt
<span class="w">  </span>cert_01.crt
<span class="w">  </span>private_01.key
</pre></div>
</div>
</li>
<li><p>Generate <code class="docutils literal notranslate"><span class="pre">romfs.bin</span></code> using the <code class="docutils literal notranslate"><span class="pre">genromfs</span></code> tool</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">genromfs</span></code> tool located in the SDK directory to generate the binary file. To automate this step, add the following command to your <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>:</p>
<div class="highlight-make notranslate"><div class="highlight"><pre><span></span><span class="k">$(</span><span class="nv">shell</span> <span class="nv">.</span>/<span class="nv">tools</span>/<span class="nv">genromfs</span> <span class="nv">-d</span> <span class="nv">romfs</span>/ <span class="nv">-f</span> <span class="nv">.</span>/<span class="nv">build</span>/<span class="nv">build_out</span>/<span class="nv">romfs.bin</span><span class="k">)</span>
</pre></div>
</div>
</li>
<li><p>Configure the flash settings</p>
<p>Open the <code class="docutils literal notranslate"><span class="pre">flash_prog_cfg.ini</span></code> file and add a new section for the ROMFS partition. Include the path to the generated binary and specify the flash address:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1">#media factory</span>
<span class="k">[romfs]</span>
<span class="na">filedir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">./build/build_out/romfs.bin</span>
<span class="na">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0x378000</span>
</pre></div>
</div>
<p>Make sure the <code class="docutils literal notranslate"><span class="pre">address</span></code> value matches the media partition address defined in the partition table.</p>
</li>
<li><p>Locate the partition table</p>
<p>Identify the correct partition table file based on your chip configuration. The file will be located in one of the following paths:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bsp/board/&lt;chip_name&gt;/config/partition_cfg_4M.toml</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bsp/board/&lt;chip_name&gt;/config_8M/partition_cfg_8M.toml</span></code></p></li>
</ul>
</li>
<li><p>Flash the firmware including <code class="docutils literal notranslate"><span class="pre">romfs.bin</span></code></p>
<p>Run the firmware flashing command to download the firmware and the <code class="docutils literal notranslate"><span class="pre">romfs.bin</span></code> file into the chip:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>flash<span class="w"> </span><span class="nv">CHIP</span><span class="o">=</span>qcc743<span class="w"> </span><span class="nv">COMX</span><span class="o">=</span>&lt;com_port&gt;
</pre></div>
</div>
</li>
</ol>
</section>
<section id="configure-mqtt-services-with-tls-authentication">
<h2>Configure MQTT services with TLS authentication<a class="headerlink" href="#configure-mqtt-services-with-tls-authentication" title="Link to this heading"></a></h2>
<p>Set up a secure local MQTT broker using Mosquitto and demonstrate the configuration of ST67W611M1 modules for publishing and subscribing to MQTT topics with various authentication options.</p>
<ol class="arabic">
<li><p>Install Mosquitto</p>
<p>Install the Mosquitto MQTT broker on your system:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>mosquitto
</pre></div>
</div>
</li>
<li><p>Set MQTT user password</p>
<p>Create a password file and set a password for the user <code class="docutils literal notranslate"><span class="pre">ST67W611M1</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mosquitto_passwd<span class="w"> </span>-c<span class="w"> </span>/etc/mosquitto/passwd<span class="w"> </span>ST67W611M1
</pre></div>
</div>
<p>Enter the password twice when prompted. For example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>123456789
</pre></div>
</div>
</li>
<li><p>Configure certificates</p>
<p>Copy the required certificate and key files to the Mosquitto configuration directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span><span class="o">{</span>case_path<span class="o">}</span>/lfs/lfs/server_1.crt<span class="w"> </span>/etc/mosquitto/server_1.crt
cp<span class="w"> </span><span class="o">{</span>case_path<span class="o">}</span>/lfs/lfs/server_1.key<span class="w"> </span>/etc/mosquitto/server_1.key
cp<span class="w"> </span><span class="o">{</span>case_path<span class="o">}</span>/lfs/lfs/ca_1.crt<span class="w"> </span>/etc/mosquitto/ca_1.crt
</pre></div>
</div>
</li>
<li><p>Start the MQTT service</p>
<p>Launch the Mosquitto broker with your configuration file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mosquitto<span class="w"> </span>-c<span class="w"> </span>/etc/mosquitto/mosquitto.conf
</pre></div>
</div>
</li>
<li><p>Subscribe to a topic from PC</p>
<p>Use the following command to subscribe to a topic securely:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mosquitto_sub<span class="w"> </span>-h<span class="w"> </span><span class="m">192</span>.168.31.156<span class="w"> </span>-u<span class="w"> </span>ST67W611M1<span class="w"> </span>-P<span class="w"> </span><span class="m">123456789</span><span class="w"> </span><span class="se">\</span>
--cafile<span class="w"> </span>lfs/lfs/ca_1.crt<span class="w"> </span>--cert<span class="w"> </span>lfs/lfs/client_1.crt<span class="w"> </span>--key<span class="w"> </span>lfs/lfs/client_1.key<span class="w"> </span><span class="se">\</span>
-t<span class="w"> </span><span class="s2">&quot;test/topic1&quot;</span><span class="w"> </span>--tls-version<span class="w"> </span>tlsv1.2<span class="w"> </span>--insecure
</pre></div>
</div>
</li>
<li><p>ST67W611M1 MQTT user configuration
Configure the ST67W611M1 device with user credentials and certificates:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTUSERCFG<span class="o">=</span><span class="m">0</span>,4,<span class="s2">&quot;ST67_01&quot;</span>,<span class="s2">&quot;ST67W611M1&quot;</span>,<span class="s2">&quot;123456789&quot;</span>,<span class="s2">&quot;client_1.crt&quot;</span>,<span class="s2">&quot;client_1.key&quot;</span>,<span class="s2">&quot;ca_1.crt&quot;</span>
</pre></div>
</div>
</li>
<li><p>ST67W611M1 connect to MQTT broker</p>
<p>Connect the ST67W611M1 device to the MQTT broker:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTCONN<span class="o">=</span><span class="m">0</span>,<span class="s2">&quot;192.168.31.156&quot;</span>,8883,0
</pre></div>
</div>
</li>
<li><p>ST67W611M1 publish a message</p>
<p>Publish a message to a topic from the ST67W611M1 device:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTPUB<span class="o">=</span><span class="m">0</span>,<span class="s2">&quot;test/topic1&quot;</span>,<span class="s2">&quot;This is a MQTT test&quot;</span>,2,0
</pre></div>
</div>
</li>
<li><p>ST67W611M1 subscribe to a topic</p>
<p>Subscribe to a topic from the ST67W611M1 device:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTSUB<span class="o">=</span><span class="m">0</span>,<span class="s2">&quot;test/topic2&quot;</span>,0
</pre></div>
</div>
</li>
<li><p>Publish a message from PC</p>
<p>Use the following command to publish a message to the broker from your PC:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mosquitto_pub<span class="w"> </span>-h<span class="w"> </span><span class="m">192</span>.168.31.156<span class="w"> </span>-p<span class="w"> </span><span class="m">8883</span><span class="w"> </span>-u<span class="w"> </span>ST67W611M1<span class="w"> </span>-P<span class="w"> </span><span class="m">123456789</span><span class="w"> </span><span class="se">\</span>
--cafile<span class="w"> </span>lfs/lfs/ca_1.crt<span class="w"> </span>--cert<span class="w"> </span>lfs/lfs/client_1.crt<span class="w"> </span>--key<span class="w"> </span>lfs/lfs/client_1.key<span class="w"> </span><span class="se">\</span>
-t<span class="w"> </span><span class="s2">&quot;test/topic2&quot;</span><span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Hello MQTT&quot;</span><span class="w"> </span>--tls-version<span class="w"> </span>tlsv1.2<span class="w"> </span>--insecure
</pre></div>
</div>
</li>
</ol>
</section>
<section id="verify-mqtt-tls-connectivity-between-st67w611m1-devices-and-hivemq-brokers">
<h2>Verify MQTT TLS connectivity between ST67W611M1 devices and HiveMQ brokers<a class="headerlink" href="#verify-mqtt-tls-connectivity-between-st67w611m1-devices-and-hivemq-brokers" title="Link to this heading"></a></h2>
<p>Verify MQTT TLS connectivity between ST67W611M1 devices and HiveMQ brokers using both serverless and starter plans. Demonstrate the configuration of one-way and two-way TLS authentication, set up Server Name Indication (SNI), and perform publish/subscribe operations to validate secure communication.</p>
<section id="verification-steps-for-the-serverless-version">
<h3>Verification steps for the serverless version<a class="headerlink" href="#verification-steps-for-the-serverless-version" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>Download the broker Root CA certificate from HiveMQ (<code class="docutils literal notranslate"><span class="pre">isrgrootx1.pem</span></code>) and place it in:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>examples/wifi/spi_wifi/lfs/lfs/isrgrootx1.pem
</pre></div>
</div>
</li>
<li><p>Rebuild the project and flash the image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>examples/wifi/spi_wifi/
make
<span class="c1"># Use QConn_Flash tool to flash the image</span>
</pre></div>
</div>
</li>
<li><p>Create a broker in the HiveMQ web console under the serverless plan. Set credentials:</p>
<ul class="simple">
<li><p>Username: <code class="docutils literal notranslate"><span class="pre">ST67W611M1</span></code></p></li>
<li><p>Password: <code class="docutils literal notranslate"><span class="pre">123456789</span></code></p></li>
<li><p>Permissions: Publish &amp; Subscribe</p></li>
</ul>
<p>Refer to HiveMQ documentation for detailed steps.</p>
</li>
<li><p>Connect the ST67W611M1 device to the Wi-Fi AP:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+CWMODE<span class="o">=</span><span class="m">1</span>
AT+CWJAP<span class="o">=</span><span class="s2">&quot;8E88&quot;</span>,<span class="s2">&quot;&quot;</span>
</pre></div>
</div>
</li>
<li><p>Configure MQTT user settings (one-way TLS):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTUSERCFG<span class="o">=</span><span class="m">0</span>,2,<span class="s2">&quot;ST67_01&quot;</span>,<span class="s2">&quot;ST67W611M1&quot;</span>,<span class="s2">&quot;123456789&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;isrgrootx1.pem&quot;</span>
</pre></div>
</div>
</li>
<li><p>Configure MQTT SSL/TLS SNI:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTSNI<span class="o">=</span><span class="m">0</span>,<span class="s2">&quot;8f3ef71da5bf445eb0669e56eecef396.s1.eu.hivemq.cloud&quot;</span>
</pre></div>
</div>
</li>
<li><p>Configure MQTT connection properties:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTCONNCFG<span class="o">=</span><span class="m">0</span>,120,0,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;&quot;</span>,0,0
</pre></div>
</div>
</li>
<li><p>Initiate MQTT connection:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTCONN<span class="o">=</span><span class="m">0</span>,<span class="s2">&quot;8f3ef71da5bf445eb0669e56eecef396.s1.eu.hivemq.cloud&quot;</span>,8883,0
</pre></div>
</div>
</li>
<li><p>Subscribe to all topics:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTSUB<span class="o">=</span><span class="m">0</span>,<span class="s2">&quot;#&quot;</span>,0
</pre></div>
</div>
</li>
<li><p>Publish a topic message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTPUB<span class="o">=</span><span class="m">0</span>,<span class="s2">&quot;/test/ST67_01&quot;</span>,<span class="s2">&quot;What&#39;s up guys&quot;</span>,0,0
</pre></div>
</div>
</li>
</ol>
</section>
<section id="verification-steps-for-the-starter-version">
<h3>Verification steps for the starter version<a class="headerlink" href="#verification-steps-for-the-starter-version" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>Download the broker Root CA certificate (<code class="docutils literal notranslate"><span class="pre">isrgrootx1.pem</span></code>) and place it in:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>examples/wifi/spi_wifi/lfs/lfs/isrgrootx1.pem
</pre></div>
</div>
</li>
<li><p>Rebuild the project and flash the image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>examples/wifi/spi_wifi/
make
<span class="c1"># Use QConn_Flash tool to flash the image</span>
</pre></div>
</div>
</li>
<li><p>Create a broker in the HiveMQ web console under the starter plan. Set credentials:</p>
<ul class="simple">
<li><p>Username: <code class="docutils literal notranslate"><span class="pre">ST67W611M1</span></code></p></li>
<li><p>Password: <code class="docutils literal notranslate"><span class="pre">123456789</span></code></p></li>
<li><p>Permissions: Publish &amp; Subscribe</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">ca_1.crt</span></code> as the Root CA for verifying device certificates</p></li>
</ul>
<p>Refer to HiveMQ documentation for detailed steps.</p>
</li>
<li><p>Connect the ST67W611M1 device to the Wi-Fi AP:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+CWMODE<span class="o">=</span><span class="m">1</span>
AT+CWJAP<span class="o">=</span><span class="s2">&quot;8E88&quot;</span>,<span class="s2">&quot;&quot;</span>
</pre></div>
</div>
</li>
<li><p>Configure MQTT user settings (two-way TLS):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTUSERCFG<span class="o">=</span><span class="m">0</span>,4,<span class="s2">&quot;ST67_01&quot;</span>,<span class="s2">&quot;ST67W611M1&quot;</span>,<span class="s2">&quot;123456789&quot;</span>,<span class="s2">&quot;client_1.crt&quot;</span>,<span class="s2">&quot;client_1.key&quot;</span>,<span class="s2">&quot;isrgrootx1.pem&quot;</span>
</pre></div>
</div>
</li>
<li><p>Configure MQTT SSL/TLS SNI:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTSNI<span class="o">=</span><span class="m">0</span>,<span class="s2">&quot;indigosquash-2lk628.a02.usw2.aws.hivemq.cloud&quot;</span>
</pre></div>
</div>
</li>
<li><p>Configure MQTT connection properties:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTCONNCFG<span class="o">=</span><span class="m">0</span>,120,0,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;&quot;</span>,0,0
</pre></div>
</div>
</li>
<li><p>Initiate MQTT connection:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTCONN<span class="o">=</span><span class="m">0</span>,<span class="s2">&quot;indigosquash-2lk628.a02.usw2.aws.hivemq.cloud&quot;</span>,8883,0
</pre></div>
</div>
</li>
<li><p>Subscribe to all topics:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTSUB<span class="o">=</span><span class="m">0</span>,<span class="s2">&quot;#&quot;</span>,0
</pre></div>
</div>
</li>
<li><p>Publish a topic message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>AT+MQTTPUB<span class="o">=</span><span class="m">0</span>,<span class="s2">&quot;/test/ST67_01&quot;</span>,<span class="s2">&quot;What&#39;s up guys&quot;</span>,0,0
</pre></div>
</div>
</li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Qualcomm.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>